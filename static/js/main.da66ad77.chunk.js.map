{"version":3,"sources":["utils/txNotifier.ts","constants/contracts.js","constants/tokens.js","utils/web3.js","utils/storage.ts","utils/infura.js","constants/values.js","utils/number.ts","utils/pool.ts","components/NavBar/TotalBalance.tsx","components/NavBar/ConnectModal.tsx","components/NavBar/ConnectButton.tsx","components/NavBar/Menu.tsx","components/NavBar/index.tsx","components/common/AddressBlock.tsx","components/common/BalanceBlock.tsx","components/common/MaxButton.tsx","components/common/PriceSection.tsx","components/common/Wrapper.tsx","components/common/CheckBox.tsx","components/HomePage/Trade.tsx","components/HomePage/MainButton.tsx","components/HomePage/TotalSupply.tsx","components/HomePage/MarketCap.tsx","components/common/EpochBlock.tsx","components/HomePage/index.tsx","components/Trade/Header.tsx","components/common/IconHeader.tsx","components/Trade/index.tsx","components/Footer/index.tsx","components/common/TextBlock.tsx","components/Wallet/Header.tsx","components/common/BigNumberInput.tsx","components/Wallet/WithdrawDeposit.tsx","components/Wallet/BondUnbond.tsx","components/Wallet/Invest.tsx","components/Wallet/index.tsx","components/common/NumberBlock.tsx","components/EpochDetail/AdvanceEpoch.tsx","components/EpochDetail/Header.tsx","components/EpochDetail/index.tsx","components/CouponMarket/Header.tsx","components/CouponMarket/PurchaseCoupons.tsx","components/CouponMarket/PurchaseHistory.tsx","components/CouponMarket/ModalWarning.tsx","components/CouponMarket/index.tsx","components/Governance/Header.tsx","utils/gov.ts","components/Governance/ProposeCandidate.tsx","components/Governance/CandidateHistory.tsx","components/Governance/index.tsx","components/Candidate/Vote.tsx","components/Candidate/VoteHeader.tsx","components/Candidate/CommitHeader.tsx","components/Candidate/Commit.tsx","components/Candidate/index.tsx","components/Regulation/Header.tsx","components/Regulation/RegulationHistory.tsx","components/Regulation/index.tsx","components/Pool/WithdrawDeposit.tsx","components/Pool/BondUnbond.tsx","components/Pool/Header.tsx","components/Pool/Claim.tsx","components/Pool/Provide.tsx","components/Pool/Invest.tsx","components/Pool/index.tsx","components/HomePageNoWeb3/index.tsx","components/About/index.tsx","components/Tool/NextEpoch.tsx","components/Tool/TokenDistribution.tsx","components/Tool/HistoryReturn.tsx","components/Tool/index.tsx","App.tsx","serviceWorker.js","index.tsx"],"names":["notify","v","console","log","DollarPool2","DollarPool3","DollarPool4","PANCAKE_TRADE","PANCAKE_SUPPLY","UNI","USDC","addr","decimals","symbol","EQD","EQDS","ESD","DSD","ZAI","ZAP","testnetUSDCAbi","require","daoAbi","poolAbi","UINT256_MAX","updateModalMode","theme","a","window","darkMode","connect","ethereum","web3","Web3","eth","getAccounts","addresses","length","enable","toLowerCase","checkConnectedAndGetAddress","approve","tokenAddr","spender","amt","account","oToken","Contract","methods","send","from","on","hash","advance","dao","daoContract","deposit","amount","BigNumber","toFixed","withdraw","bond","unbondUnderlying","purchaseCoupons","redeemCoupons","epoch","recordVote","candidate","voteType","vote","commit","depositPool","pool","callback","poolContract","withdrawPool","bondPool","unbondPool","unbond","claimPool","claim","providePool","provide","getPreference","key","defaultValue","localStorage","getItem","storePreference","value","setItem","MAX_UINT256","pow","minus","GOVERNANCE_QUORUM","GOVERNANCE_PROPOSAL_THRESHOLD","dollarAbi","uniswapPairAbi","undefined","getTokenBalance","token","tokenContract","balanceOf","call","getTokenTotalSupply","totalSupply","getTokenAllowance","allowance","getBalanceBonded","balanceOfBonded","loadFluidStatusDao","getPastEvents","filter","fromBlock","bondP","unbondP","lastUnbond","Math","max","map","u","returnValues","start","lastBond","d","fluidEpoch","getBalanceOfStaged","balanceOfStaged","getStatusOf","statusOf","getFluidUntil","getEpoch","getEpochTime","epochTime","getTotalDebt","totalDebt","getTotalRedeemable","totalRedeemable","getTotalCoupons","totalCoupons","getTotalBonded","totalBonded","getTotalStaged","totalStaged","getTotalBondedAt","totalBondedAt","getApproveFor","approveFor","getRejectFor","rejectFor","getStartFor","startFor","getPeriodFor","periodFor","getIsInitialized","isInitialized","getRecordedVote","recordedVote","getBalanceOfCoupons","balanceOfCoupons","getBatchBalanceOfCoupons","epochs","calls","Promise","all","getCouponsExpiration","couponsExpiration","getBatchCouponsExpiration","getCouponPremium","couponPremium","getImplementation","implementation","getPool","getCouponEpochs","purchaseP","transferP","to","bought","given","events","e","couponAmount","concat","couponEpochs","reduce","event","prev","get","set","coupons","plus","Map","values","sort","b","getAllProposals","payload","prop","blockNumber","getAllRegulations","increaseP","decreaseP","neutralP","increase","decrease","neutral","type","data","getTotalSupplyUni","getPoolStatusOf","loadFluidStatusPool","getPoolBalanceOfBonded","getPoolBalanceOfStaged","getPoolBalanceOfRewarded","balanceOfRewarded","getPoolBalanceOfClaimable","balanceOfClaimable","getPoolTotalBonded","getPoolTotalStaged","getPoolTotalRewarded","totalRewarded","getPoolTotalClaimable","totalClaimable","getPoolFluidUntil","getBlockNumber","startEpoch","parseInt","toString","toBaseUnitBN","rawAmt","raw","base","decimalsBN","times","integerValue","toTokenUnitsBN","tokenAmount","tokenDecimals","digits","div","isPos","isZero","isPositive","ownership","balance","multipliedBy","dividedBy","formatBN","position","isLessThan","bnStr","includes","parts","split","i","pad","precision","ROUND_FLOOR","replace","delineate","formatMoney","n","toPrecision","abs","Number","formatNumber","getPoolAddress","Error","getLegacyPoolAddress","poolAddress","TotalBalance","user","useState","totalBalance","setTotalBalance","useEffect","isCancelled","updateUserInfo","id","setInterval","clearInterval","EQDBalance","stagedBalance","bondedBalance","pairBalanceEQDStr","pairTotalSupplyUNIStr","userUNIBalanceStr","userPoolBondedBalanceStr","userPoolStagedBalanceStr","userPoolRewardedBalanceStr","userPoolClaimableBalanceStr","userBalance","userStagedBalance","userBondedBalance","userUNIBalance","userPoolBondedBalance","userPoolStagedBalance","userPoolRewardedBalance","userPoolClaimableBalance","UNItoEQD","daoTotalBalance","poolTotalBalance","circulationBalance","style","fontSize","padding","fontWeight","lineHeight","fontFamily","ConnectModal","visible","onClose","wallet","onConnect","useWallet","primary","width","margin","wide","label","icon","src","height","alt","onClick","ConnectButton","hasWeb3","setUser","status","reset","isModalOpen","setModalOpen","connectWeb3","disconnectWeb3","toggleModal","textAlign","paddingTop","flex","marginRight","entity","className","disabled","LinkButton","title","isSelected","marginLeft","opacity","Menu","history","page","push","NavBar","useHistory","currentTheme","useTheme","location","pathname","setPage","listen","logoUrl","_name","borderTop","border","backgroundColor","color","paddingBottom","maxWidth","AddressBlock","address","shorten","BalanceBlock","asset","suffix","integer","balanceBN","gte","tokens","MaxButton","defaultProps","PriceSection","forceDisplay","amtBN","gt","toNumber","styled","MyCheckBox","text","checked","onCheck","CheckBoxWrapper","onChange","Trade","pairBalanceEQD","pairBalanceUSDC","price","uniswapPair","alignItems","marginBottom","display","background","open","MainButton","description","tag","href","Icon","img","TotalSupply","MarketCap","EpochBlock","cursor","epochformatted","epochRemainder","floor","Date","now","epochHour","epochMinute","Container","HomePage","setPairBalanceEQD","setPairBalanceUSDC","setTotalSupply","setTotalBonded","setTotalStaged","setTotalRedeemable","setPoolLiquidity","setPoolTotalRewarded","setPoolTotalClaimable","setEpochTime","legacyPoolAddress","pairBalanceUSDCStr","totalSupplyStr","totalBondedStr","totalStagedStr","totalRedeemableStr","poolLiquidityStr","poolTotalRewardedStr","poolTotalClaimableStr","time","TradePageHeader","flexWrap","flexBasis","IconHeader","UniswapPool","FooterLink","Footer","updateTheme","role","aria-labelledby","TextBlock","STATUS_MAP","accountStatus","AccountPageHeader","accountEQDBalance","accountEQDSBalance","totalEQDSSupply","accountStagedBalance","accountBondedBalance","unlocked","isNaN","BigNumberInput","setter","adornment","adornmentPosition","isNegative","target","onBlur","WithdrawDeposit","depositAmount","setDepositAmount","withdrawAmount","setWithdrawAmount","comparedTo","minWidth","isGreaterThan","OverlayTrigger","placement","overlay","Tooltip","pointerEvents","BondUnbond","staged","bonded","lockup","bondAmount","setBondAmount","unbondAmount","setUnbondAmount","ContainerItem","Invest","float","Wallet","override","useParams","userEQDBalance","setUserEQDBalance","userEQDAllowance","setUserEQDAllowance","userEQDSBalance","setUserEQDSBalance","setTotalEQDSSupply","setUserStagedBalance","setUserBondedBalance","userStatus","setUserStatus","userStatusUnlocked","setUserStatusUnlocked","setLockup","fluidStatus","setFluidStatus","isCancelledApr","updateAPR","isCancelledUser","EQDAllowance","EQDsBalance","EQDsSupply","fluidUntilStr","fluidStatusStr","fluidUntil","updateUser","apr","NumberBlock","num","numNum","AdvanceEpoch","EpochPageHeader","EpochDetail","setEpoch","epochStr","epochTimeStr","CouponMarketHeader","debt","supply","premium","redeemable","PurchaseCoupons","purchaseAmount","setPurchaseAmount","setPremium","updatePremium","lte","purchaseAmountBase","premiumFormatted","maxPurchaseAmount","PurchaseHistory","hideRedeemed","setEpochs","initialized","setInitialized","epochsFromEvents","epochNumbers","couponsExpirations","expiration","fields","entries","entriesPerPage","onPageChange","renderEntry","ModalWarning","storedShowWarning","showWarning","setShowWarning","closeButton","warning","warningSurfaceContent","ONE_COUPON","CouponMarket","storedHideRedeemed","setBalance","setAllowance","setSupply","setCoupons","setRedeemable","setCouponPremium","setDebt","setHideRedeemed","balanceStr","allowanceStr","supplyStr","debtStr","couponsStr","redeemableStr","couponPremiumStr","alignSelf","CheckBox","GovernanceHeader","stake","totalStake","proposalStatus","period","reject","total","canPropose","plausibleCandidate","test","ProposeCandidate","setCandidate","heading","formatProposals","proposals","currentTotalStake","p","initializeds","approves","rejecteds","at","supplyAts","index","CandidateHistory","setProposals","allProposals","formattedProposals","proposal","Governance","setStake","setTotalStake","setImplementation","statusStr","stakeStr","totalStakeStr","implementationStr","VOTE_TYPE_MAP","Vote","participation","dividedToIntegerBy","VoteHeader","showParticipation","CommitHeader","periodEpoch","Commit","s","approved","Candidate","setApproveFor","setRejectFor","setVote","setStatus","userStake","setUserStake","setStartEpoch","setPeriodEpoch","voteStr","userStakeStr","approveForStr","rejectForStr","startForStr","periodForStr","epochN","startN","periodN","endsAfter","RegulationHeader","poolLiquidity","poolRewarded","poolClaimable","daoTotalSupply","legacyPoolRewarded","legacyPoolClaimable","poolTotalSupply","circulatingSupply","items","item","percentage","formatPrice","formatDeltaRedeemable","newRedeemable","formatDeltaDebt","lessDebt","newDebt","formatDeltaBonded","newBonded","RegulationHistory","regulations","setRegulations","allRegulations","Regulation","poolTotalRewarded","poolTotalClaimable","legacyPoolTotalRewarded","setLegacyPoolTotalRewarded","legacyPoolTotalClaimable","setLegacyPoolTotalClaimable","setTotalDebt","setTotalCoupons","legacyPoolTotalRewardedStr","legacyPoolTotalClaimableStr","totalDebtStr","totalCouponsStr","PoolPageHeader","accountUNIBalance","accountRewardedEQDBalance","accountClaimableEQDBalance","poolTotalBonded","accountPoolStatus","Claim","claimable","claimAmount","setClaimAmount","Provide","rewarded","userUSDCBalance","userUSDCAllowance","provideAmount","setProvideAmount","usdcAmount","setUsdcAmount","USDCToEQDRatio","onChangeAmountEQD","amountEQD","amountEQDBN","amountEQDBU","newAmountUSDC","newAmountEQD","EQDLpBonded","EQDLPBonded","lpHourly","lpDaily","lpWeekly","flexGrow","Pool","setPoolAddress","setPoolTotalBonded","setUserUNIBalance","userUNIAllowance","setUserUNIAllowance","setUserUSDCBalance","setUserUSDCAllowance","userRewardedBalance","setUserRewardedBalance","userClaimableBalance","setUserClaimableBalance","legacyUserStagedBalance","setLegacyUserStagedBalance","legacyUserBondedBalance","setLegacyUserBondedBalance","legacyUserRewardedBalance","setLegacyUserRewardedBalance","legacyUserClaimableBalance","setLegacyUserClaimableBalance","setLegacyUserStatus","setZapUSDCAllowance","setZapEQDAllowance","setZapESDAllowance","setZapDSDAllowance","setZapZaiAllowance","setUserESDBalance","setUserDSDBalance","setUserZaiBalance","poolAddressStr","poolTotalBondedStr","usdcBalance","usdcAllowance","rewardedBalance","claimableBalance","legacyStagedBalance","legacyBondedBalance","legacyRewardedBalance","legacyClaimableBalance","legacyStatus","zapUSDCAllowance","zapEQDAllowance","zapESDAllowance","zapDSDAllowance","zapZaiAllowance","userEQDBalanceStr","userESDBalanceStr","userDSDBalanceStr","userZaiBalanceStr","pairEQDBalance","pairUSDCBalance","legacyUserStatus","userESDBalance","userDSDBalance","userZAIBalance","isRewardedNegative","HomePageNoWeb3","Title","TitleSub","h1","Text","TextSub","TextBasic","li","Logo","About","rel","minutes","second","h2","NextEpoch","props","updateTime","TokenDistribution","totalSupplyUni","poolTotalStaged","HistoryReturn","Header","ContainerFlex","Tool","setTotalSupplyUni","setPoolTotalStaged","getTool","totalSupplyUniStr","poolTotalStagedStr","increaseBy","daoBonding","lpBonding","App","storedTheme","setHasWeb3","setTheme","chainId","connectors","walletconnect","rpcUrl","walletlink","url","appName","appLogoUrl","assetsUrl","process","layout","path","newTheme","Boolean","hostname","match","Moment","locale","momentLocalizer","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.da66ad77.chunk.js","sourcesContent":["export const notify = {\r\n  hash: (v) => console.log(v)\r\n}","/* eslint-disable camelcase */\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const UniswapV2Router02 = '0x05fF2B0DB69458A0750badebc4f9e13aDd608C7F';\r\nexport const DollarPool1 = '0xb45b75ab92275d8dd0701b1b0601e197d89b842b';\r\nexport const DollarPool2 = '0xb45b75ab92275d8dd0701b1b0601e197d89b842b';\r\nexport const DollarPool3 = '0xb45b75ab92275d8dd0701b1b0601e197d89b842b';\r\nexport const DollarPool4 = '0xb45b75ab92275d8dd0701b1b0601e197d89b842b';\r\nexport const UNISWAP_INFO = 'https://uniswap.info/pair/0x55b0c2eee5d48af6d2a65507319d20453e9f97b6';\r\nexport const UNISWAP_TRADE = 'https://app.uniswap.org/#/swap?outputCurrency=0x5Aae642C7ceA19A027590ea42f2366f64377c06F';\r\nexport const UNISWAP_SUPPLY = 'https://uniswap.exchange/add/0x5Aae642C7ceA19A027590ea42f2366f64377c06F/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48';\r\nexport const DEXTOOL = 'https://bscscan.com/address/0x55'; //Contract Pancake Pair\r\n\r\nexport const PANCAKE_INFO = 'https://pancakeswap.info/pair/0x55';\r\nexport const PANCAKE_TRADE = 'https://exchange.pancakeswap.finance/#/swap?outputCurrency=0x5Aae642C7ceA19A027590ea42f2366f64377c06F';\r\nexport const PANCAKE_SUPPLY = 'https://exchange.pancakeswap.finance/#/add/0x5Aae642C7ceA19A027590ea42f2366f64377c06F/0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56';\r\n","export const UNI = {\r\n  addr: '0xA527a61703D82139F8a06Bc30097cC9CAA2df5A6',\r\n  decimals: 18,\r\n  symbol: 'UNI',\r\n};\r\n\r\nexport const UNI_DSD_USDC = {\r\n  addr: '0x66e33d2605c5fb25ebb7cd7528e7997b0afa55e8',\r\n  decimals: 18,\r\n  symbol: 'UNI',\r\n};\r\n\r\nexport const USDC = {\r\n  addr: '0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d',\r\n  decimals: 6,\r\n  symbol: 'BUSD',\r\n};\r\n\r\nexport const EQD = {\r\n  addr: '0x5Aae642C7ceA19A027590ea42f2366f64377c06F',\r\n  decimals: 18,\r\n  symbol: 'EQD',\r\n};\r\n\r\nexport const EQDS = {\r\n  addr: '0x9471d6CDdf833fa5954A7b380226de7C8C6438CB',\r\n  decimals: 18,\r\n  symbol: 'EQD-S',\r\n};\r\n\r\nexport const ESD = {\r\n  addr: '0x36F3FD68E7325a35EB768F1AedaAe9EA0689d723',\r\n  decimals: 18,\r\n  symbol: 'ESD',\r\n};\r\n\r\nexport const DSD = {\r\n  addr: '0xbd2f0cd039e0bfcf88901c98c0bfac5ab27566e3',\r\n  decimals: 18,\r\n  symbol: 'DSD',\r\n};\r\n\r\nexport const ZAI = {\r\n  addr: '0x9d1233cc46795e94029fda81aaadc1455d510f15',\r\n  decimals: 18,\r\n  symbol: 'ZAI',\r\n};\r\n\r\nexport const DAI = {\r\n  addr: '0x6b175474e89094c44da98b954eedeac495271d0f',\r\n  symbol: 'DAI',\r\n};\r\n\r\nexport const ZAP = {\r\n  addr: '0xD3cF4e98e1e432B3d6Ae42AE406A78F2AC8293D0',\r\n};\r\n\r\nexport const ZAP_PIPE = {\r\n  addr: '0xBdcd4Dcc79bA2C4088323ca94F443a05A23cA372',\r\n};\r\n","/* eslint-disable camelcase */\r\nimport Web3 from 'web3';\r\nimport BigNumber from 'bignumber.js';\r\n\r\nimport { notify } from './txNotifier.ts';\r\nimport { UniswapV2Router02 } from '../constants/contracts';\r\n\r\nimport { EQD, USDC, ESD } from '../constants/tokens';\r\n\r\nconst uniswapRouterAbi = require('../constants/abi/UniswapV2Router02.json');\r\nconst testnetUSDCAbi = require('../constants/abi/TestnetUSDC.json');\r\nconst daoAbi = require('../constants/abi/Implementation.json');\r\nconst daoESDAbi = require('../constants/abi/ImplementationESD.json');\r\nconst daoDSDAbi = require('../constants/abi/ImplementationDSD.json');\r\nconst daoZAIAbi = require('../constants/abi/ImplementationZai.json');\r\nconst uniswapv2DSDAbi = require('../constants/abi/UniswapV2PairUSDC-EQD.json');\r\nconst poolAbi = require('../constants/abi/Pool.json');\r\n\r\nconst DEADLINE_FROM_NOW = 60 * 15;\r\nconst UINT256_MAX = '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\r\n\r\n/**\r\n * Connection Utilities\r\n */\r\n\r\nexport const updateModalMode = async (theme) => {\r\n  window.darkMode = theme === 'dark';\r\n};\r\n\r\nexport const connect = async (ethereum) => {\r\n  window.web3 = new Web3(ethereum);\r\n  let addresses = await window.web3.eth.getAccounts();\r\n  if (!addresses.length) {\r\n    try {\r\n      addresses = await window.ethereum.enable();\r\n    } catch (e) {\r\n      console.log(e);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return addresses.length ? addresses[0].toLowerCase() : null;\r\n};\r\n\r\n// eslint-disable-next-line consistent-return\r\nexport const checkConnectedAndGetAddress = async () => {\r\n  let addresses = await window.web3.eth.getAccounts();\r\n  if (!addresses.length) {\r\n    try {\r\n      addresses = await window.ethereum.enable();\r\n      // eslint-disable-next-line no-empty\r\n    } catch (e) { }\r\n  }\r\n\r\n  return addresses[0];\r\n};\r\n\r\n/**\r\n * ERC20 Utilities\r\n */\r\n\r\nexport const approve = async (tokenAddr, spender, amt = UINT256_MAX) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const oToken = new window.web3.eth.Contract(testnetUSDCAbi, tokenAddr);\r\n  await oToken.methods\r\n    .approve(spender, amt)\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const approveEQD = async (tokenAddr, spender, amt = UINT256_MAX) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const oToken = new window.web3.eth.Contract(daoAbi, tokenAddr);\r\n  await oToken.methods\r\n    .approve(spender, amt)\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const approveESD = async (tokenAddr, spender, amt = UINT256_MAX) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const oToken = new window.web3.eth.Contract(daoESDAbi, tokenAddr);\r\n  await oToken.methods\r\n    .approve(spender, amt)\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const approveDSD = async (tokenAddr, spender, amt = UINT256_MAX) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const oToken = new window.web3.eth.Contract(daoDSDAbi, tokenAddr);\r\n  await oToken.methods\r\n    .approve(spender, amt)\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const approveZAI = async (tokenAddr, spender, amt = UINT256_MAX) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const oToken = new window.web3.eth.Contract(daoZAIAbi, tokenAddr);\r\n  await oToken.methods\r\n    .approve(spender, amt)\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const approvePairDSD = async (tokenAddr, spender, amt = UINT256_MAX) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const oToken = new window.web3.eth.Contract(uniswapv2DSDAbi, tokenAddr);\r\n  await oToken.methods\r\n    .approve(spender, amt)\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const approvePairEQD = async (tokenAddr, spender, amt = UINT256_MAX) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const oToken = new window.web3.eth.Contract(uniswapv2DSDAbi, tokenAddr);\r\n  await oToken.methods\r\n    .approve(spender, amt)\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const mintTestnetUSDC = async (amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const usdc = new window.web3.eth.Contract(testnetUSDCAbi, USDC.addr);\r\n\r\n  await usdc.methods.mint(account, new BigNumber(amount).toFixed())\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\n/**\r\n * Uniswap Protocol\r\n */\r\n\r\nexport const buyEQD = async (buyAmount, maxInputAmount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\r\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\r\n\r\n  await router.methods.swapTokensForExactTokens(\r\n    buyAmount,\r\n    maxInputAmount,\r\n    [ESD.addr, EQD.addr],\r\n    account,\r\n    deadline,\r\n  )\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const sellEQD = async (sellAmount, minOutputAmount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\r\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\r\n\r\n  await router.methods.swapExactTokensForTokens(\r\n    sellAmount,\r\n    minOutputAmount,\r\n    [EQD.addr, USDC.addr],\r\n    account,\r\n    deadline,\r\n  )\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const addLiquidity = async (amountEQD, amountUSDC, slippage) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\r\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\r\n  const slippageBN = new BigNumber(slippage);\r\n  const minAmountEQD = new BigNumber(amountEQD)\r\n    .multipliedBy(new BigNumber(1).minus(slippageBN))\r\n    .integerValue(BigNumber.ROUND_FLOOR);\r\n  const minAmountUSDC = new BigNumber(amountUSDC)\r\n    .multipliedBy(new BigNumber(1).minus(slippageBN))\r\n    .integerValue(BigNumber.ROUND_FLOOR);\r\n\r\n  await router.methods.addLiquidity(\r\n    EQD.addr,\r\n    USDC.addr,\r\n    new BigNumber(amountEQD).toFixed(),\r\n    new BigNumber(amountUSDC).toFixed(),\r\n    minAmountEQD,\r\n    minAmountUSDC,\r\n    account,\r\n    deadline,\r\n  )\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const removeLiquidity = async (liquidityAmount, minAmountEQD, minAmountUSDC) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\r\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\r\n\r\n  await router.methods.removeLiquidity(\r\n    EQD.addr,\r\n    USDC.addr,\r\n    new BigNumber(liquidityAmount).toFixed(),\r\n    new BigNumber(minAmountEQD).toFixed(),\r\n    new BigNumber(minAmountUSDC).toFixed(),\r\n    account,\r\n    deadline,\r\n  )\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\n/**\r\n * Døllar Protocol\r\n */\r\n\r\nexport const advance = async (dao) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .advance()\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const deposit = async (dao, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .deposit(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const withdraw = async (dao, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .withdraw(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const bond = async (dao, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .bond(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const unbond = async (dao, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .unbond(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const unbondUnderlying = async (dao, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .unbondUnderlying(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const purchaseCoupons = async (dao, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .purchaseCoupons(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const redeemCoupons = async (dao, epoch, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .redeemCoupons(epoch, new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const recordVote = async (dao, candidate, voteType) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .vote(candidate, voteType)\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const commit = async (dao, candidate) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .commit(candidate)\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\n/* UNI-V2 Incentivization Pool */\r\nexport const depositPool = async (pool, amount, callback) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\r\n  await poolContract.methods\r\n    .deposit(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n      callback(hash);\r\n    });\r\n};\r\n\r\nexport const withdrawPool = async (pool, amount, callback) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\r\n  await poolContract.methods\r\n    .withdraw(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n      callback(hash);\r\n    });\r\n};\r\n\r\nexport const bondPool = async (pool, amount, callback) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\r\n  await poolContract.methods\r\n    .bond(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n      callback(hash);\r\n    });\r\n};\r\n\r\nexport const unbondPool = async (pool, amount, callback) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\r\n  await poolContract.methods\r\n    .unbond(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n      callback(hash);\r\n    });\r\n};\r\n\r\nexport const claimPool = async (pool, amount, callback) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\r\n  await poolContract.methods\r\n    .claim(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n      callback(hash);\r\n    });\r\n};\r\n\r\nexport const providePool = async (pool, amount, callback) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\r\n  await poolContract.methods\r\n    .provide(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n      callback(hash);\r\n    });\r\n};\r\n","/**\r\n * Get value by key\r\n * @param {string} key\r\n * @param {string} defaultValue\r\n */\r\nexport function getPreference(key:string, defaultValue:string): string {\r\n  return localStorage.getItem(key) || defaultValue;\r\n}\r\n\r\n/**\r\n * store value to storage\r\n * @param {string} key\r\n * @param {string} value\r\n */\r\nexport function storePreference(key:string, value:string):void {\r\n  localStorage.setItem(key, value);\r\n}\r\n","import Web3 from 'web3';\r\n\r\nimport BigNumber from 'bignumber.js';\r\nimport { UniswapV2Router02 } from '../constants/contracts';\r\nimport {\r\n  DAI,\r\n  EQD, UNI, ZAP_PIPE, USDC, ZAP,\r\n} from '../constants/tokens';\r\nimport { POOL_EXIT_LOCKUP_EPOCHS } from '../constants/values';\r\nimport { notify } from './txNotifier';\r\n\r\nconst dollarAbi = require('../constants/abi/Dollar.json');\r\nconst daoAbi = require('../constants/abi/Implementation.json');\r\nconst poolAbi = require('../constants/abi/Pool.json');\r\nconst uniswapRouterAbi = require('../constants/abi/UniswapV2Router02.json');\r\nconst uniswapPairAbi = require('../constants/abi/UniswapV2Pair.json');\r\nconst zapAbi = require('../constants/abi/Zap.json');\r\nconst zapPipeAbi = require('../constants/abi/ZapPipe.json');\r\n\r\nlet web3;\r\n// eslint-disable-next-line no-undef\r\nif (window.ethereum !== undefined) {\r\n  // eslint-disable-next-line no-undef\r\n  web3 = new Web3(ethereum);\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} token address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getTokenBalance = async (token, account) => {\r\n  if (account === '') return '0';\r\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\r\n  return tokenContract.methods.balanceOf(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getBalanceEth = async (account) => {\r\n  if (account === '') return '0';\r\n  // const tokenContract = new web3();\r\n  // console.log(web3.getBalance());\r\n  // return tokenContract.methods.balanceOf(account).call();\r\n};\r\n\r\nexport const getTokenTotalSupply = async (token) => {\r\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\r\n  return tokenContract.methods.totalSupply().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} token\r\n * @param {string} account\r\n * @param {string} spender\r\n * @return {Promise<string>}\r\n */\r\nexport const getTokenAllowance = async (token, account, spender) => {\r\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\r\n  return tokenContract.methods.allowance(account, spender).call();\r\n};\r\n\r\n// Døllar Protocol\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getBalanceBonded = async (dao, account) => {\r\n  if (account === '') return '0';\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.balanceOfBonded(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @return {Promise<{fluidEpoch: number, lastBond: number, lastUnbond: number}>}\r\n */\r\n\r\nexport const loadFluidStatusDao = async (dao, account) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  const bondP = await daoContract.getPastEvents('Bond', { filter: { account }, fromBlock: 0 });\r\n  const unbondP = await daoContract.getPastEvents('Unbond', { filter: { account }, fromBlock: 0 });\r\n\r\n  if (bondP.length + unbondP.length > 0) {\r\n    const lastUnbond = Math.max(...unbondP.map((u) => u.returnValues.start / 1));\r\n    const lastBond = Math.max(...bondP.map((d) => d.returnValues.start / 1));\r\n    const fluidEpoch = Math.max(lastUnbond, lastBond);\r\n\r\n    return { lastUnbond, lastBond, fluidEpoch: fluidEpoch - 1 };\r\n  }\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getBalanceOfStaged = async (dao, account) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.balanceOfStaged(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getStatusOf = async (dao, account) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.statusOf(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getFluidUntil = async (dao, account) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.statusOf(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getLockedUntil = async (dao, account) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.lockedUntil(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getEpoch = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.epoch().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getEpochTime = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.epochTime().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getTotalDebt = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.totalDebt().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getTotalRedeemable = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.totalRedeemable().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getTotalCoupons = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.totalCoupons().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getTotalBonded = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.totalBonded().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getTotalStaged = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.totalStaged().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {number} epoch number\r\n * @return {Promise<string>}\r\n */\r\nexport const getTotalBondedAt = async (dao, epoch) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.totalBondedAt(epoch).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} candidate address\r\n * @return {Promise<string>}\r\n */\r\nexport const getApproveFor = async (dao, candidate) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.approveFor(candidate).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} candidate address\r\n * @return {Promise<string>}\r\n */\r\nexport const getRejectFor = async (dao, candidate) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.rejectFor(candidate).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} candidate address\r\n * @return {Promise<string>}\r\n */\r\nexport const getStartFor = async (dao, candidate) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.startFor(candidate).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} candidate address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPeriodFor = async (dao, candidate) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.periodFor(candidate).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} candidate address\r\n * @return {Promise<boolean>}\r\n */\r\nexport const getIsInitialized = async (dao, candidate) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.isInitialized(candidate).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @param {string} candidate address\r\n * @return {Promise<string>}\r\n */\r\nexport const getRecordedVote = async (dao, account, candidate) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.recordedVote(account, candidate).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @param {number} epoch number\r\n * @return {Promise<string>}\r\n */\r\nexport const getBalanceOfCoupons = async (dao, account, epoch) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.balanceOfCoupons(account, epoch).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @param {number[]} epochs number[]\r\n * @return {Promise<string[]>}\r\n */\r\nexport const getBatchBalanceOfCoupons = async (dao, account, epochs) => {\r\n  const calls = epochs.map((epoch) => getBalanceOfCoupons(dao, account, epoch));\r\n  return Promise.all(calls);\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {number} epoch address\r\n * @return {Promise<string>}\r\n */\r\nexport const getOutstandingCoupons = async (dao, epoch) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.outstandingCoupons(epoch).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {number} epoch number\r\n * @return {Promise<string>}\r\n */\r\nexport const getCouponsExpiration = async (dao, epoch) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.couponsExpiration(epoch).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {number[]} epochs number[]\r\n * @return {Promise<string[]>}\r\n */\r\nexport const getBatchCouponsExpiration = async (dao, epochs) => {\r\n  const calls = epochs.map((epoch) => getCouponsExpiration(dao, epoch));\r\n  return Promise.all(calls);\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string|BigNumber} amount uint256\r\n * @return {Promise<string>}\r\n */\r\nexport const getCouponPremium = async (dao, amount) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.couponPremium(new BigNumber(amount).toFixed()).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getImplementation = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.implementation().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPool = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.pool().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao\r\n * @param {string} account\r\n * @return {Promise<any[]>}\r\n */\r\nexport const getCouponEpochs = async (dao, account) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  const purchaseP = daoContract.getPastEvents('CouponPurchase', {\r\n    filter: { account },\r\n    fromBlock: 0,\r\n  });\r\n  const transferP = daoContract.getPastEvents('CouponTransfer', {\r\n    filter: { to: account },\r\n    fromBlock: 0,\r\n  });\r\n  const [bought, given] = await Promise.all([purchaseP, transferP]);\r\n  const events = bought.map((e) => ({ epoch: e.returnValues.epoch, amount: e.returnValues.couponAmount }))\r\n    .concat(given.map((e) => ({ epoch: e.returnValues.epoch, amount: 0 })));\r\n\r\n  const couponEpochs = [\r\n    ...events.reduce(\r\n      (map, event) => {\r\n        const { epoch, amount } = event;\r\n        const prev = map.get(epoch);\r\n\r\n        if (prev) {\r\n          map.set(epoch, { epoch, coupons: prev.coupons.plus(new BigNumber(amount)) });\r\n        } else {\r\n          map.set(epoch, { epoch, coupons: new BigNumber(amount) });\r\n        }\r\n\r\n        return map;\r\n      },\r\n      new Map(),\r\n    ).values(),\r\n  ];\r\n\r\n  return couponEpochs.sort((a, b) => a - b);\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao\r\n * @return {Promise<any[]>}\r\n */\r\nexport const getAllProposals = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  const payload = (await daoContract.getPastEvents('Proposal', {\r\n    fromBlock: 0,\r\n  })).map((event) => {\r\n    const prop = event.returnValues;\r\n    prop.blockNumber = event.blockNumber;\r\n    return prop;\r\n  });\r\n  return payload.sort((a, b) => b.blockNumber - a.blockNumber);\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao\r\n * @return {Promise<any[]>}\r\n */\r\nexport const getAllRegulations = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  const increaseP = daoContract.getPastEvents('SupplyIncrease', { fromBlock: 0 });\r\n  const decreaseP = daoContract.getPastEvents('SupplyDecrease', { fromBlock: 0 });\r\n  const neutralP = daoContract.getPastEvents('SupplyNeutral', { fromBlock: 0 });\r\n\r\n  const [increase, decrease, neutral] = await Promise.all([increaseP, decreaseP, neutralP]);\r\n\r\n  const events = increase.map((e) => ({ type: 'INCREASE', data: e.returnValues }))\r\n    .concat(decrease.map((e) => ({ type: 'DECREASE', data: e.returnValues })))\r\n    .concat(neutral.map((e) => ({ type: 'NEUTRAL', data: e.returnValues })));\r\n\r\n  return events.sort((a, b) => b.data.epoch - a.data.epoch);\r\n};\r\n\r\n// Uniswap Protocol\r\n\r\nexport const getCost = async (amount) => {\r\n  const exchange = new web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [inputAmount, _] = await exchange.methods.getAmountsIn(\r\n    new BigNumber(amount).toFixed(),\r\n    [USDC.addr, EQD.addr],\r\n  ).call();\r\n  return inputAmount;\r\n};\r\n\r\nexport const getProceeds = async (amount) => {\r\n  const exchange = new web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [_, outputAmount] = await exchange.methods.getAmountsOut(\r\n    new BigNumber(amount).toFixed(),\r\n    [EQD.addr, USDC.addr],\r\n  ).call();\r\n  return outputAmount;\r\n};\r\n\r\nexport const getReserves = async () => {\r\n  const exchange = new web3.eth.Contract(uniswapPairAbi, UNI.addr);\r\n  return exchange.methods.getReserves().call();\r\n};\r\n\r\nexport const getInstantaneousPrice = async () => {\r\n  const [reserve, token0] = await Promise.all([getReserves(), getToken0()]);\r\n  const token0Balance = new BigNumber(reserve.reserve0);\r\n  const token1Balance = new BigNumber(reserve.reserve1);\r\n  if (token0.toLowerCase() === USDC.addr.toLowerCase()) {\r\n    return token0Balance.multipliedBy(new BigNumber(10).pow(12)).dividedBy(token1Balance);\r\n  }\r\n  return token1Balance.multipliedBy(new BigNumber(10).pow(12)).dividedBy(token0Balance);\r\n};\r\n\r\nexport const getToken0 = async () => {\r\n  const exchange = new web3.eth.Contract(uniswapPairAbi, UNI.addr);\r\n  return exchange.methods.token0().call();\r\n};\r\n\r\nexport const getTotalSupplyUni = async () => {\r\n  const tokenContract = new web3.eth.Contract(uniswapPairAbi, UNI.addr);\r\n  return tokenContract.methods.totalSupply().call();\r\n};\r\n\r\nexport const getPrice0CumulativeLast = async () => {\r\n  const price0 = new web3.eth.Contract(uniswapPairAbi, UNI.addr);\r\n  return price0.methods.price0CumulativeLast().call();\r\n};\r\n\r\nexport const getPrice1CumulativeLast = async () => {\r\n  const price0 = new web3.eth.Contract(uniswapPairAbi, UNI.addr);\r\n  return price0.methods.price1CumulativeLast().call();\r\n};\r\n\r\n// Pool\r\n\r\nexport const getPoolStatusOf = async (pool, account) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.statusOf(account).call();\r\n};\r\n\r\nexport const loadFluidStatusPool = async (pool, account) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  const bondP = await poolContract.getPastEvents('Bond', { filter: { account }, fromBlock: 0 });\r\n  const unbondP = await poolContract.getPastEvents('Unbond', { filter: { account }, fromBlock: 0 });\r\n\r\n  if (bondP.length + unbondP.length > 0) {\r\n    const lastUnbond = Math.max(...unbondP.map((u) => u.returnValues.start / 1));\r\n    const lastBond = Math.max(...bondP.map((d) => d.returnValues.start / 1));\r\n    const fluidEpoch = Math.max(lastUnbond, lastBond);\r\n\r\n    return { lastUnbond, lastBond, fluidEpoch: fluidEpoch - 1 };\r\n  }\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolBalanceOfBonded = async (pool, account) => {\r\n  if (account === '') return '0';\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.balanceOfBonded(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolBalanceOfStaged = async (pool, account) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.balanceOfStaged(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolBalanceOfRewarded = async (pool, account) => {\r\n  if (account === '') return '0';\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.balanceOfRewarded(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolBalanceOfClaimable = async (pool, account) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.balanceOfClaimable(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolTotalBonded = async (pool) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.totalBonded().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolTotalStaged = async (pool) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.totalStaged().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolTotalRewarded = async (pool) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.totalRewarded().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolTotalClaimable = async (pool) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.totalClaimable().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolFluidUntil = async (pool, account) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n\r\n  // no need to look back further than the pool lockup period\r\n  const blockNumber = await web3.eth.getBlockNumber();\r\n  const fromBlock = blockNumber - (POOL_EXIT_LOCKUP_EPOCHS + 1) * 8640;\r\n  const bondP = poolContract.getPastEvents('Bond', { filter: { account }, fromBlock });\r\n  const unbondP = poolContract.getPastEvents('Unbond', { filter: { account }, fromBlock });\r\n\r\n  const [bond, unbond] = await Promise.all([bondP, unbondP]);\r\n  const events = bond.map((e) => e.returnValues)\r\n    .concat(unbond.map((e) => e.returnValues));\r\n\r\n  const startEpoch = events.reduce(\r\n    (epoch, event) => {\r\n      if (epoch > event.start) return epoch;\r\n      return event.start;\r\n    }, 0,\r\n  );\r\n\r\n  // these contract events report the start epoch as one more than the active\r\n  // epoch when the event is emitted, so we subtract 1 here to adjust\r\n  return (parseInt(startEpoch, 10) + POOL_EXIT_LOCKUP_EPOCHS - 1).toString();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} account address\r\n * @param amount\r\n * @param fromAddress\r\n * @return {Promise<string>}\r\n */\r\nexport const buyUniV2 = async (account, amount, fromAddress) => {\r\n  const address = '0x0000000000000000000000000000000000000000';\r\n  const zapContract = new web3.eth.Contract(zapAbi, ZAP.addr);\r\n\r\n  return zapContract.methods.ZapIn(\r\n    fromAddress, UNI.addr, new BigNumber(amount).toFixed(), 0, address, address,\r\n    address,\r\n  ).send({\r\n    from: account,\r\n  }).on('transactionHash', (hash) => {\r\n    notify.hash(hash);\r\n  });\r\n};\r\n\r\nexport const buyUniV2FromProxy = async (account, amount, fromAddress, isZai = false) => {\r\n  const address = '0xDef1C0ded9bec7F1a1670819833240f027b25EfF';\r\n  const zapContract = new web3.eth.Contract(zapAbi, ZAP.addr);\r\n  const swapdata = web3.eth.abi.encodeFunctionCall(\r\n    {\r\n      name: 'sellToUniswap',\r\n      type: 'function',\r\n      inputs: [\r\n        {\r\n          type: 'address[]',\r\n          name: 'tokens',\r\n        },\r\n        {\r\n          type: 'uint256',\r\n          name: 'sellAmount',\r\n        },\r\n        {\r\n          type: 'uint256',\r\n          name: 'minBuyAmount',\r\n        },\r\n        {\r\n          type: 'bool',\r\n          name: 'isSushi',\r\n        },\r\n      ],\r\n    }, [\r\n    isZai ? [fromAddress, DAI.addr, USDC.addr] : [fromAddress, USDC.addr], new BigNumber(amount).toFixed(), 0, false,\r\n  ],\r\n  );\r\n\r\n  return zapContract.methods.ZapIn(\r\n    fromAddress, UNI.addr, new BigNumber(amount).toFixed(), 0, address, address, swapdata,\r\n  ).send({\r\n    from: account,\r\n  }).on('transactionHash', (hash) => {\r\n    notify.hash(hash);\r\n  });\r\n};\r\n\r\nexport const migrateUniV2 = async (account, amount, addressUni) => {\r\n  const zapContract = new web3.eth.Contract(zapPipeAbi, ZAP_PIPE.addr);\r\n\r\n  return zapContract.methods.PipeUniV2(\r\n    account, addressUni, new BigNumber(amount).toFixed(), UNI.addr, 0,\r\n  ).send({\r\n    from: account,\r\n  }).on('transactionHash', (hash) => {\r\n    notify.hash(hash);\r\n  });\r\n};\r\n","import BigNumber from 'bignumber.js';\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const MAX_UINT256 = new BigNumber(2).pow(256).minus(1);\r\nexport const GOVERNANCE_QUORUM = new BigNumber('0.33');\r\nexport const GOVERNANCE_PROPOSAL_THRESHOLD = new BigNumber('0.01');\r\nexport const COUPON_EXPIRATION = 720;\r\nexport const DAO_EXIT_LOCKUP_EPOCHS = 24;\r\nexport const POOL_EXIT_LOCKUP_EPOCHS = 10;\r\n","import BigNumber from 'bignumber.js';\r\n\r\n/**\r\n * Convert 10.999 to 10999000\r\n */\r\nexport function toBaseUnitBN(rawAmt:string| number| BigNumber, decimals: number):BigNumber {\r\n  const raw = new BigNumber(rawAmt);\r\n  const base = new BigNumber(10);\r\n  const decimalsBN = new BigNumber(decimals);\r\n  return raw.times(base.pow(decimalsBN)).integerValue();\r\n}\r\n\r\n/**\r\n * Convert 10999000 to 10.999\r\n */\r\nexport const toTokenUnitsBN = (tokenAmount:string|number|BigNumber, tokenDecimals:number): BigNumber => {\r\n  const amt = new BigNumber(tokenAmount);\r\n  const digits = new BigNumber(10).pow(new BigNumber(tokenDecimals));\r\n  return amt.div(digits);\r\n};\r\n\r\nexport const isPos = (amount: BigNumber): boolean => {\r\n  return !amount.isZero() && amount.isPositive();\r\n};\r\n\r\nexport const ownership = (balance: BigNumber, totalSupply: BigNumber): BigNumber => {\r\n  return balance.multipliedBy(new BigNumber(100)).dividedBy(totalSupply);\r\n}\r\n\r\n/**\r\n * BigNumber string formatting\r\n */\r\n\r\nexport const formatBN = (amount: BigNumber, position: number): string => {\r\n  if (amount.isLessThan(new BigNumber(1))) {\r\n    return pad(amount.precision(position, BigNumber.ROUND_FLOOR).toFixed(), position);\r\n\r\n  }\r\n  return delineate(amount.toFixed(position, BigNumber.ROUND_FLOOR));\r\n}\r\n\r\nfunction delineate(bnStr) {\r\n  const parts = bnStr.split('.');\r\n  return parts[0].toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \".\" + parts[1];\r\n}\r\n\r\nfunction pad(bnStr, position) {\r\n  if (!bnStr.includes(\".\")) {\r\n    bnStr += \".\";\r\n  }\r\n\r\n  const parts = bnStr.split(\".\");\r\n  for (let i = 0; i < position - parts[1].length; i++) {\r\n    bnStr += \"0\";\r\n  }\r\n\r\n  return bnStr\r\n}\r\n\r\nexport function formatMoney(n) {\r\n  n = n.toPrecision(3)\r\n  return Math.abs(Number(n)) >= 1.0e+9\r\n    ? Math.abs(Number(n)) / 1.0e+9 + \"B\"\r\n    : Math.abs(Number(n)) >= 1.0e+6\r\n      ? Math.abs(Number(n)) / 1.0e+6 + \"MM\"\r\n      : Math.abs(Number(n)) >= 1.0e+3\r\n        ? Math.abs(Number(n)) / 1.0e+3 + \"K\"\r\n        : Math.abs(Number(n));\r\n}\r\n\r\nexport function formatNumber(value) {\r\n  return value.replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, '$1,');\r\n}\r\n","import { getPool } from \"./infura\";\r\nimport { EQDS } from \"../constants/tokens\";\r\nimport { DollarPool1, DollarPool2, DollarPool3, DollarPool4 } from \"../constants/contracts\";\r\n\r\nexport async function getPoolAddress(): Promise<string> {\r\n  const pool = await getPool(EQDS.addr);\r\n  if (pool.toLowerCase() === DollarPool2.toLowerCase()) {\r\n    return DollarPool2;\r\n  }\r\n  if (pool.toLowerCase() === DollarPool3.toLowerCase()) {\r\n    return DollarPool3;\r\n  }\r\n  if (pool.toLowerCase() === DollarPool4.toLowerCase()) {\r\n    return DollarPool4;\r\n  }\r\n\r\n  throw new Error(\"Unrecognized Pool Address\");\r\n}\r\n\r\nexport function getLegacyPoolAddress(poolAddress): string {\r\n  if (poolAddress === DollarPool2) {\r\n    return DollarPool1;\r\n  }\r\n  if (poolAddress === DollarPool3) {\r\n    return DollarPool2;\r\n  }\r\n  if (poolAddress === DollarPool4) {\r\n    return DollarPool3;\r\n  }\r\n\r\n  throw new Error(\"Unrecognized Pool Address\");\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport BigNumber from \"bignumber.js\";\r\nimport {\r\n  getBalanceBonded,\r\n  getBalanceOfStaged,\r\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable, getPoolBalanceOfRewarded, getPoolBalanceOfStaged,\r\n  getTokenBalance,\r\n  getTokenTotalSupply\r\n} from \"../../utils/infura\";\r\nimport { EQD, EQDS, UNI } from \"../../constants/tokens\";\r\nimport { formatBN, toTokenUnitsBN } from \"../../utils/number\";\r\nimport { getPoolAddress } from \"../../utils/pool\";\r\n\r\ntype TotalBalanceProps = {\r\n  user: string,\r\n}\r\n\r\nfunction TotalBalance({ user }: TotalBalanceProps) {\r\n  const [totalBalance, setTotalBalance] = useState(new BigNumber(0));\r\n\r\n  //Update User balances\r\n  useEffect(() => {\r\n    if (user === '') {\r\n      setTotalBalance(new BigNumber(0));\r\n      return;\r\n    }\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const poolAddress = await getPoolAddress();\r\n\r\n      const [\r\n        EQDBalance, stagedBalance, bondedBalance,\r\n        pairBalanceEQDStr, pairTotalSupplyUNIStr, userUNIBalanceStr,\r\n        userPoolBondedBalanceStr, userPoolStagedBalanceStr,\r\n        userPoolRewardedBalanceStr, userPoolClaimableBalanceStr,\r\n      ] = await Promise.all([\r\n        getTokenBalance(EQD.addr, user),\r\n        getBalanceOfStaged(EQDS.addr, user),\r\n        getBalanceBonded(EQDS.addr, user),\r\n\r\n        getTokenBalance(EQD.addr, UNI.addr),\r\n        getTokenTotalSupply(UNI.addr),\r\n        getTokenBalance(UNI.addr, user),\r\n        getPoolBalanceOfBonded(poolAddress, user),\r\n        getPoolBalanceOfStaged(poolAddress, user),\r\n        getPoolBalanceOfRewarded(poolAddress, user),\r\n        getPoolBalanceOfClaimable(poolAddress, user),\r\n      ]);\r\n\r\n      const userBalance = toTokenUnitsBN(new BigNumber(EQDBalance), EQD.decimals);\r\n      const userStagedBalance = toTokenUnitsBN(new BigNumber(stagedBalance), EQDS.decimals);\r\n      const userBondedBalance = toTokenUnitsBN(new BigNumber(bondedBalance), EQDS.decimals);\r\n\r\n      const userUNIBalance = toTokenUnitsBN(new BigNumber(userUNIBalanceStr), EQDS.decimals);\r\n      const userPoolBondedBalance = toTokenUnitsBN(new BigNumber(userPoolBondedBalanceStr), EQDS.decimals);\r\n      const userPoolStagedBalance = toTokenUnitsBN(new BigNumber(userPoolStagedBalanceStr), EQDS.decimals);\r\n      const userPoolRewardedBalance = toTokenUnitsBN(new BigNumber(userPoolRewardedBalanceStr), EQDS.decimals);\r\n      const userPoolClaimableBalance = toTokenUnitsBN(new BigNumber(userPoolClaimableBalanceStr), EQDS.decimals);\r\n\r\n      const UNItoEQD = new BigNumber(pairBalanceEQDStr).dividedBy(new BigNumber(pairTotalSupplyUNIStr));\r\n\r\n      const daoTotalBalance = userStagedBalance.plus(userBondedBalance);\r\n      const poolTotalBalance = UNItoEQD.multipliedBy(userPoolStagedBalance.plus(userPoolBondedBalance))\r\n        .plus(userPoolRewardedBalance.plus(userPoolClaimableBalance));\r\n      const circulationBalance = UNItoEQD.multipliedBy(userUNIBalance).plus(userBalance)\r\n\r\n      const totalBalance = daoTotalBalance.plus(poolTotalBalance).plus(circulationBalance)\r\n\r\n      if (!isCancelled) {\r\n        setTotalBalance(totalBalance);\r\n      }\r\n    }\r\n\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <div style={{ fontSize: 14, padding: 3, fontWeight: 400, lineHeight: 1.5, fontFamily: 'DOS, monospace' }}>\r\n      {formatBN(totalBalance, 2)} EQD\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default TotalBalance;\r\n","import React, {useEffect} from 'react';\r\nimport {Modal, Button, Header} from '@aragon/ui';\r\nimport {useWallet} from 'use-wallet';\r\n\r\ntype ConnectModalProps = {\r\n  visible: boolean,\r\n  onClose: Function,\r\n  onConnect: Function\r\n};\r\n\r\nfunction ConnectModal({\r\n                        visible, onClose, onConnect\r\n                      }: ConnectModalProps) {\r\n  const wallet = useWallet();\r\n\r\n  const connectMetamask = () => {\r\n    wallet.connect(\"injected\");\r\n  };\r\n\r\n  const connectWalletConnect = () => {\r\n    wallet.connect(\"walletconnect\");\r\n  };\r\n\r\n  const connectCoinbase = () => {\r\n    wallet.connect(\"walletlink\");\r\n  };\r\n\r\n  return (\r\n    <Modal visible={visible} onClose={onClose}>\r\n      <Header primary=\"Select a wallet provider\"/>\r\n\r\n      <div style={{width: '50%', margin: 'auto', padding: '1%'}}>\r\n        <Button\r\n          wide\r\n          label={'Metamask'}\r\n          icon={<img src={`./wallets/metamask-fox.svg`} style={{height: 24}} alt=\"Metamask\"/>}\r\n          onClick={connectMetamask}\r\n        />\r\n      </div>\r\n      <div style={{width: '50%', margin: 'auto', padding: '1%'}}>\r\n        <Button\r\n          wide\r\n          label={'WalletConnect'}\r\n          icon={<img src={`./wallets/wallet-connect.svg`} style={{height: 24}} alt=\"WalletConnect\"/>}\r\n          onClick={connectWalletConnect}\r\n        />\r\n      </div>\r\n      <div style={{width: '50%', margin: 'auto', padding: '1%'}}>\r\n        <Button\r\n          wide\r\n          label={'Coinbase Wallet'}\r\n          icon={<img src={`./wallets/coinbase-wallet.png`} style={{height: 24}} alt=\"Coinbase Wallet\"/>}\r\n          onClick={connectCoinbase}\r\n        />\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ConnectModal;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useWallet } from 'use-wallet';\r\n\r\nimport {\r\n  Button, IdentityBadge, Box, IconPower, LinkBase,\r\n} from '@aragon/ui';\r\n\r\nimport { connect } from '../../utils/web3';\r\nimport TotalBalance from \"./TotalBalance\";\r\nimport ConnectModal from './ConnectModal';\r\n\r\nimport './style.css';\r\n\r\ntype connectButtonProps = {\r\n  hasWeb3: boolean,\r\n  user: string,\r\n  setUser: Function\r\n}\r\n\r\nfunction ConnectButton({ hasWeb3, user, setUser }: connectButtonProps) {\r\n  const { account, status, reset, ethereum } = useWallet();\r\n\r\n  const [isModalOpen, setModalOpen] = useState(false);\r\n\r\n  const connectWeb3 = async (wallet) => {\r\n    await connect(wallet.ethereum);\r\n    setUser(wallet.account);\r\n    setModalOpen(false)\r\n  };\r\n\r\n  const disconnectWeb3 = async () => {\r\n    setUser('');\r\n    reset();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (account) {\r\n      connectWeb3({\r\n        ethereum,\r\n        account\r\n      });\r\n    }\r\n  }, [account]);\r\n\r\n  const toggleModal = () => setModalOpen(!isModalOpen);\r\n\r\n  return status === 'connected' ? (\r\n    <div style={{ textAlign: 'center', paddingTop: '1%' }}>\r\n      <div style={{ flex: '1' }} />\r\n      <div>\r\n        <Box padding={4} style={{ width: '100%', textAlign: 'center' }}>\r\n          <div>\r\n            <div>\r\n              <LinkBase onClick={disconnectWeb3} style={{ marginRight: '8px', height: '24px' }}>\r\n                <IconPower />\r\n              </LinkBase>\r\n              <IdentityBadge entity={user} /> <TotalBalance user={user} />\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </Box>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n      <>\r\n        <ConnectModal visible={isModalOpen} onClose={toggleModal} onConnect={connectWeb3} />\r\n        <Button icon={<div className=\"icon-container\">\r\n          <span className=\"icon-connect-container\" />\r\n          <span className=\"icon-connect\" />\r\n        </div>} label=\"Connect Wallet\" onClick={toggleModal} disabled={!hasWeb3} />\r\n      </>\r\n    );\r\n}\r\n\r\n\r\nexport default ConnectButton;\r\n","import React from 'react';\r\nimport { LinkBase } from '@aragon/ui';\r\n\r\nimport './style.css'\r\n\r\ntype MenuProps = {\r\n  history: any,\r\n  page: string\r\n}\r\n\r\n// const CustomToggle = React.forwardRef(({ children, onClick }: any, ref: any)=> (\r\n//   <span\r\n//     ref={ref}\r\n//     onClick={(e) => {\r\n//       e.preventDefault();\r\n//       onClick(e);\r\n//     }}\r\n//   >\r\n//     {children}\r\n//   </span>\r\n// ));\r\n\r\nconst Menu = ({ history, page }: MenuProps) => {\r\n  return (\r\n    <>\r\n      <LinkButton title=\"Dashboard\" onClick={() => history.push('/')} isSelected={page === '/'} />\r\n      <LinkButton title=\"DAO\" onClick={() => history.push('/dao/')} isSelected={page.includes('/dao')} />\r\n      <LinkButton title=\"Liquidity\" onClick={() => history.push('/pool/')} isSelected={page.includes('/pool')} />\r\n      <LinkButton title=\"Coupons\" onClick={() => history.push('/coupons/')} isSelected={page.includes('/coupons')} />\r\n      <LinkButton title=\"Tools\" onClick={() => history.push('/tools/')} isSelected={page.includes('/tools')} />\r\n      <LinkButton title=\"About\" onClick={() => history.push('/about/')} isSelected={page.includes('/about')} />\r\n      {/* <LinkButton title=\"FAQs\" onClick={() => window.open('https://docs.truedollar.finance/', \"_blank\")}/> */}\r\n      {/*<LinkButton title=\"Regulation\" onClick={() => history.push('/regulation/')} isSelected={page.includes('/regulation')}/>*/}\r\n      {/*<LinkButton title=\"Governance\" onClick={() => history.push('/governance/')} isSelected={page.includes('/governance')}/>*/}\r\n      {/*<LinkButton title=\"Trade\" onClick={() => history.push('/trade/')} isSelected={page.includes('/trade')}/>*/}\r\n\r\n      {/*<LinkButton title=\"Epoch\" onClick={() => history.push('/epoch/')} isSelected={page.includes('/epoch')}/>*/}\r\n      {/*<Dropdown*/}\r\n      {/*  style={{*/}\r\n      {/*    cursor: 'pointer',*/}\r\n      {/*    display: 'inline-block'*/}\r\n      {/*  }}*/}\r\n      {/*>*/}\r\n      {/*  <Dropdown.Toggle*/}\r\n      {/*    id=\"dropdown-basic\"*/}\r\n      {/*    as={CustomToggle}*/}\r\n      {/*  >*/}\r\n      {/*    <div style={{marginLeft: '8px', marginRight: '8px', height: '40px'}}>*/}\r\n      {/*      <div  style={{padding: '1%', opacity: page.includes('/about') || page.includes('/tool') ? 1 : 0.5, fontSize: 17}}><span className=\"btn-more\">More</span></div>*/}\r\n      {/*    </div>*/}\r\n      {/*  </Dropdown.Toggle>*/}\r\n\r\n      {/*  <Dropdown.Menu>*/}\r\n      {/*    <Dropdown.Item className=\"btn-default\" onClick={() => history.push('/about/')}>About</Dropdown.Item>*/}\r\n      {/*    <Dropdown.Item className=\"btn-default\" onClick={() => history.push('/tool/')}>Tools</Dropdown.Item>*/}\r\n      {/*    <Dropdown.Item className=\"btn-default\" href=\"http://docs.truedollar.finance/\" target=\"_blank\">FAQs</Dropdown.Item>*/}\r\n      {/*    <Dropdown.Item className=\"btn-default\" href=\"https://trueseigniorage.medium.com/\" target=\"_blank\">News</Dropdown.Item>*/}\r\n      {/*  </Dropdown.Menu>*/}\r\n      {/*</Dropdown>*/}\r\n    </>\r\n  );\r\n};\r\n\r\ntype linkButtonProps = {\r\n  title: string,\r\n  onClick: Function,\r\n  isSelected?: boolean\r\n}\r\n\r\nfunction LinkButton({ title, onClick, isSelected = false }: linkButtonProps) {\r\n  return (\r\n    <LinkBase onClick={onClick} style={{ marginLeft: '8px', marginRight: '8px', height: '40px' }}>\r\n      <div style={{ padding: '1%', opacity: isSelected ? 1 : 0.5, fontSize: 20 }}>{title}</div>\r\n    </LinkBase>\r\n  );\r\n}\r\n\r\nexport default Menu;","import React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { LinkBase, useTheme } from '@aragon/ui';\r\nimport ConnectButton from './ConnectButton';\r\n\r\nimport Menu from \"./Menu\";\r\nimport './style.css'\r\n\r\ntype NavbarProps = {\r\n  hasWeb3: boolean,\r\n  user: string,\r\n  setUser: Function\r\n}\r\n\r\nfunction NavBar({\r\n  hasWeb3, user, setUser,\r\n}: NavbarProps) {\r\n  const history = useHistory();\r\n  const currentTheme = useTheme();\r\n\r\n  const [page, setPage] = useState(history.location.pathname);\r\n\r\n  useEffect(() => {\r\n    return history.listen((location) => {\r\n      setPage(location.pathname)\r\n    })\r\n  }, [hasWeb3, user, history]);\r\n\r\n  const logoUrl = `./logo/logo-${currentTheme._name === 'light' ? 'black' : 'white'}.png`\r\n\r\n  return (\r\n    <>\r\n      <div style={{\r\n        borderTop: '1px solid ' + currentTheme.border,\r\n        backgroundColor: '#fea500',\r\n        color: '#000000',\r\n        textAlign: 'center',\r\n        width: '100%',\r\n        fontSize: '16px',\r\n        paddingBottom: '2%'\r\n      }}>\r\n        <div style={{ maxWidth: '1100px', marginLeft: 'auto', marginRight: 'auto' }}>\r\n          <div className=\"container\">\r\n            <div>\r\n              <LinkBase onClick={() => history.push('/')} style={{ marginRight: '16px', height: '40px' }}>\r\n                <img src={logoUrl} height=\"40px\" alt=\"Equilibrium Dollar Protocol\" />\r\n              </LinkBase>\r\n            </div>\r\n            <div className=\"menu\">\r\n              <Menu history={history} page={page} />\r\n            </div>\r\n            <div>\r\n              <ConnectButton hasWeb3={hasWeb3} user={user} setUser={setUser} />\r\n            </div>\r\n          </div>\r\n          <div className=\"menu-mobile\">\r\n            <Menu history={history} page={page} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NavBar;\r\n","import React from 'react';\r\nimport { IdentityBadge } from '@aragon/ui';\r\n\r\ntype AddressBlockProps = {\r\n  label: string,\r\n  address: string\r\n}\r\n\r\nfunction AddressBlock({ label, address }: AddressBlockProps) {\r\n  return (\r\n    <>\r\n      <div style={{ fontSize: 16 }}>{label}</div>\r\n      <div style={{ padding: 3 }}>\r\n        <IdentityBadge entity={address} shorten />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddressBlock;\r\n","import React from 'react';\r\n\r\nimport BigNumber from 'bignumber.js';\r\nimport { formatBN } from \"../../utils/number\";\r\n\r\ntype BlanceBlockProps = {\r\n  asset: string,\r\n  balance: BigNumber | string | number\r\n  suffix?: string\r\n}\r\n\r\nfunction BalanceBlock({ asset, balance, suffix = \"\" }: BlanceBlockProps) {\r\n  let integer = '0';\r\n  let digits = '0';\r\n  const balanceBN = new BigNumber(balance);\r\n  if (balanceBN.gte(new BigNumber(0))) {\r\n    const tokens = formatBN(balanceBN, 2).split('.')\r\n    integer = tokens[0];\r\n    digits = tokens[1];\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div style={{ fontSize: 14, padding: 3 }}>{asset}</div>\r\n      <div style={{ padding: 3 }}>\r\n        <span style={{ fontSize: 24 }}>{integer}</span>\r\n        .\r\n        <span style={{ fontSize: 18 }}>\r\n          {' '}\r\n          {digits}\r\n          {' '}\r\n        </span>\r\n        {suffix === \"\" ? '' : <span style={{ fontSize: 18 }}>{suffix}</span>}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default BalanceBlock;\r\n","import React from 'react';\r\n\r\nimport {\r\n  ButtonBase,\r\n} from '@aragon/ui';\r\n\r\ntype MaxButtonProps = {\r\n  title: string\r\n  onClick: Function\r\n};\r\n\r\nfunction MaxButton({ onClick, title }:MaxButtonProps) {\r\n  return (\r\n    <div style={{ padding: 3 }}>\r\n      <ButtonBase onClick={onClick}>\r\n        <span style={{ opacity: 0.5 }}> {title || 'Max'}  </span>\r\n      </ButtonBase>\r\n    </div>\r\n  );\r\n}\r\n\r\nMaxButton.defaultProps = {\r\n  title: ''\r\n}\r\n\r\nexport default MaxButton;\r\n","import React from 'react';\r\nimport BigNumber from 'bignumber.js';\r\n\r\nfunction PriceSection({\r\n  label, amt, symbol = '', forceDisplay = false,\r\n}:{label:string, amt: string|number|BigNumber, symbol?:string, forceDisplay?:boolean }) {\r\n  const amtBN = new BigNumber(amt);\r\n  if (amtBN.gt(new BigNumber(0)) || forceDisplay) {\r\n    return (\r\n      <div style={{ padding: 3, opacity: 0.5 }}>\r\n        <span style={{ fontSize: 13 }}>{label}</span>\r\n        <span style={{ fontSize: 13 }}>{amtBN.toNumber().toFixed(5)}</span>\r\n        <span style={{ fontSize: 13 }}>{symbol}</span>\r\n      </div>\r\n    );\r\n  }\r\n  return <div style={{ padding: 3, opacity: 0.5 }} />;\r\n}\r\n\r\n\r\nexport default PriceSection;\r\n","import styled from 'styled-components';\r\n\r\nconst FlexWrapper = styled.div`\r\n  // display: flex;\r\n  padding-left: 20%;\r\n  padding-right: 20%;\r\n`;\r\n\r\nexport default FlexWrapper;\r\n","import React from 'react';\r\nimport { Checkbox, useTheme } from '@aragon/ui';\r\nimport styled from 'styled-components';\r\n\r\ntype checkBoxProps = {\r\n  text: string,\r\n  checked: boolean,\r\n  onCheck: Function\r\n}\r\n\r\nfunction MyCheckBox({ text, checked, onCheck }: checkBoxProps) {\r\n  const theme = useTheme();\r\n  return (\r\n    <CheckBoxWrapper theme={theme}>\r\n      <Checkbox\r\n        checked={checked}\r\n        onChange={onCheck}\r\n      />\r\n      <span style={{ margin: '4px' }}>\r\n        {text}\r\n      </span>\r\n      <br />\r\n    </CheckBoxWrapper>\r\n  );\r\n}\r\n\r\nexport default MyCheckBox;\r\n\r\nconst CheckBoxWrapper = styled.div`{\r\n  display: flex;\r\n  font-size: 14px;\r\n  color: #000000\r\n}`;","import React from 'react';\r\nimport BigNumber from 'bignumber.js';\r\nimport styled from 'styled-components'\r\nimport { Button } from '@aragon/ui';\r\n\r\nimport { BalanceBlock, AddressBlock } from '../common/index';\r\nimport { PANCAKE_INFO, PANCAKE_SUPPLY, PANCAKE_TRADE, DEXTOOL } from \"../../constants/contracts\";\r\n\r\ntype TradeProps = {\r\n  pairBalanceEQD: BigNumber,\r\n  pairBalanceUSDC: BigNumber,\r\n  uniswapPair: string,\r\n};\r\n\r\nconst Trade = ({ pairBalanceEQD, pairBalanceUSDC, uniswapPair }: TradeProps) => {\r\n  const price = pairBalanceUSDC.dividedBy(pairBalanceEQD);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ fontSize: 18, alignItems: 'center', color: '#ffffff', textAlign: 'center', marginBottom: '2%' }}>\r\n        <div style={{ fontSize: 48 }}>\r\n          <div className=\"modal\" style={{ display: 'block', position: 'relative' }}>\r\n            <img width='60px' src=\"./image/trade.png\" />\r\n          </div>\r\n\r\n        </div>\r\n        <div className=\"center\">\r\n          <br />Trade on PancakeSwap\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        {/* <Container> */}\r\n        <div className='row'>\r\n          <div className='col-md-4'>\r\n            <div className='bg-component'>\r\n              <div className=\"card border-primary mb-3\">\r\n                <div className=\"card-header\" style={{ background: 'rgb(254 165 0)', color: '#000000', padding: '3%' }}>EQD Price</div>\r\n                <div className=\"card-body\">\r\n                  <p className=\"card-text text-center\" style={{ padding: 3 }}>\r\n                    <BalanceBlock asset=\"\" balance={price} suffix={\"BUSD\"} />\r\n                    <Button\r\n                      label=\"Buy EQD\"\r\n                      icon={<i className=\"fas fa-exchange-alt\" />}\r\n                      onClick={() => window.open(PANCAKE_TRADE, \"_blank\")}\r\n                    />\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className='col-md-4'>\r\n            <div className='bg-component'>\r\n              <div className=\"card border-primary mb-3\">\r\n                <div className=\"card-header\" style={{ background: 'rgb(254 165 0)', color: '#000000', padding: '3%' }}>EQD Liquidity</div>\r\n                <div className=\"card-body\">\r\n                  <p className=\"card-text text-center\" style={{ padding: 3 }}>\r\n                    <BalanceBlock asset=\"\" balance={pairBalanceEQD} suffix={\"EQD\"} />\r\n                    <Button\r\n                      label=\"Info\"\r\n                      icon={<i className=\"fas fa-chart-area\" />}\r\n                      onClick={() => window.open(PANCAKE_INFO, \"_blank\")}\r\n                    />\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className='col-md-4'>\r\n            <div className='bg-component'>\r\n              <div className=\"card border-primary mb-3\">\r\n                <div className=\"card-header\" style={{ background: 'rgb(254 165 0)', color: '#000000', padding: '3%' }}>BUSD Liquidity</div>\r\n                <div className=\"card-body\">\r\n                  <p className=\"card-text text-center\" style={{ padding: 3 }}>\r\n                    <BalanceBlock asset=\"\" balance={pairBalanceUSDC} suffix={\"BUSD\"} />\r\n                    <Button\r\n                      label=\"Add\"\r\n                      icon={<i className=\"fas fa-water\" />}\r\n                      onClick={() => window.open(PANCAKE_SUPPLY, \"_blank\")}\r\n                    />\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* <div className='col-md-3'>\r\n            <div className='bg-component'>\r\n              <div className=\"card border-primary mb-3\">\r\n                <div className=\"card-header\" style={{ background: 'rgb(254 165 0)', color: '#000000', padding: '3%' }}>Pancake Contract</div>\r\n                <div className=\"card-body\">\r\n                  <p className=\"card-text text-center\" >\r\n                    <AddressBlock label=\"\" address={uniswapPair} />\r\n                    <Button\r\n                      label=\"Chart\"\r\n                      icon={<i className=\"fas fa-chart-bar\" />}\r\n                      onClick={() => window.open(DEXTOOL, \"_blank\")}\r\n\r\n                    />\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div> */}\r\n\r\n        </div>\r\n\r\n        {/* </Container> */}\r\n      </div>\r\n\r\n\r\n    </>\r\n  );\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  padding: 0 0 3% 3%;\r\n  justify-content: space-between;\r\n  @media (max-width: 522px) {\r\n    display: block;\r\n  }\r\n`\r\n\r\nexport default Trade;\r\n","import React from \"react\";\r\nimport {\r\n  Box, LinkBase, Tag,\r\n} from '@aragon/ui';\r\n\r\ntype MainButtonPropx = {\r\n  title: string,\r\n  description: string,\r\n  icon: any,\r\n  onClick?: Function,\r\n  tag?: string\r\n  href?: string\r\n}\r\n\r\nfunction MainButton({\r\n  title, description, icon, onClick, tag, href\r\n}: MainButtonPropx) {\r\n  return (\r\n    <LinkBase onClick={onClick} style={{ width: '100%' }} href={href}>\r\n      <div style={{ padding: 15 }}>\r\n        <div style={{ padding: 10, fontSize: 18 }}>\r\n          {title}\r\n          {tag ? <Tag>{tag}</Tag> : <></>}\r\n        </div>\r\n        <span style={{ fontSize: 48 }}>\r\n          {icon}\r\n        </span>\r\n        {/*<img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />*/}\r\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\r\n          {' '}\r\n          {description}\r\n          {' '}\r\n        </div>\r\n      </div>\r\n\r\n    </LinkBase>\r\n  );\r\n};\r\n\r\nexport default MainButton;","import React from 'react';\r\nimport BigNumber from \"bignumber.js\";\r\nimport styled from 'styled-components'\r\n\r\nimport { formatNumber } from \"../../utils/number\";\r\n\r\ntype TotalSupplyProps = {\r\n  totalSupply: BigNumber,\r\n};\r\n\r\nconst TotalSupply = ({ totalSupply }: TotalSupplyProps) => {\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ fontSize: 16, padding: 3 }}>Total Supply <Icon src=\"./images/bscscan.jpg\"\r\n        onClick={() => window.open('https://bscscan.com/token/0x5Aae642C7ceA19A027590ea42f2366f64377c06F', '_blank')}\r\n      /></div>\r\n      <div style={{\r\n        fontSize: 24,\r\n        padding: 3,\r\n        fontWeight: 400,\r\n        lineHeight: 1.5,\r\n        fontFamily: 'DOS, monospace'\r\n      }}>{formatNumber((totalSupply.toNumber()).toFixed(2))}\r\n      </div>\r\n      <div style={{ fontSize: 16, padding: 3 }}>Status: <strong>EXPANSION (+{((totalSupply.toNumber() * 4) / 100).toFixed()} next epoch)</strong></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Icon = styled.img`\r\n  border: 1px solid #ffffff;\r\n  border-radius: 10px;\r\n  background-color: #ffffff;\r\n  width: 20px;\r\n  cursor: pointer;\r\n`\r\n\r\nexport default TotalSupply;","import React from 'react';\r\nimport BigNumber from \"bignumber.js\";\r\nimport styled from 'styled-components'\r\n\r\nimport { formatNumber } from '../../utils/number'\r\n\r\ntype MarketCapProps = {\r\n  totalSupply: BigNumber,\r\n  pairBalanceUSDC: BigNumber,\r\n  pairBalanceEQD: BigNumber\r\n};\r\n\r\nconst MarketCap = ({ totalSupply, pairBalanceUSDC, pairBalanceEQD }: MarketCapProps) => {\r\n  const price = pairBalanceUSDC.dividedBy(pairBalanceEQD);\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ fontSize: 16, padding: 3 }}>Market Cap\r\n        <Icon src=\"./images/coingecko.ico\"\r\n          onClick={() => window.open('#', '_blank')}\r\n        />\r\n        <Icon src=\"./images/coinmarketcap.png\"\r\n          onClick={() => window.open('#', '_blank')}\r\n        />\r\n      </div>\r\n      <div style={{\r\n        fontSize: 24,\r\n        padding: 3,\r\n        fontWeight: 400,\r\n        lineHeight: 1.5,\r\n        fontFamily: 'DOS, monospace'\r\n      }}>{formatNumber((totalSupply.multipliedBy(price)).toFixed(2))}$\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Icon = styled.img`\r\n  margin: 0 5px;\r\n  border: 1px solid #ffffff;\r\n  border-radius: 10px;\r\n  background-color: #ffffff;\r\n  width: 20px;\r\n  cursor: pointer;\r\n`\r\n\r\nexport default MarketCap;","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\ntype EpochBlockProps = {\r\n  epoch: string\r\n}\r\n\r\nfunction EpochBlock({ epoch }: EpochBlockProps) {\r\n  const history = useHistory();\r\n  return (\r\n    <>\r\n      <div>\r\n        <div style={{ fontSize: 16, padding: 3 }}>Epoch</div>\r\n        <div style={{\r\n          fontSize: 24,\r\n          padding: 3,\r\n          fontWeight: 400,\r\n          lineHeight: 1.5,\r\n          fontFamily: 'DOS, monospace'\r\n        }}>{epoch}\r\n        </div>\r\n        <div\r\n          style={{ fontSize: 16, padding: 3, cursor: 'pointer' }}\r\n          onClick={() => history.push('/epoch/')}\r\n        >Advance -&gt;</div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EpochBlock;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Box } from '@aragon/ui';\r\nimport styled from 'styled-components'\r\nimport BigNumber from \"bignumber.js\";\r\nimport {\r\n  getPoolTotalClaimable,\r\n  getPoolTotalRewarded,\r\n  getTokenBalance,\r\n  getTokenTotalSupply,\r\n  getTotalBonded,\r\n  getTotalRedeemable,\r\n  getTotalStaged\r\n} from \"../../utils/infura\";\r\nimport { EQD, EQDS, UNI, USDC } from \"../../constants/tokens\";\r\nimport { toTokenUnitsBN } from \"../../utils/number\";\r\nimport Trade from \"./Trade\";\r\nimport MainButton from \"./MainButton\";\r\nimport { getLegacyPoolAddress, getPoolAddress } from \"../../utils/pool\";\r\nimport Regulation from \"./Regulation\";\r\nimport TotalSupply from \"./TotalSupply\";\r\nimport MarketCap from \"./MarketCap\";\r\nimport Invest from \"./Invest\";\r\nimport EpochBlock from \"../common/EpochBlock\";\r\n\r\nfunction epochformatted() {\r\n  const epochStart = 1610895600;\r\n  const epochPeriod = 60 * 60;\r\n  const hour = 60 * 60;\r\n  const minute = 60;\r\n  const unixTimeSec = Math.floor(Date.now() / 1000);\r\n\r\n  let epochRemainder = unixTimeSec - epochStart\r\n  const epoch = Math.floor(epochRemainder / epochPeriod);\r\n  epochRemainder -= epoch * epochPeriod;\r\n  const epochHour = Math.floor(epochRemainder / hour);\r\n  epochRemainder -= epochHour * hour;\r\n  const epochMinute = Math.floor(epochRemainder / minute);\r\n  epochRemainder -= epochMinute * minute;\r\n  return `${epoch}-0${epochHour}:${epochMinute > 9 ? epochMinute : \"0\" + epochMinute.toString()}:${epochRemainder > 9 ? epochRemainder : \"0\" + epochRemainder.toString()}`;\r\n}\r\n\r\ntype HomePageProps = {\r\n  user: string\r\n};\r\n\r\nfunction HomePage({ user }: HomePageProps) {\r\n  const history = useHistory();\r\n  const [pairBalanceEQD, setPairBalanceEQD] = useState(new BigNumber(0));\r\n  const [pairBalanceUSDC, setPairBalanceUSDC] = useState(new BigNumber(0));\r\n  const [totalSupply, setTotalSupply] = useState(new BigNumber(0));\r\n  const [totalBonded, setTotalBonded] = useState(new BigNumber(0));\r\n  const [totalStaged, setTotalStaged] = useState(new BigNumber(0));\r\n  const [totalRedeemable, setTotalRedeemable] = useState(new BigNumber(0));\r\n  const [poolLiquidity, setPoolLiquidity] = useState(new BigNumber(0));\r\n  const [poolTotalRewarded, setPoolTotalRewarded] = useState(new BigNumber(0));\r\n  const [poolTotalClaimable, setPoolTotalClaimable] = useState(new BigNumber(0));\r\n  const [epochTime, setEpochTime] = useState(\"0-00:00:00\");\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const poolAddress = await getPoolAddress();\r\n      const legacyPoolAddress = getLegacyPoolAddress(poolAddress);\r\n\r\n      const [\r\n        pairBalanceEQDStr,\r\n        pairBalanceUSDCStr,\r\n        totalSupplyStr,\r\n        totalBondedStr,\r\n        totalStagedStr,\r\n        totalRedeemableStr,\r\n        poolLiquidityStr,\r\n        poolTotalRewardedStr,\r\n        poolTotalClaimableStr,\r\n      ] = await Promise.all([\r\n        getTokenBalance(EQD.addr, UNI.addr),\r\n        getTokenBalance(USDC.addr, UNI.addr),\r\n\r\n        getTokenTotalSupply(EQD.addr),\r\n        getTotalBonded(EQDS.addr),\r\n        getTotalStaged(EQDS.addr),\r\n        getTotalRedeemable(EQDS.addr),\r\n\r\n        getTokenBalance(EQD.addr, UNI.addr),\r\n        getPoolTotalRewarded(poolAddress),\r\n        getPoolTotalClaimable(poolAddress),\r\n\r\n        getPoolTotalRewarded(legacyPoolAddress),\r\n        getPoolTotalClaimable(legacyPoolAddress),\r\n\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setPairBalanceEQD(toTokenUnitsBN(pairBalanceEQDStr, EQD.decimals));\r\n        setPairBalanceUSDC(toTokenUnitsBN(pairBalanceUSDCStr, USDC.decimals));\r\n\r\n        setTotalSupply(toTokenUnitsBN(totalSupplyStr, EQD.decimals));\r\n        setTotalBonded(toTokenUnitsBN(totalBondedStr, EQD.decimals));\r\n        setTotalStaged(toTokenUnitsBN(totalStagedStr, EQD.decimals));\r\n        setTotalRedeemable(toTokenUnitsBN(totalRedeemableStr, EQD.decimals));\r\n\r\n        setPoolLiquidity(toTokenUnitsBN(poolLiquidityStr, EQD.decimals));\r\n        setPoolTotalRewarded(toTokenUnitsBN(poolTotalRewardedStr, EQD.decimals));\r\n        setPoolTotalClaimable(toTokenUnitsBN(poolTotalClaimableStr, EQD.decimals));\r\n\r\n      }\r\n    }\r\n\r\n    async function updateTime() {\r\n      if (!isCancelled) {\r\n        setEpochTime(epochformatted())\r\n      }\r\n    }\r\n\r\n    updateUserInfo();\r\n    const time = setInterval(updateTime, 1000);\r\n    const user = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(time);\r\n      clearInterval(user);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n\r\n      <Container>\r\n        <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n          <ul className=\"list-group\" style={{ background: '#000084', height: '110px', padding: '3%' }}>\r\n            <li className=\"d-flex justify-content-between align-items-center\">\r\n              <EpochBlock epoch={epochTime} />\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n          <ul className=\"list-group\" style={{ background: '#000084', height: '110px', padding: '3%' }}>\r\n            <li className=\"d-flex justify-content-between align-items-center\">\r\n              <TotalSupply totalSupply={totalSupply} />\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n          <ul className=\"list-group\" style={{ background: '#000084', height: '110px', padding: '3%' }}>\r\n            <li className=\"d-flex justify-content-between align-items-center\">\r\n              <MarketCap\r\n                totalSupply={totalSupply}\r\n                pairBalanceUSDC={pairBalanceUSDC}\r\n                pairBalanceEQD={pairBalanceEQD}\r\n              />\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n      </Container>\r\n\r\n      <Trade\r\n        pairBalanceEQD={pairBalanceEQD}\r\n        pairBalanceUSDC={pairBalanceUSDC}\r\n        uniswapPair={UNI.addr}\r\n      />\r\n      {/* <Invest\r\n        totalSupply={totalSupply}\r\n        totalBonded={totalBonded}\r\n        EQDLPBonded={pairBalanceEQD}\r\n      />\r\n      <Regulation\r\n        totalSupply={totalSupply}\r\n\r\n        totalBonded={totalBonded}\r\n        totalStaged={totalStaged}\r\n        totalRedeemable={totalRedeemable}\r\n\r\n        poolLiquidity={poolLiquidity}\r\n        poolRewarded={poolTotalRewarded}\r\n        poolClaimable={poolTotalClaimable}\r\n      /> */}\r\n\r\n      <div className=\"bs-docs-section\">\r\n\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-4\">\r\n            <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n              <ul className=\"list-group\" style={{ background: '#000084' }}>\r\n                <li className=\"d-flex justify-content-between align-items-center\">\r\n                  <MainButton\r\n                    title=\"DAO\"\r\n                    description=\"Earn rewards for governing\"\r\n                    icon={<i className=\"fas fa-dot-circle\" />}\r\n                    onClick={() => {\r\n                      history.push('/dao/');\r\n                    }}\r\n                  />\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-lg-4\">\r\n            <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n              <ul className=\"list-group\" style={{ background: '#000084' }}>\r\n                <li className=\"d-flex justify-content-between align-items-center\">\r\n                  <MainButton\r\n                    title=\"LP Rewards\"\r\n                    description=\"Earn rewards for providing liquidity.\"\r\n                    icon={<i className=\"fas fa-parachute-box\" />}\r\n                    onClick={() => {\r\n                      history.push('/pool/');\r\n                    }}\r\n                  />\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-lg-4\">\r\n            <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n              <ul className=\"list-group\" style={{ background: '#000084' }}>\r\n                <li className=\"d-flex justify-content-between align-items-center\">\r\n                  <MainButton\r\n                    title=\"Regulation\"\r\n                    description=\"Network supply regulation statistics.\"\r\n                    icon={<i className=\"fas fa-chart-area\" />}\r\n                    onClick={() => {\r\n                      history.push('/regulation/');\r\n                    }}\r\n                  />\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-lg-4\">\r\n            <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n              <ul className=\"list-group\" style={{ background: '#000084' }}>\r\n                <li className=\"d-flex justify-content-between align-items-center\">\r\n                  <MainButton\r\n                    title=\"Governance\"\r\n                    description=\"Vote on upgrades.\"\r\n                    icon={<i className=\"fas fa-poll\" />}\r\n                    onClick={() => {\r\n                      history.push('/governance/');\r\n                    }}\r\n                  />\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-lg-4\">\r\n            <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n              <ul className=\"list-group\" style={{ background: '#000084' }}>\r\n                <li className=\"d-flex justify-content-between align-items-center\">\r\n                  <MainButton\r\n                    title=\"Trade\"\r\n                    description=\"Trade EQD tokens.\"\r\n                    icon={<i className=\"fas fa-exchange-alt\" />}\r\n                    onClick={() => {\r\n                      history.push('/trade/');\r\n                    }}\r\n                  />\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-lg-4\">\r\n            <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n              <ul className=\"list-group\" style={{ background: '#000084' }}>\r\n                <li className=\"d-flex justify-content-between align-items-center\">\r\n                  <MainButton\r\n                    title=\"Coupons\"\r\n                    description=\"Purchase and redeem coupons.\"\r\n                    icon={<i className=\"fas fa-ticket-alt\" />}\r\n                    onClick={() => {\r\n                      history.push('/coupons/');\r\n                    }}\r\n                  />\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n\r\n    </>\r\n  );\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  padding: 10% 1% 3% 1%;\r\n  @media (max-width: 768px) {\r\n    flex-wrap: wrap;\r\n  }\r\n  @media (max-width: 522px) {\r\n    display: block;\r\n  }\r\n`\r\n\r\nexport default HomePage;\r\n","import React from 'react';\r\nimport BigNumber from 'bignumber.js';\r\n\r\nimport { BalanceBlock, AddressBlock } from '../common/index';\r\n\r\ntype TradePageHeaderProps = {\r\n  pairBalanceEQD: BigNumber,\r\n  pairBalanceUSDC: BigNumber,\r\n  uniswapPair: string,\r\n};\r\n\r\nconst TradePageHeader = ({\r\n  pairBalanceEQD, pairBalanceUSDC, uniswapPair,\r\n}: TradePageHeaderProps) => {\r\n  const price = pairBalanceUSDC.dividedBy(pairBalanceEQD);\r\n\r\n  return (\r\n    <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\r\n      <div style={{ flexBasis: '25%' }}>\r\n        <BalanceBlock asset=\"EQD Price\" balance={price} suffix={\"BUSD\"} />\r\n      </div>\r\n      <div style={{ flexBasis: '25%' }}>\r\n        <BalanceBlock asset=\"EQD Liquidity\" balance={pairBalanceEQD} suffix={\"EQD\"} />\r\n      </div>\r\n      <div style={{ flexBasis: '25%' }}>\r\n        <BalanceBlock asset=\"BUSD Liquidity\" balance={pairBalanceUSDC} suffix={\"BUSD\"} />\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default TradePageHeader;\r\n","import React from 'react';\r\n\r\nimport {\r\n  Header,\r\n} from '@aragon/ui';\r\n\r\ntype IconHeaderProps = {\r\n  icon: any,\r\n  text: string\r\n}\r\n\r\nfunction IconHeader({ icon, text }: IconHeaderProps) {\r\n  return (\r\n    <>\r\n      <div style={{ padding: '1%', alignItems: 'center' }}>\r\n        <div style={{ fontSize: 48 }}>\r\n          {icon}\r\n        </div>\r\n        <div>\r\n          <label style={{ fontSize: 25, color: '#ffffff' }}><br />{text}</label>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default IconHeader;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { LinkBase, Box } from '@aragon/ui';\r\n\r\nimport BigNumber from 'bignumber.js';\r\nimport { getTokenBalance } from '../../utils/infura';\r\nimport { toTokenUnitsBN } from '../../utils/number';\r\n\r\nimport TradePageHeader from './Header';\r\nimport { EQD, UNI, USDC } from \"../../constants/tokens\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport { PANCAKE_INFO, PANCAKE_SUPPLY, PANCAKE_TRADE } from \"../../constants/contracts\";\r\n\r\n\r\nfunction UniswapPool({ user }: { user: string }) {\r\n  const [pairBalanceEQD, setPairBalanceEQD] = useState(new BigNumber(0));\r\n  const [pairBalanceUSDC, setPairBalanceUSDC] = useState(new BigNumber(0));\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [\r\n        pairBalanceEQDStr, pairBalanceUSDCStr,\r\n      ] = await Promise.all([\r\n        getTokenBalance(EQD.addr, UNI.addr),\r\n        getTokenBalance(USDC.addr, UNI.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setPairBalanceEQD(toTokenUnitsBN(pairBalanceEQDStr, EQD.decimals));\r\n        setPairBalanceUSDC(toTokenUnitsBN(pairBalanceUSDCStr, USDC.decimals));\r\n      }\r\n    }\r\n\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ textAlign: 'center' }}>\r\n        <IconHeader icon={<div className=\"modal\" style={{ display: 'block', position: 'relative' }}><i className=\"fas fa-exchange-alt\" /></div>} text=\"Trade\" />\r\n      </div>\r\n\r\n      <TradePageHeader\r\n        pairBalanceEQD={pairBalanceEQD}\r\n        pairBalanceUSDC={pairBalanceUSDC}\r\n        uniswapPair={UNI.addr}\r\n      />\r\n\r\n      <div className=\"bs-docs-section\">\r\n\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-4\">\r\n            <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n              <ul className=\"list-group\" style={{ background: '#000084' }}>\r\n                <li className=\"d-flex justify-content-between align-items-center\">\r\n                  <MainButton\r\n                    title=\"Info\"\r\n                    description=\"View EQD-BUSD pool stats.\"\r\n                    icon={<i className=\"fas fa-chart-area\" />}\r\n                    href={PANCAKE_INFO}\r\n                  />\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-lg-4\">\r\n            <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n              <ul className=\"list-group\" style={{ background: '#000084' }}>\r\n                <li className=\"d-flex justify-content-between align-items-center\">\r\n                  <MainButton\r\n                    title=\"Trade\"\r\n                    description=\"Trade EQD tokens.\"\r\n                    icon={<i className=\"fas fa-exchange-alt\" />}\r\n                    href={PANCAKE_TRADE}\r\n                  />\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-lg-4\">\r\n            <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n              <ul className=\"list-group\" style={{ background: '#000084' }}>\r\n                <li className=\"d-flex justify-content-between align-items-center\">\r\n                  <MainButton\r\n                    title=\"Supply\"\r\n                    description=\"Supply and redeem liquidity.\"\r\n                    icon={<i className=\"fas fa-water\" />}\r\n                    href={PANCAKE_SUPPLY}\r\n                  />\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </>\r\n  );\r\n}\r\n\r\ntype MainButtonProps = {\r\n  title: string,\r\n  description: string,\r\n  icon: any,\r\n  href: string\r\n}\r\n\r\nfunction MainButton({\r\n  title, description, icon, href,\r\n}: MainButtonProps) {\r\n  return (\r\n    <LinkBase href={href} style={{ width: '100%' }}>\r\n      <div style={{ padding: 15 }}>\r\n        <div style={{ padding: 10, fontSize: 18 }}>\r\n          {title}\r\n        </div>\r\n        <span style={{ fontSize: 48 }}>\r\n          {icon}\r\n        </span>\r\n        {/*<img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />*/}\r\n        <div style={{ paddingTop: 5 }}>\r\n          {' '}\r\n          {description}\r\n          {' '}\r\n        </div>\r\n\r\n      </div>\r\n    </LinkBase>\r\n  );\r\n}\r\n\r\nexport default UniswapPool;\r\n","import React from 'react';\r\nimport { LinkBase, useTheme } from '@aragon/ui';\r\nimport ChangeModeButton from \"./SwitchTheme\";\r\n\r\ntype FooterProps = {\r\n  updateTheme: Function,\r\n  theme: string,\r\n  hasWeb3: boolean,\r\n}\r\n\r\nfunction Footer({ updateTheme, theme, hasWeb3 }: FooterProps) {\r\n  const currentTheme = useTheme();\r\n\r\n  return (\r\n\r\n    <div className=\"navbar navbar-expand-sm navbar-dark bg-dark\">\r\n      <div className=\"container text-white\" style={{ paddingBottom: '1%' }}>\r\n        <div>\r\n          <FooterLink icon={<img style={{ width: '50%' }} src='./image/github.png' />} href={\"https://github.com/equilibriumdollarprotocol\"} />\r\n          <FooterLink icon={<img style={{ width: '50%' }} src='./image/twitter.png' />} href={\"https://twitter.com/EQD_finance?s=20\"} />\r\n          <FooterLink icon={<img style={{ width: '50%' }} src='./image/medium.png' />} href={\"#https://medium.com/@eqdfinance\"} />\r\n          <FooterLink icon={<img style={{ width: '50%' }} src='./image/telegram.png' />} href={\"https://t.me/eqd_finance\"} />\r\n        </div>\r\n        <div>\r\n          <span className=\"float-right\"> &nbsp;&nbsp;made with <span role=\"img\" aria-labelledby=\"heartbreak\">💔️</span> by the &#123;eqd&#125;.</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ntype FooterLinkProp = {\r\n  icon: any,\r\n  href: string,\r\n}\r\n\r\nfunction FooterLink({\r\n  icon, href,\r\n}: FooterLinkProp) {\r\n  return (\r\n    <LinkBase href={href} style={{ marginLeft: '8px', marginRight: '8px' }}>\r\n      <span style={{ fontSize: 26 }}>{icon}</span>\r\n    </LinkBase>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\n\r\ntype TextBlockProps = {\r\n  label: string,\r\n  text: string\r\n}\r\n\r\nfunction TextBlock({ label, text }: TextBlockProps) {\r\n  return (\r\n    <>\r\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\r\n      <div style={{ fontSize: 24, padding: 3 }}>{text}</div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TextBlock;\r\n","import React, { Fragment } from 'react';\r\nimport BigNumber from 'bignumber.js';\r\nimport { Button } from '@aragon/ui';\r\nimport styled from 'styled-components'\r\n\r\nimport { BalanceBlock } from '../common/index';\r\nimport TextBlock from \"../common/TextBlock\";\r\nimport { ownership } from \"../../utils/number\";\r\nimport { PANCAKE_TRADE } from \"../../constants/contracts\";\r\n\r\ntype AccountPageHeaderProps = {\r\n  accountEQDBalance: BigNumber,\r\n  accountEQDSBalance: BigNumber,\r\n  totalEQDSSupply: BigNumber,\r\n  accountStagedBalance: BigNumber,\r\n  accountBondedBalance: BigNumber,\r\n  accountStatus: number,\r\n  unlocked: number,\r\n  fluidEpoch: any,\r\n  user: string\r\n};\r\n\r\nconst STATUS_MAP = [\"Unlocked\", \"Locked\", \"Locked\"];\r\n\r\nfunction status(accountStatus) {\r\n  return STATUS_MAP[accountStatus]\r\n}\r\n\r\nconst AccountPageHeader = ({\r\n  accountEQDBalance,\r\n  accountEQDSBalance,\r\n  totalEQDSSupply,\r\n  accountStagedBalance,\r\n  accountBondedBalance,\r\n  accountStatus,\r\n  unlocked,\r\n  fluidEpoch,\r\n  user\r\n}: AccountPageHeaderProps) => {\r\n\r\n  return (\r\n    <div style={{ margin: '1%' }}>\r\n      <h3>\r\n        <div className='row' style={{ padding: '3%', textAlign: 'center' }}>\r\n          <div className='col-md-2' style={{ paddingBottom: '2%' }}>\r\n            <BalanceBlock asset=\"Balance\" balance={accountEQDBalance} suffix={\" EQD\"} />\r\n            <Button\r\n              label=\"Buy EQD\"\r\n              icon={<i className=\"fas fa-exchange-alt\" />}\r\n              onClick={() => window.open(PANCAKE_TRADE, \"_blank\")}\r\n            />\r\n          </div>\r\n          <div className='col-md-2' style={{ paddingBottom: '2%' }}>\r\n\r\n            <BalanceBlock asset=\"Staged\" balance={accountStagedBalance} suffix={\" EQD\"} />\r\n          </div>\r\n          <div className='col-md-2' style={{ paddingBottom: '2%' }}>\r\n\r\n            <BalanceBlock asset=\"Bonded\" balance={accountBondedBalance} suffix={\" EQD\"} />\r\n          </div>\r\n          <div className='col-md-2' style={{ paddingBottom: '2%' }}>\r\n\r\n            <BalanceBlock asset=\"DAO Ownership\" balance={ownership(accountEQDSBalance, totalEQDSSupply)} suffix={\"%\"} />\r\n          </div>\r\n\r\n          <div className='col-md-4' style={{ paddingBottom: '2%' }}>\r\n\r\n            <TextBlock label=\"Status\" text={status(accountStatus)} />\r\n            {\r\n              user !== '' && (\r\n                <Fragment>\r\n                  <p>{\r\n                    isNaN(fluidEpoch)\r\n                      ? 'You did not bonded or unbonded before.'\r\n                      : `You last bonded or unbonded at epoch ${fluidEpoch}.`\r\n                  } </p>\r\n                  {\r\n                    accountStatus !== 0 && (\r\n                      <p>Unlocked at epoch {fluidEpoch + 24}.</p>\r\n                    )\r\n                  }\r\n                </Fragment>\r\n              )\r\n            }\r\n          </div>\r\n        </div>\r\n      </h3>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  padding: 2%;\r\n  justify-content: space-between;\r\n  @media (max-width: 522px) {\r\n    display: block;\r\n  }\r\n`\r\n\r\n\r\nexport default AccountPageHeader;\r\n","import React from 'react';\r\n\r\nimport BigNumber from 'bignumber.js';\r\nimport {\r\n  TextInput,\r\n} from '@aragon/ui';\r\n\r\ntype BigNumberInputProps = {\r\n  value: BigNumber,\r\n  setter: (value: BigNumber) => void\r\n  adornment?: any,\r\n  disabled?: boolean\r\n}\r\n\r\nfunction BigNumberInput({ value, setter, adornment, disabled=false }: BigNumberInputProps) {\r\n  return (\r\n    <>\r\n      <TextInput\r\n        type=\"number\"\r\n        adornmentPosition=\"end\"\r\n        adornment={adornment}\r\n        wide\r\n        value={value.isNegative() ? '' : value}\r\n        onChange={(event) => {\r\n          if (event.target.value) {\r\n            setter(new BigNumber(event.target.value));\r\n          } else {\r\n            setter(new BigNumber(-1));\r\n          }\r\n        }}\r\n        onBlur={() => {\r\n          if (value.isNegative()) {\r\n            setter(new BigNumber(0))\r\n          }\r\n        }}\r\n        disabled={disabled}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default BigNumberInput;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconCirclePlus, IconCircleMinus, IconLock\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\r\n\r\nimport {\r\n  BalanceBlock, MaxButton,\r\n} from '../common/index';\r\nimport { approve, deposit, withdraw } from '../../utils/web3';\r\nimport { isPos, toBaseUnitBN } from '../../utils/number';\r\nimport { EQD, EQDS } from \"../../constants/tokens\";\r\nimport { MAX_UINT256 } from \"../../constants/values\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\n\r\ntype WithdrawDepositProps = {\r\n  user: string\r\n  balance: BigNumber,\r\n  allowance: BigNumber,\r\n  stagedBalance: BigNumber,\r\n  status: number\r\n};\r\n\r\nfunction WithdrawDeposit({\r\n  user, balance, allowance, stagedBalance, status\r\n}: WithdrawDepositProps) {\r\n  const [depositAmount, setDepositAmount] = useState(new BigNumber(0));\r\n  const [withdrawAmount, setWithdrawAmount] = useState(new BigNumber(0));\r\n\r\n  return (\r\n    <div className=\"modal\" style={{ marginBottom: '2%', display: 'block', position: 'relative', color: '#000000' }}  >\r\n      <h2 style={{ padding: '2%' }} id=\"nav-breadcrumbs\" className=\"bg-warning\">Stage</h2>\r\n      <div style={{ padding: '2%', background: '#ffffff' }}>\r\n\r\n        {allowance.comparedTo(MAX_UINT256) === 0 ?\r\n          <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n            {/* total Issued */}\r\n            <div style={{ flexBasis: '32%' }}>\r\n              <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"EQD\"} />\r\n            </div>\r\n            {/* Deposit Døllar into DAO */}\r\n            <div style={{ flexBasis: '33%', paddingTop: '2%' }}>\r\n              <div style={{ display: 'flex' }}>\r\n                <div style={{ width: '60%', minWidth: '6em' }}>\r\n                  <>\r\n                    <BigNumberInput\r\n                      adornment=\"EQD\"\r\n                      value={depositAmount}\r\n                      setter={setDepositAmount}\r\n                      disabled={status !== 0}\r\n                    />\r\n                    <MaxButton\r\n                      onClick={() => {\r\n                        setDepositAmount(balance);\r\n                      }}\r\n                    />\r\n                  </>\r\n                </div>\r\n                <div style={{ width: '40%', minWidth: '6em' }}>\r\n                  {\r\n                    status === 1 || !isPos(depositAmount) || depositAmount.isGreaterThan(balance)\r\n                      ? <OverlayTrigger\r\n                        placement=\"bottom\"\r\n                        overlay={\r\n                          <Tooltip id=\"tooltip\">\r\n                            Make sure the value &gt; 0 and your status is Unlocked.\r\n                        </Tooltip>\r\n                        }\r\n                      >\r\n                        <div style={{ display: 'inline-block', cursor: 'not-allowed' }}>\r\n                          <Button\r\n                            style={{ pointerEvents: 'none' }}\r\n                            wide\r\n                            icon={status === 0 ? <IconCirclePlus /> : <IconLock />}\r\n                            label=\"Deposit\"\r\n                            disabled={status === 1 || !isPos(depositAmount) || depositAmount.isGreaterThan(balance)}\r\n                          />\r\n                        </div>\r\n                      </OverlayTrigger>\r\n                      : <Button\r\n                        wide\r\n                        icon={status === 0 ? <IconCirclePlus /> : <IconLock />}\r\n                        label=\"Deposit\"\r\n                        onClick={() => {\r\n                          deposit(\r\n                            EQDS.addr,\r\n                            toBaseUnitBN(depositAmount, EQD.decimals),\r\n                          );\r\n                        }}\r\n                      />\r\n                  }\r\n\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div style={{ flexBasis: '2%' }} />\r\n            {/* Withdraw Døllar from DAO */}\r\n            <div style={{ flexBasis: '33%', paddingTop: '2%' }}>\r\n              <div style={{ display: 'flex' }}>\r\n                <div style={{ width: '60%', minWidth: '7em' }}>\r\n                  <>\r\n                    <BigNumberInput\r\n                      adornment=\"EQD\"\r\n                      value={withdrawAmount}\r\n                      setter={setWithdrawAmount}\r\n                      disabled={status !== 0}\r\n                    />\r\n                    <MaxButton\r\n                      onClick={() => {\r\n                        setWithdrawAmount(stagedBalance);\r\n                      }}\r\n                    />\r\n                  </>\r\n                </div>\r\n                <div style={{ width: '40%', minWidth: '7em' }}>\r\n                  {\r\n                    status === 1 || !isPos(withdrawAmount) || withdrawAmount.isGreaterThan(stagedBalance)\r\n                      ? <OverlayTrigger\r\n                        placement=\"bottom\"\r\n                        overlay={\r\n                          <Tooltip id=\"tooltip\">\r\n                            Make sure the value &gt; 0 and your status is Unlocked.\r\n                        </Tooltip>\r\n                        }\r\n                      >\r\n                        <div style={{ display: 'inline-block', cursor: 'not-allowed' }}>\r\n                          <Button\r\n                            style={{ pointerEvents: 'none' }}\r\n                            wide\r\n                            icon={status === 0 ? <IconCircleMinus /> : <IconLock />}\r\n                            label=\"Withdraw\"\r\n                            disabled={status === 1 || !isPos(withdrawAmount) || withdrawAmount.isGreaterThan(stagedBalance)}\r\n                          />\r\n                        </div>\r\n                      </OverlayTrigger>\r\n                      : <Button\r\n                        wide\r\n                        icon={status === 0 ? <IconCircleMinus /> : <IconLock />}\r\n                        label=\"Withdraw\"\r\n                        onClick={() => {\r\n                          withdraw(\r\n                            EQDS.addr,\r\n                            toBaseUnitBN(withdrawAmount, EQD.decimals),\r\n                          );\r\n                        }}\r\n                      />\r\n                  }\r\n\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n          :\r\n          <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n            {/* total Issued */}\r\n            <div style={{ flexBasis: '32%' }}>\r\n              <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"EQD\"} />\r\n            </div>\r\n            <div style={{ flexBasis: '35%' }} />\r\n            {/* Approve DAO to spend Døllar */}\r\n            <div style={{ flexBasis: '33%', paddingTop: '2%' }}>\r\n              <Button\r\n                wide\r\n                icon={<IconCirclePlus />}\r\n                label=\"Approve\"\r\n                onClick={() => {\r\n                  approve(EQD.addr, EQDS.addr);\r\n                }}\r\n                disabled={user === ''}\r\n              />\r\n            </div>\r\n          </div>\r\n        }\r\n        <div style={{ width: '100%', paddingTop: '2%', textAlign: 'center' }}>\r\n          <span style={{ opacity: 0.5 }}>Staging requires your status as Unlocked.</span>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WithdrawDeposit;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconCirclePlus, IconCircleMinus, IconCaution\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport {\r\n  BalanceBlock, MaxButton,\r\n} from '../common/index';\r\nimport { bond, unbondUnderlying } from '../../utils/web3';\r\nimport { isPos, toBaseUnitBN } from '../../utils/number';\r\nimport { EQD, EQDS } from \"../../constants/tokens\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\nimport TextBlock from \"../common/TextBlock\";\r\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\r\n\r\ntype BondUnbondProps = {\r\n  staged: BigNumber,\r\n  bonded: BigNumber,\r\n  status: number,\r\n  lockup: number,\r\n};\r\n\r\nfunction BondUnbond({\r\n  staged, bonded, status, lockup\r\n}: BondUnbondProps) {\r\n  const [bondAmount, setBondAmount] = useState(new BigNumber(0));\r\n  const [unbondAmount, setUnbondAmount] = useState(new BigNumber(0));\r\n\r\n  return (\r\n    <div className=\"modal\" style={{ marginBottom: '2%', display: 'block', position: 'relative', color: '#000000' }}  >\r\n      <h2 style={{ padding: '2%' }} id=\"nav-breadcrumbs\" className=\"bg-warning\">BOND</h2>\r\n      <div style={{ padding: '2%', background: '#ffffff' }}>\r\n        <div className='row'>\r\n          <div className='col-md-2'>\r\n\r\n            <BalanceBlock asset=\"Bonded\" balance={bonded} suffix={\"EQD\"} />\r\n          </div>\r\n\r\n          <div className='col-md-2' >\r\n            <TextBlock label=\"Exit Lockup\" text={lockup === 0 ? \"\" : lockup === 1 ? \"1 epoch\" : `${lockup} epochs`} />\r\n          </div>\r\n\r\n          <div className='col-md-4'>\r\n            <div style={{ display: 'flex' }}>\r\n              <div style={{ width: '60%', minWidth: '6em' }}>\r\n                <>\r\n                  <BigNumberInput\r\n                    adornment=\"EQD\"\r\n                    value={bondAmount}\r\n                    setter={setBondAmount}\r\n                  />\r\n                  <MaxButton\r\n                    onClick={() => {\r\n                      setBondAmount(staged);\r\n                    }}\r\n                  />\r\n                </>\r\n              </div>\r\n              <div style={{ width: '40%', minWidth: '7em' }}>\r\n                {\r\n                  (status === 2 || !isPos(bondAmount) || bondAmount.isGreaterThan(staged))\r\n                    ? <OverlayTrigger\r\n                      placement=\"bottom\"\r\n                      overlay={\r\n                        <Tooltip id=\"tooltip\">\r\n                          Make sure the value &gt; 0\r\n                      </Tooltip>\r\n                      }\r\n                    >\r\n                      <div style={{ display: 'inline-block', cursor: 'not-allowed' }}>\r\n                        <Button\r\n                          style={{ pointerEvents: 'none' }}\r\n                          wide\r\n                          icon={status === 0 ? <IconCirclePlus /> : <IconCaution />}\r\n                          label=\"Bond\"\r\n                          disabled={status === 2 || !isPos(bondAmount) || bondAmount.isGreaterThan(staged)}\r\n                        />\r\n                      </div>\r\n                    </OverlayTrigger>\r\n                    : <Button\r\n                      wide\r\n                      icon={status === 0 ? <IconCirclePlus /> : <IconCaution />}\r\n                      label=\"Bond\"\r\n                      onClick={() => {\r\n                        bond(\r\n                          EQDS.addr,\r\n                          toBaseUnitBN(bondAmount, EQD.decimals),\r\n                        );\r\n                      }}\r\n                    />\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className='col-md-4'>\r\n            <div style={{ display: 'flex' }}>\r\n              <div style={{ width: '60%', minWidth: '6em' }}>\r\n                <>\r\n                  <BigNumberInput\r\n                    adornment=\"EQD\"\r\n                    value={unbondAmount}\r\n                    setter={setUnbondAmount}\r\n                  />\r\n                  <MaxButton\r\n                    onClick={() => {\r\n                      setUnbondAmount(bonded);\r\n                    }}\r\n                  />\r\n                </>\r\n              </div>\r\n              <div style={{ width: '40%', minWidth: '7em' }}>\r\n                {\r\n                  (status === 2 || !isPos(unbondAmount) || unbondAmount.isGreaterThan(bonded))\r\n                    ? <OverlayTrigger\r\n                      placement=\"bottom\"\r\n                      overlay={\r\n                        <Tooltip id=\"tooltip\">\r\n                          Make sure the value &gt; 0\r\n                      </Tooltip>\r\n                      }\r\n                    >\r\n                      <div style={{ display: 'inline-block', cursor: 'not-allowed' }}>\r\n                        <Button\r\n                          style={{ pointerEvents: 'none' }}\r\n                          wide\r\n                          icon={status === 0 ? <IconCircleMinus /> : <IconCaution />}\r\n                          label=\"Unbond\"\r\n                          disabled={status === 2 || !isPos(unbondAmount) || unbondAmount.isGreaterThan(bonded)}\r\n                        />\r\n                      </div>\r\n                    </OverlayTrigger>\r\n                    : <Button\r\n                      wide\r\n                      icon={status === 0 ? <IconCircleMinus /> : <IconCaution />}\r\n                      label=\"Unbond\"\r\n                      onClick={() => {\r\n                        unbondUnderlying(\r\n                          EQDS.addr,\r\n                          toBaseUnitBN(unbondAmount, EQD.decimals),\r\n                        );\r\n                      }}\r\n                    />\r\n                }\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ width: '100%', paddingTop: '2%', textAlign: 'center' }}>\r\n          <span style={{ opacity: 0.5 }}> Bonding events will restart the lockup timer.</span>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BondUnbond;\r\n","import React from 'react';\r\nimport BigNumber from \"bignumber.js\";\r\nimport { Box } from '@aragon/ui';\r\nimport styled from 'styled-components'\r\n\r\ntype InvestProps = {\r\n  totalSupply: BigNumber,\r\n  totalBonded: BigNumber,\r\n};\r\n\r\nconst Invest = ({ totalSupply, totalBonded }: InvestProps) => {\r\n  const dao = (((((totalSupply.toNumber() * 4) / 100) * 60) / 100 + totalBonded.toNumber()) / totalBonded.toNumber());\r\n\r\n  return (\r\n    <Container>\r\n      <ContainerItem style={{ flexBasis: '30%', marginRight: '2%' }}>\r\n        <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n          <ul className=\"list-group\" style={{ background: '#000084' }}>\r\n            <li className=\"d-flex justify-content-between align-items-center\" style={{ padding: '5%', height: '220px' }}>\r\n              <div>\r\n                <div style={{ fontSize: 30, padding: 3 }}>APR</div>\r\n                <div className=\"mt-4\" style={{ fontSize: 16, padding: 3 }}>DAO hourly: <label style={{ float: 'right' }}>{((dao - 1) * 100).toFixed(2)}%</label>\r\n\r\n                </div>\r\n                <div style={{ fontSize: 16, padding: 3 }}>DAO daily: <label style={{ float: 'right' }}>{((dao - 1) * 24 * 100).toFixed(2)}%</label>\r\n\r\n                </div>\r\n                <div style={{ fontSize: 16, padding: 3 }}>DAO weekly: <label style={{ float: 'right' }}>{((dao - 1) * 168 * 100).toFixed(2)}%</label>\r\n                </div>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </ContainerItem>\r\n      <ContainerItem style={{ flexBasis: '68%' }}>\r\n        <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n          <ul className=\"list-group\" style={{ background: '#000084' }}>\r\n            <li className=\"d-flex justify-content-between align-items-center\" style={{ height: '100px' }}>\r\n              <label style={{ fontSize: 20 }}><strong>Guide for DAO bonding</strong></label>\r\n            </li>\r\n            <li>\r\n              <p >Step 1: You need to have EQD in your wallet.</p>\r\n            </li>\r\n            <li>\r\n              <p className=\"mt-2\">Step 2: Approve your EQD to unlock Staging (skip it if you've done it)</p>\r\n            </li>\r\n            <li>\r\n              <p className=\"mt-2\">Step 3: Stage your EQD into DAO</p>\r\n            </li>\r\n            <li>\r\n              <p className=\"mt-2\">Step 4: Bond your EQD into DAO</p>\r\n            </li>\r\n            <li>\r\n              <p className=\"mt-2\">Step 5: Unbond and wait 24 hours to claim your rewards</p>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </ContainerItem>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  padding: 1%;\r\n  @media (max-width: 522px) {\r\n    display: block;\r\n  }\r\n`\r\n\r\nconst ContainerItem = styled.div`\r\n  @media (max-width: 522px) {\r\n    margin: 2% !important;\r\n  }\r\n`\r\n\r\nexport default Invest;","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport BigNumber from 'bignumber.js';\r\nimport {\r\n  getBalanceBonded,\r\n  getBalanceOfStaged, getFluidUntil,\r\n  getStatusOf, getTokenAllowance,\r\n  getTokenBalance, getTokenTotalSupply, getTotalBonded, loadFluidStatusDao,\r\n} from '../../utils/infura';\r\nimport { EQD, EQDS } from \"../../constants/tokens\";\r\nimport { DAO_EXIT_LOCKUP_EPOCHS } from \"../../constants/values\";\r\nimport { toTokenUnitsBN } from '../../utils/number';\r\n\r\nimport AccountPageHeader from \"./Header\";\r\nimport WithdrawDeposit from \"./WithdrawDeposit\";\r\nimport BondUnbond from \"./BondUnbond\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport { getPoolAddress } from \"../../utils/pool\";\r\nimport { DollarPool4 } from \"../../constants/contracts\";\r\nimport Invest from \"./Invest\";\r\n\r\nfunction Wallet({ user }: { user: string }) {\r\n  const { override } = useParams();\r\n  if (override) {\r\n    user = override;\r\n  }\r\n\r\n  const [userEQDBalance, setUserEQDBalance] = useState(new BigNumber(0));\r\n  const [userEQDAllowance, setUserEQDAllowance] = useState(new BigNumber(0));\r\n  const [userEQDSBalance, setUserEQDSBalance] = useState(new BigNumber(0));\r\n  const [totalEQDSSupply, setTotalEQDSSupply] = useState(new BigNumber(0));\r\n  const [userStagedBalance, setUserStagedBalance] = useState(new BigNumber(0));\r\n  const [userBondedBalance, setUserBondedBalance] = useState(new BigNumber(0));\r\n  const [userStatus, setUserStatus] = useState(0);\r\n  const [userStatusUnlocked, setUserStatusUnlocked] = useState(0);\r\n  const [lockup, setLockup] = useState(0);\r\n  const [totalSupply, setTotalSupply] = useState(new BigNumber(0));\r\n  const [totalBonded, setTotalBonded] = useState(new BigNumber(0));\r\n  const [fluidStatus, setFluidStatus] = useState({\r\n    lastUnbond: undefined, lastBond: undefined, fluidEpoch: undefined\r\n  });\r\n\r\n  //Update User balances\r\n  useEffect(() => {\r\n    let isCancelledApr = false;\r\n    async function updateAPR() {\r\n      const [\r\n        totalSupplyStr,\r\n        totalBondedStr,\r\n      ] = await Promise.all([\r\n        getTokenTotalSupply(EQD.addr),\r\n        getTotalBonded(EQDS.addr),\r\n      ]);\r\n\r\n      if (!isCancelledApr) {\r\n        setTotalSupply(toTokenUnitsBN(totalSupplyStr, EQD.decimals));\r\n        setTotalBonded(toTokenUnitsBN(totalBondedStr, EQD.decimals));\r\n      }\r\n    }\r\n\r\n    updateAPR();\r\n\r\n    if (user === '') {\r\n      setUserEQDBalance(new BigNumber(0));\r\n      setUserEQDAllowance(new BigNumber(0));\r\n      setUserEQDSBalance(new BigNumber(0));\r\n      setTotalEQDSSupply(new BigNumber(0));\r\n      setUserStagedBalance(new BigNumber(0));\r\n      setUserBondedBalance(new BigNumber(0));\r\n      setUserStatus(0);\r\n      return;\r\n    }\r\n    let isCancelledUser = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [\r\n        EQDBalance,\r\n        EQDAllowance,\r\n        EQDsBalance,\r\n        EQDsSupply,\r\n        stagedBalance,\r\n        bondedBalance,\r\n        status,\r\n        poolAddress,\r\n        fluidUntilStr,\r\n        totalSupplyStr,\r\n        totalBondedStr,\r\n        fluidStatusStr\r\n      ] = await Promise.all([\r\n        getTokenBalance(EQD.addr, user),\r\n        getTokenAllowance(EQD.addr, user, EQDS.addr),\r\n        getTokenBalance(EQDS.addr, user),\r\n        getTokenTotalSupply(EQDS.addr),\r\n        getBalanceOfStaged(EQDS.addr, user),\r\n        getBalanceBonded(EQDS.addr, user),\r\n        getStatusOf(EQDS.addr, user),\r\n        getPoolAddress(),\r\n\r\n        getFluidUntil(EQDS.addr, user),\r\n\r\n        getTokenTotalSupply(EQD.addr),\r\n        getTotalBonded(EQDS.addr),\r\n        loadFluidStatusDao(EQDS.addr, user),\r\n      ]);\r\n\r\n      const userEQDBalance = toTokenUnitsBN(EQDBalance, EQD.decimals);\r\n      const userEQDSBalance = toTokenUnitsBN(EQDsBalance, EQDS.decimals);\r\n      const totalEQDSSupply = toTokenUnitsBN(EQDsSupply, EQDS.decimals);\r\n      const userStagedBalance = toTokenUnitsBN(stagedBalance, EQDS.decimals);\r\n      const userBondedBalance = toTokenUnitsBN(bondedBalance, EQDS.decimals);\r\n      const userStatus = parseInt(status, 10);\r\n      const fluidUntil = parseInt(fluidUntilStr, 10);\r\n\r\n      if (!isCancelledUser) {\r\n        setUserEQDBalance(new BigNumber(userEQDBalance));\r\n        setUserEQDAllowance(new BigNumber(EQDAllowance));\r\n        setUserEQDSBalance(new BigNumber(userEQDSBalance));\r\n        setTotalEQDSSupply(new BigNumber(totalEQDSSupply));\r\n        setUserStagedBalance(new BigNumber(userStagedBalance));\r\n        setUserBondedBalance(new BigNumber(userBondedBalance));\r\n        setUserStatus(userStatus);\r\n        setUserStatusUnlocked(fluidUntil)\r\n        setLockup(poolAddress === DollarPool4 ? DAO_EXIT_LOCKUP_EPOCHS : 1);\r\n        setTotalSupply(toTokenUnitsBN(totalSupplyStr, EQD.decimals));\r\n        setTotalBonded(toTokenUnitsBN(totalBondedStr, EQD.decimals));\r\n        setFluidStatus(fluidStatusStr);\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const updateUser = setInterval(updateUserInfo, 15000);\r\n    const apr = setInterval(updateAPR, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelledUser = true;\r\n      isCancelledApr = true;\r\n      clearInterval(updateUser);\r\n      clearInterval(apr);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n\r\n      <div style={{ textAlign: 'center' }}>\r\n\r\n        <IconHeader icon={<div className=\"modal\" style={{ display: 'block', position: 'relative' }}><img width='60px' src=\"./image/daologo.png\" /></div>} text=\"DAO\" />\r\n\r\n      </div>\r\n      <Invest\r\n        totalSupply={totalSupply}\r\n        totalBonded={totalBonded}\r\n      />\r\n\r\n      <AccountPageHeader\r\n        user={user}\r\n        accountEQDBalance={userEQDBalance}\r\n        accountEQDSBalance={userEQDSBalance}\r\n        totalEQDSSupply={totalEQDSSupply}\r\n        accountStagedBalance={userStagedBalance}\r\n        accountBondedBalance={userBondedBalance}\r\n        accountStatus={userStatus}\r\n        unlocked={userStatusUnlocked}\r\n        fluidEpoch={fluidStatus?.fluidEpoch}\r\n      />\r\n\r\n      <WithdrawDeposit\r\n        user={user}\r\n        balance={userEQDBalance}\r\n        allowance={userEQDAllowance}\r\n        stagedBalance={userStagedBalance}\r\n        status={userStatus}\r\n      />\r\n\r\n      <BondUnbond\r\n        staged={userStagedBalance}\r\n        bonded={userBondedBalance}\r\n        status={userStatus}\r\n        lockup={lockup}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Wallet;\r\n","import React from 'react';\r\n\r\nimport BigNumber from 'bignumber.js';\r\n\r\ntype NumberBlockProps = {\r\n  title: string,\r\n  num: BigNumber | string | number\r\n}\r\n\r\nfunction NumberBlock({ title, num }: NumberBlockProps) {\r\n  const numNum = new BigNumber(num).toNumber();\r\n\r\n  return (\r\n    <>\r\n      <div style={{ fontSize: 14, padding: 3 }}>{title}</div>\r\n      <div style={{ fontSize: 24, padding: 3 }}>{numNum}</div>\r\n\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NumberBlock;\r\n","import React from 'react';\r\nimport {\r\n  Box, Button, IconCirclePlus,\r\n} from '@aragon/ui';\r\nimport { advance } from '../../utils/web3';\r\nimport NumberBlock from \"../common/NumberBlock\";\r\nimport { EQDS } from \"../../constants/tokens\";\r\n\r\ntype AdvanceEpochProps = {\r\n  user: string,\r\n  epoch: number,\r\n  epochTime: number,\r\n}\r\n\r\nfunction AdvanceEpoch({\r\n  user,\r\n  epoch,\r\n  epochTime,\r\n}: AdvanceEpochProps) {\r\n  return (\r\n    <div style={{ marginBottom: '2%', display: 'block', position: 'relative', background: '#ffffff' }}>\r\n      <h2 style={{ padding: '2%' }} className=\"bg-warning\">Advance Epoch</h2>\r\n      <div className=\"bs-component\" style={{ padding: '2%', color: '#000000' }}>\r\n        <div style={{ display: 'flex' }}>\r\n          {/* Epoch Time */}\r\n          <div style={{ width: '30%' }}>\r\n            <NumberBlock title=\"Epoch (from current time)\" num={epochTime} />\r\n          </div>\r\n          {/* Advance Epoch */}\r\n          <div style={{ width: '40%' }} />\r\n          <div style={{ width: '30%', paddingTop: '2%' }}>\r\n            <Button\r\n              wide\r\n              icon={<IconCirclePlus />}\r\n              label=\"Advance\"\r\n              onClick={() => {\r\n                advance(EQDS.addr);\r\n              }}\r\n              disabled={user === '' || epoch >= epochTime}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default AdvanceEpoch;\r\n","import React from 'react';\r\n\r\nimport NumberBlock from \"../common/NumberBlock\";\r\nimport TextBlock from \"../common/TextBlock\";\r\n\r\ntype AccountPageHeaderProps = {\r\n  epoch: number,\r\n  epochTime: number,\r\n};\r\n\r\nconst EpochPageHeader = ({\r\n  epoch, epochTime,\r\n}: AccountPageHeaderProps) => (\r\n  <div className='row' style={{ padding: '2%', color: '#000000' }}>\r\n    <div className='col-md-2'>\r\n      <NumberBlock title=\"Current\" num={epoch} />\r\n    </div>\r\n    <div className='col-md-4'>\r\n      <NumberBlock title=\"Available\" num={epochTime} />\r\n    </div>\r\n    <div className='col-md-2'>\r\n      <TextBlock label=\"Period\" text=\"1 hour\" />\r\n    </div>\r\n  </div>\r\n\r\n);\r\n\r\n\r\nexport default EpochPageHeader;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Header } from '@aragon/ui';\r\n\r\nimport {\r\n  getEpoch, getEpochTime,\r\n} from '../../utils/infura';\r\nimport { EQDS } from \"../../constants/tokens\";\r\nimport AdvanceEpoch from './AdvanceEpoch';\r\nimport EpochPageHeader from \"./Header\";\r\nimport IconHeader from \"../common/IconHeader\";\r\n\r\nfunction EpochDetail({ user }: { user: string }) {\r\n\r\n  const [epoch, setEpoch] = useState(0);\r\n  const [epochTime, setEpochTime] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [epochStr, epochTimeStr] = await Promise.all([\r\n        getEpoch(EQDS.addr),\r\n        getEpochTime(EQDS.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setEpoch(parseInt(epochStr, 10));\r\n        setEpochTime(parseInt(epochTimeStr, 10));\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ textAlign: 'center' }}>\r\n        <IconHeader icon={<div className=\"modal\" style={{ display: 'block', position: 'relative' }}><i className=\"fas fa-clock\" /></div>} text=\"Epoch\" />\r\n      </div>\r\n\r\n      <EpochPageHeader\r\n        epoch={epoch}\r\n        epochTime={epochTime}\r\n      />\r\n\r\n      <AdvanceEpoch\r\n        user={user}\r\n        epoch={epoch}\r\n        epochTime={epochTime}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EpochDetail;\r\n","import React from 'react';\r\n\r\nimport BigNumber from \"bignumber.js\";\r\nimport { BalanceBlock } from \"../common\";\r\nimport { ownership } from \"../../utils/number\";\r\n\r\ntype CouponMarketHeaderProps = {\r\n  debt: BigNumber,\r\n  supply: BigNumber,\r\n  coupons: BigNumber,\r\n  premium: BigNumber,\r\n  redeemable: BigNumber,\r\n};\r\n\r\nconst CouponMarketHeader = ({\r\n  debt, supply, coupons, premium, redeemable\r\n}: CouponMarketHeaderProps) => (\r\n  <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"Debt Ratio\" balance={ownership(debt, supply)} suffix={\"%\"} />\r\n    </div>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"Total Debt\" balance={debt} suffix={\"EQD\"} />\r\n    </div>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"Coupons\" balance={coupons} />\r\n    </div>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"Premium\" balance={premium.multipliedBy(100)} suffix={\"%\"} />\r\n    </div>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"Redeemable\" balance={redeemable} />\r\n    </div>\r\n  </div>\r\n);\r\n\r\n\r\nexport default CouponMarketHeader;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconCirclePlus, IconCircleMinus\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport {\r\n  BalanceBlock, MaxButton, PriceSection,\r\n} from '../common/index';\r\nimport { approve, purchaseCoupons } from '../../utils/web3';\r\n\r\nimport { isPos, toBaseUnitBN, toTokenUnitsBN } from '../../utils/number';\r\nimport { EQD, EQDS } from \"../../constants/tokens\";\r\nimport { MAX_UINT256 } from \"../../constants/values\";\r\nimport { getCouponPremium } from \"../../utils/infura\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\n\r\ntype PurchaseCouponsProps = {\r\n  user: string,\r\n  allowance: BigNumber,\r\n  balance: BigNumber,\r\n  debt: BigNumber,\r\n};\r\n\r\nfunction PurchaseCoupons({\r\n  user, balance, allowance, debt,\r\n}: PurchaseCouponsProps) {\r\n  const [purchaseAmount, setPurchaseAmount] = useState(new BigNumber(0));\r\n  const [premium, setPremium] = useState(new BigNumber(0));\r\n\r\n  const updatePremium = async (purchaseAmount) => {\r\n    if (purchaseAmount.lte(new BigNumber(0))) {\r\n      setPremium(new BigNumber(0));\r\n      return;\r\n    }\r\n    const purchaseAmountBase = toBaseUnitBN(purchaseAmount, EQD.decimals);\r\n    const premium = await getCouponPremium(EQDS.addr, purchaseAmountBase)\r\n    const premiumFormatted = toTokenUnitsBN(premium, EQD.decimals);\r\n    setPremium(premiumFormatted);\r\n  };\r\n\r\n  return (\r\n    <div style={{ marginBottom: '2%', display: 'block', position: 'relative', background: '#ffffff' }}>\r\n      <h2 style={{ padding: '2%' }} className=\"bg-warning\">Purcase</h2>\r\n      <div className=\"bs-component\" style={{ padding: '2%', color: '#000000' }}>\r\n        {allowance.comparedTo(MAX_UINT256) === 0 ?\r\n          <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n            {/* User balance */}\r\n            <div style={{ flexBasis: '30%' }}>\r\n              <BalanceBlock asset={`Balance`} balance={balance} suffix={\" EQD\"} />\r\n            </div>\r\n            <div style={{ flexBasis: '38%' }} />\r\n            {/* Purchase coupons */}\r\n            <div style={{ flexBasis: '32%', paddingTop: '2%' }}>\r\n              <div style={{ display: 'flex' }}>\r\n                <div style={{ width: '60%', minWidth: '6em' }}>\r\n                  <>\r\n                    <BigNumberInput\r\n                      adornment=\"EQD\"\r\n                      value={purchaseAmount}\r\n                      setter={(value) => {\r\n                        setPurchaseAmount(value);\r\n                        isPos(value) ? updatePremium(value) : updatePremium(new BigNumber(0));\r\n                      }}\r\n                    />\r\n                    <MaxButton\r\n                      onClick={() => {\r\n                        const maxPurchaseAmount = debt.comparedTo(balance) > 0 ? balance : debt\r\n                        setPurchaseAmount(maxPurchaseAmount);\r\n                        updatePremium(maxPurchaseAmount);\r\n                      }}\r\n                    />\r\n                  </>\r\n                </div>\r\n                <div style={{ width: '40%', minWidth: '6em' }}>\r\n                  <Button\r\n                    wide\r\n                    icon={<IconCircleMinus />}\r\n                    label=\"Burn\"\r\n                    onClick={() => {\r\n                      purchaseCoupons(\r\n                        EQDS.addr,\r\n                        toBaseUnitBN(purchaseAmount, EQD.decimals),\r\n                      );\r\n                    }}\r\n                    disabled={user === '' || debt.isZero() || balance.isZero() || !isPos(purchaseAmount)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <PriceSection label=\"Coupons \" amt={purchaseAmount.plus(premium)} />\r\n            </div>\r\n          </div>\r\n          :\r\n          <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n            {/* User balance */}\r\n            <div style={{ flexBasis: '30%' }}>\r\n              <BalanceBlock asset={`EQD Balance`} balance={balance} />\r\n            </div>\r\n            <div style={{ flexBasis: '40%' }} />\r\n            {/* Approve DAO to spend Døllar */}\r\n            <div style={{ flexBasis: '30%', paddingTop: '2%' }}>\r\n              <Button\r\n                wide\r\n                icon={<IconCirclePlus />}\r\n                label=\"Approve\"\r\n                onClick={() => {\r\n                  approve(EQD.addr, EQDS.addr);\r\n                }}\r\n                disabled={user === ''}\r\n              />\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PurchaseCoupons;\r\n","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  DataView, Button, IconCirclePlus\r\n} from '@aragon/ui';\r\n\r\nimport { getBatchBalanceOfCoupons, getBatchCouponsExpiration, getCouponEpochs } from '../../utils/infura';\r\nimport { EQD, EQDS } from \"../../constants/tokens\";\r\nimport { formatBN, toBaseUnitBN, toTokenUnitsBN } from \"../../utils/number\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport { redeemCoupons } from \"../../utils/web3\";\r\n\r\ntype PurchaseHistoryProps = {\r\n  user: string,\r\n  hideRedeemed: boolean,\r\n  totalRedeemable: BigNumber\r\n};\r\n\r\nfunction PurchaseHistory({\r\n  user, hideRedeemed, totalRedeemable\r\n}: PurchaseHistoryProps) {\r\n  const [epochs, setEpochs] = useState([]);\r\n  const [page, setPage] = useState(0)\r\n  const [initialized, setInitialized] = useState(false)\r\n\r\n  //Update User balances\r\n  useEffect(() => {\r\n    if (user === '') return;\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const epochsFromEvents = await getCouponEpochs(EQDS.addr, user);\r\n      const epochNumbers = epochsFromEvents.map(e => parseInt(e.epoch));\r\n      const balanceOfCoupons = await getBatchBalanceOfCoupons(EQDS.addr, user, epochNumbers);\r\n      const couponsExpirations = await getBatchCouponsExpiration(EQDS.addr, epochNumbers);\r\n\r\n      const couponEpochs = epochsFromEvents.map((epoch, i) => {\r\n        epoch.balance = new BigNumber(balanceOfCoupons[i]);\r\n        epoch.expiration = couponsExpirations[i];\r\n        return epoch;\r\n      });\r\n\r\n      if (!isCancelled) {\r\n        // @ts-ignore\r\n        setEpochs(couponEpochs);\r\n        setInitialized(true);\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user, totalRedeemable]);\r\n\r\n  return (\r\n    <DataView\r\n      fields={['Epoch', 'Purchased', 'Balance', 'Expires', '']}\r\n      status={initialized ? 'default' : 'loading'}\r\n      // @ts-ignore\r\n      entries={hideRedeemed ? epochs.filter((epoch) => !epoch.balance.isZero()) : epochs}\r\n      entriesPerPage={10}\r\n      page={page}\r\n      onPageChange={setPage}\r\n      renderEntry={(epoch) => [\r\n        epoch.epoch.toString(),\r\n        formatBN(toTokenUnitsBN(epoch.coupons, EQD.decimals), 2),\r\n        formatBN(toTokenUnitsBN(epoch.balance, EQD.decimals), 2),\r\n        epoch.expiration.toString(),\r\n        <Button\r\n          icon={<IconCirclePlus />}\r\n          label=\"Redeem\"\r\n          onClick={() => redeemCoupons(\r\n            EQDS.addr,\r\n            epoch.epoch,\r\n            epoch.balance.isGreaterThan(toBaseUnitBN(totalRedeemable, EQD.decimals))\r\n              ? toBaseUnitBN(totalRedeemable, EQD.decimals)\r\n              : epoch.balance\r\n          )}\r\n          disabled={epoch.balance.isZero()}\r\n        />\r\n      ]}\r\n    />\r\n  );\r\n}\r\n\r\nexport default PurchaseHistory;\r\n","import React, { useState } from 'react';\r\nimport { Modal, Button, useTheme } from '@aragon/ui';\r\nimport { getPreference, storePreference } from \"../../utils/storage\";\r\nimport { COUPON_EXPIRATION } from \"../../constants/values\";\r\n\r\nfunction ModalWarning() {\r\n  const storedShowWarning = getPreference('showCouponWarning', '1');\r\n  const [showWarning, setShowWarning] = useState(storedShowWarning === '1');\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Modal visible={showWarning} closeButton={false}>\r\n      <div style={{ width: '100%' }}>\r\n        <div style={{ fontSize: 24, padding: 3, color: theme.warning }}>\r\n          Warning\r\n        </div>\r\n\r\n        <div style={{\r\n          marginLeft: '3%',\r\n          fontSize: 16,\r\n          padding: 5\r\n        }}>\r\n          <div>\r\n            By purchasing coupons the buyer incurs significant risk of loss.\r\n            Coupons will only become redeemable during the next supply\r\n            expansion. Each expansionary epoch, a tranche of rewards are\r\n            reserved for coupon redemptions by the DAO. At that time, the\r\n            redemption process is first come, first served. Coupon redemption\r\n            is not guaranteed.\r\n          </div>\r\n\r\n          <div style={{\r\n            padding: 10,\r\n            textAlign: 'center',\r\n            color: theme.warningSurfaceContent\r\n          }}>\r\n            Coupons will expire worthless if not redeemed\r\n            within {COUPON_EXPIRATION} epochs.\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ textAlign: 'right' }}>\r\n          <Button\r\n            label={'I understand'}\r\n            onClick={() => {\r\n              storePreference('showCouponWarning', '0');\r\n              setShowWarning(false);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ModalWarning;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Header } from '@aragon/ui';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport {\r\n  getCouponPremium,\r\n  getTokenAllowance,\r\n  getTokenBalance,\r\n  getTokenTotalSupply, getTotalCoupons,\r\n  getTotalDebt, getTotalRedeemable,\r\n} from '../../utils/infura';\r\nimport { EQD, EQDS } from \"../../constants/tokens\";\r\nimport CouponMarketHeader from \"./Header\";\r\nimport { toTokenUnitsBN } from \"../../utils/number\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport PurchaseCoupons from \"./PurchaseCoupons\";\r\nimport PurchaseHistory from \"./PurchaseHistory\";\r\nimport ModalWarning from \"./ModalWarning\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport { getPreference, storePreference } from \"../../utils/storage\";\r\nimport { CheckBox } from \"../common\";\r\n\r\nconst ONE_COUPON = new BigNumber(10).pow(18);\r\n\r\nfunction CouponMarket({ user }: { user: string }) {\r\n  const { override } = useParams();\r\n  if (override) {\r\n    user = override;\r\n  }\r\n\r\n  const storedHideRedeemed = getPreference('hideRedeemedCoupons', '0');\r\n\r\n  const [balance, setBalance] = useState(new BigNumber(0));\r\n  const [allowance, setAllowance] = useState(new BigNumber(0));\r\n  const [supply, setSupply] = useState(new BigNumber(0));\r\n  const [coupons, setCoupons] = useState(new BigNumber(0));\r\n  const [redeemable, setRedeemable] = useState(new BigNumber(0));\r\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\r\n  const [debt, setDebt] = useState(new BigNumber(0));\r\n  const [hideRedeemed, setHideRedeemed] = useState(storedHideRedeemed === '1');\r\n\r\n  useEffect(() => {\r\n    if (user === '') {\r\n      setBalance(new BigNumber(0));\r\n      setAllowance(new BigNumber(0));\r\n      return;\r\n    }\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [balanceStr, allowanceStr] = await Promise.all([\r\n        getTokenBalance(EQD.addr, user),\r\n        getTokenAllowance(EQD.addr, user, EQDS.addr),\r\n      ]);\r\n\r\n      const userBalance = toTokenUnitsBN(balanceStr, EQD.decimals);\r\n\r\n      if (!isCancelled) {\r\n        setBalance(new BigNumber(userBalance));\r\n        setAllowance(new BigNumber(allowanceStr));\r\n        (new BigNumber(allowanceStr));\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [supplyStr, debtStr, couponsStr, redeemableStr] = await Promise.all([\r\n        getTokenTotalSupply(EQD.addr),\r\n        getTotalDebt(EQDS.addr),\r\n        getTotalCoupons(EQDS.addr),\r\n        getTotalRedeemable(EQDS.addr),\r\n      ]);\r\n\r\n      const totalSupply = toTokenUnitsBN(supplyStr, EQD.decimals);\r\n      const totalDebt = toTokenUnitsBN(debtStr, EQD.decimals);\r\n      const totalCoupons = toTokenUnitsBN(couponsStr, EQD.decimals);\r\n      const totalRedeemable = toTokenUnitsBN(redeemableStr, EQD.decimals);\r\n\r\n      if (!isCancelled) {\r\n        setSupply(new BigNumber(totalSupply));\r\n        setDebt(new BigNumber(totalDebt));\r\n        setCoupons(new BigNumber(totalCoupons));\r\n        setRedeemable(new BigNumber(totalRedeemable));\r\n\r\n        if (totalDebt.isGreaterThan(new BigNumber(1))) {\r\n          const couponPremiumStr = await getCouponPremium(EQDS.addr, ONE_COUPON)\r\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, EQD.decimals));\r\n        } else {\r\n          setCouponPremium(new BigNumber(0));\r\n        }\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <ModalWarning />\r\n      <div style={{ textAlign: 'center' }}>\r\n        <IconHeader icon={<i className=\"fas fa-ticket-alt\" />} text=\"Coupon Market\" />\r\n      </div>\r\n      <CouponMarketHeader\r\n        debt={debt}\r\n        supply={supply}\r\n        coupons={coupons}\r\n        premium={couponPremium}\r\n        redeemable={redeemable}\r\n      />\r\n      <Header>\r\n        <p style={{ fontSize: '20pt', color: '#000000' }}>Purchase</p>\r\n      </Header>\r\n\r\n\r\n      <PurchaseCoupons\r\n        user={user}\r\n        allowance={allowance}\r\n        balance={balance}\r\n        debt={debt}\r\n      />\r\n\r\n      <div style={{ display: 'flex', color: '#000000' }}>\r\n        <Header>\r\n          <p style={{ fontSize: '20pt' }}>Coupons</p>\r\n        </Header>\r\n        <div style={{ marginLeft: 'auto', alignSelf: 'flex-end' }}>\r\n          <CheckBox\r\n            text=\"Hide Redeemed\"\r\n            onCheck={(checked) => {\r\n              storePreference('hideRedeemedCoupons', checked ? '1' : '0');\r\n              setHideRedeemed(checked);\r\n            }}\r\n            checked={hideRedeemed}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <PurchaseHistory\r\n        user={user}\r\n        hideRedeemed={hideRedeemed}\r\n        totalRedeemable={redeemable}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CouponMarket;\r\n","import React from 'react';\r\n\r\nimport BigNumber from \"bignumber.js\";\r\nimport {AddressBlock, BalanceBlock} from \"../common\";\r\nimport TextBlock from \"../common/TextBlock\";\r\nimport {ownership} from \"../../utils/number\";\r\nimport {GOVERNANCE_PROPOSAL_THRESHOLD} from \"../../constants/values\";\r\n\r\ntype GovernanceHeaderProps = {\r\n  stake: BigNumber,\r\n  totalStake: BigNumber,\r\n  accountStatus: number,\r\n  implementation: string\r\n};\r\n\r\nconst STATUS_MAP = [\"Frozen\", \"Fluid\", \"Locked\"];\r\n\r\nconst GovernanceHeader = ({\r\n  stake, totalStake, accountStatus, implementation\r\n}: GovernanceHeaderProps) => (\r\n  <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\r\n    <div style={{ flexBasis: '25%' }}>\r\n      <BalanceBlock asset=\"DAO Ownership\" balance={ownership(stake, totalStake)} suffix=\"%\" />\r\n    </div>\r\n    <div style={{ flexBasis: '25%' }}>\r\n      <BalanceBlock asset=\"Proposal Threshold\" balance={GOVERNANCE_PROPOSAL_THRESHOLD.multipliedBy(100)} suffix=\"%\" />\r\n    </div>\r\n    <div style={{ flexBasis: '25%' }}>\r\n      <TextBlock label=\"Status\" text={STATUS_MAP[accountStatus]}/>\r\n    </div>\r\n    <div style={{ flexBasis: '25%' }}>\r\n      <AddressBlock label=\"Implementation\" address={implementation} />\r\n    </div>\r\n  </div>\r\n);\r\n\r\n\r\nexport default GovernanceHeader;\r\n","import {GOVERNANCE_PROPOSAL_THRESHOLD, GOVERNANCE_QUORUM} from \"../constants/values\";\r\nimport BigNumber from \"bignumber.js\";\r\n\r\nexport function proposalStatus(epoch, start, period, initialized, approve, reject, total): string {\r\n  if (start === 0) {\r\n    return \"N/A\";\r\n  }\r\n  if (epoch < start) {\r\n    return \"Unknown\";\r\n  }\r\n  if (epoch < (start + period)) {\r\n    return \"Voting\"\r\n  }\r\n  if (initialized) {\r\n    return \"Committed\"\r\n  }\r\n\r\n  if (epoch < (start + period)) {\r\n    return \"Rejected\"; // Not ended\r\n  }\r\n  if (approve.plus(reject).dividedBy(total).comparedTo(GOVERNANCE_QUORUM) < 0) {\r\n    return \"Rejected\"; // Didn't meet quorum\r\n  }\r\n  return approve.comparedTo(reject) > 0 ? \"Approved\" : \"Rejected\";\r\n}\r\n\r\nexport function canPropose(stake: BigNumber, totalStake: BigNumber): boolean {\r\n  return stake.div(totalStake).comparedTo(GOVERNANCE_PROPOSAL_THRESHOLD) >= 0;\r\n}","import React, { useState } from 'react';\r\nimport {\r\n  Box, TextInput, Button, IconToken,\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport { recordVote } from '../../utils/web3';\r\n\r\nimport { EQDS } from \"../../constants/tokens\";\r\nimport { canPropose } from \"../../utils/gov\";\r\n\r\ntype ProposeCandidateProps = {\r\n  user: string,\r\n  stake: BigNumber,\r\n  totalStake: BigNumber,\r\n  accountStatus: number\r\n};\r\n\r\nfunction plausibleCandidate(candidate: string): boolean {\r\n  return (/^(0x)[0-9a-fA-F]{40}$/i.test(candidate));\r\n}\r\n\r\nfunction ProposeCandidate({\r\n  user, stake, totalStake, accountStatus,\r\n}: ProposeCandidateProps) {\r\n  const [candidate, setCandidate] = useState(\"0x\");\r\n\r\n  return (\r\n    <Box heading=\"Propose\">\r\n      <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n        {/* User balance */}\r\n        <div style={{ flexBasis: '62%', paddingTop: '2%' }}>\r\n          <>\r\n            <TextInput\r\n              wide\r\n              value={candidate}\r\n              onChange={(event) => {\r\n                if (event.target.value) {\r\n                  setCandidate(event.target.value);\r\n                } else {\r\n                  setCandidate(\"0x\");\r\n                }\r\n              }}\r\n            />\r\n          </>\r\n        </div>\r\n        <div style={{ flexBasis: '6%' }} />\r\n        {/* Purchase coupons */}\r\n        <div style={{ flexBasis: '32%', paddingTop: '2%' }}>\r\n          <Button\r\n            wide\r\n            icon={<IconToken />}\r\n            label=\"Propose\"\r\n            onClick={() => {\r\n              recordVote(\r\n                EQDS.addr,\r\n                candidate,\r\n                1 // APPROVE\r\n              );\r\n            }}\r\n            disabled={user === '' || !canPropose(stake, totalStake) || !plausibleCandidate(candidate) || accountStatus === 1}\r\n          />\r\n        </div>\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default ProposeCandidate;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport {\r\n  Button, IconRight, DataView\r\n} from '@aragon/ui';\r\n\r\nimport {\r\n  getAllProposals,\r\n  getApproveFor,\r\n  getEpoch,\r\n  getIsInitialized,\r\n  getRejectFor,\r\n  getTokenTotalSupply, getTotalBondedAt\r\n} from '../../utils/infura';\r\nimport { EQDS } from \"../../constants/tokens\";\r\nimport { AddressBlock } from \"../common\";\r\nimport { proposalStatus } from \"../../utils/gov\";\r\nimport BigNumber from \"bignumber.js\";\r\n\r\ntype CandidateHistoryProps = {\r\n  user: string;\r\n};\r\n\r\ntype Proposal = {\r\n  index: number\r\n  candidate: string,\r\n  account: string,\r\n  start: number,\r\n  period: number,\r\n  status: string\r\n}\r\n\r\nasync function formatProposals(epoch: number, proposals: any[]): Promise<Proposal[]> {\r\n  const currentTotalStake = await getTokenTotalSupply(EQDS.addr);\r\n  const initializeds = await Promise.all(proposals.map((p) => getIsInitialized(EQDS.addr, p.candidate)));\r\n  const approves = await Promise.all(proposals.map((p) => getApproveFor(EQDS.addr, p.candidate)));\r\n  const rejecteds = await Promise.all(proposals.map((p) => getRejectFor(EQDS.addr, p.candidate)));\r\n  const supplyAts = await Promise.all(proposals.map(async (p) => {\r\n    const at = (p.start + p.period - 1);\r\n    if (epoch > at) {\r\n      return await getTotalBondedAt(EQDS.addr, at);\r\n    }\r\n    return currentTotalStake;\r\n  }));\r\n\r\n  for (let i = 0; i < proposals.length; i++) {\r\n    proposals[i].index = (proposals.length - i);\r\n    proposals[i].start = parseInt(proposals[i].start);\r\n    proposals[i].period = parseInt(proposals[i].period);\r\n    proposals[i].status = proposalStatus(\r\n      epoch,\r\n      proposals[i].start,\r\n      proposals[i].period,\r\n      initializeds[i],\r\n      new BigNumber(approves[i]),\r\n      new BigNumber(rejecteds[i]),\r\n      new BigNumber(supplyAts[i])\r\n    );\r\n  }\r\n  return proposals\r\n}\r\n\r\nfunction CandidateHistory({ user }: CandidateHistoryProps) {\r\n  const history = useHistory();\r\n  const [proposals, setProposals] = useState<Proposal[]>([]);\r\n  const [page, setPage] = useState(0)\r\n  const [initialized, setInitialized] = useState(false)\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [epochStr, allProposals] = await Promise.all([\r\n        getEpoch(EQDS.addr),\r\n        getAllProposals(EQDS.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        const formattedProposals = await formatProposals(parseInt(epochStr), allProposals);\r\n        setProposals(formattedProposals);\r\n        setInitialized(true);\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <DataView\r\n      fields={['Proposal', 'Candidate', 'Proposed', 'Complete', 'Proposer', 'Status', '']}\r\n      status={initialized ? 'default' : 'loading'}\r\n      // @ts-ignore\r\n      entries={proposals}\r\n      entriesPerPage={10}\r\n      page={page}\r\n      onPageChange={setPage}\r\n      renderEntry={(proposal) => [\r\n        \"#\" + proposal.index,\r\n        <AddressBlock label=\"\" address={proposal.candidate} />,\r\n        proposal.start.toString(),\r\n        (proposal.start + proposal.period).toString(),\r\n        <AddressBlock label=\"\" address={proposal.account} />,\r\n        proposal.status,\r\n        <Button\r\n          wide\r\n          icon={<IconRight />}\r\n          label=\"Go To\"\r\n          onClick={() => {\r\n            history.push(`/governance/candidate/${proposal.candidate}`);\r\n          }}\r\n        />\r\n      ]}\r\n    />\r\n  );\r\n}\r\n\r\nexport default CandidateHistory;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Header } from '@aragon/ui';\r\n\r\nimport {\r\n  getImplementation,\r\n  getStatusOf,\r\n  getTokenBalance,\r\n  getTokenTotalSupply,\r\n} from '../../utils/infura';\r\nimport { EQDS } from \"../../constants/tokens\";\r\nimport { toTokenUnitsBN } from \"../../utils/number\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport GovernanceHeader from \"./Header\";\r\nimport ProposeCandidate from \"./ProposeCandidate\";\r\nimport CandidateHistory from \"./CandidateHistory\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport { canPropose } from \"../../utils/gov\";\r\n\r\nfunction Governance({ user }: { user: string }) {\r\n\r\n  const [stake, setStake] = useState(new BigNumber(0));\r\n  const [totalStake, setTotalStake] = useState(new BigNumber(0));\r\n  const [userStatus, setUserStatus] = useState(0);\r\n  const [implementation, setImplementation] = useState(\"0x\");\r\n\r\n  useEffect(() => {\r\n    if (user === '') {\r\n      setStake(new BigNumber(0));\r\n      setUserStatus(0);\r\n      return;\r\n    }\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [statusStr, stakeStr] = await Promise.all([\r\n        getStatusOf(EQDS.addr, user),\r\n        getTokenBalance(EQDS.addr, user),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setStake(toTokenUnitsBN(stakeStr, EQDS.decimals));\r\n        setUserStatus(parseInt(statusStr, 10));\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [totalStakeStr, implementationStr] = await Promise.all([\r\n        getTokenTotalSupply(EQDS.addr),\r\n        getImplementation(EQDS.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setTotalStake(toTokenUnitsBN(totalStakeStr, EQDS.decimals));\r\n        setImplementation(implementationStr)\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <IconHeader icon={<i className=\"fas fa-poll\" />} text=\"Governance\" />\r\n\r\n      <GovernanceHeader\r\n        stake={stake}\r\n        totalStake={totalStake}\r\n        accountStatus={userStatus}\r\n        implementation={implementation}\r\n      />\r\n\r\n      {\r\n        canPropose(stake, totalStake) ?\r\n          <>\r\n            <Header primary=\"Propose Candidate\" />\r\n            <ProposeCandidate\r\n              user={user}\r\n              stake={stake}\r\n              totalStake={totalStake}\r\n              accountStatus={userStatus}\r\n            />\r\n          </>\r\n          :\r\n          ''\r\n      }\r\n\r\n      <Header primary=\"Candidate History\" />\r\n\r\n      <CandidateHistory user={user} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Governance;\r\n","import React from 'react';\r\nimport {\r\n  Box, Button, IconRotateLeft, IconCircleCheck, IconProhibited\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport {\r\n  BalanceBlock,\r\n} from '../common/index';\r\nimport { recordVote } from '../../utils/web3';\r\n\r\nimport { EQDS } from \"../../constants/tokens\";\r\nimport TextBlock from \"../common/TextBlock\";\r\n\r\ntype VoteProps = {\r\n  candidate: string,\r\n  stake: BigNumber,\r\n  vote: number,\r\n  status: number\r\n};\r\n\r\nconst VOTE_TYPE_MAP = [\"Undecided\", \"Approve\", \"Reject\"]\r\n\r\nfunction Vote({\r\n  candidate, stake, vote, status\r\n}: VoteProps) {\r\n  return (\r\n    <Box heading=\"Vote\">\r\n      <div style={{ display: 'flex' }}>\r\n        {/* User stake */}\r\n        <div style={{ width: '20%' }}>\r\n          <BalanceBlock asset=\"My Stake\" balance={stake} suffix={\"EQDS\"} />\r\n        </div>\r\n        <div style={{ width: '20%' }}>\r\n          <TextBlock label=\"My Vote\" text={VOTE_TYPE_MAP[vote]} />\r\n        </div>\r\n        {/* Remove vote for candidate */}\r\n        <div style={{ width: '18%', paddingTop: '2%' }}>\r\n          <Button\r\n            wide\r\n            icon={<IconRotateLeft />}\r\n            label=\"Unvote\"\r\n            onClick={() => {\r\n              recordVote(\r\n                EQDS.addr,\r\n                candidate,\r\n                0 // UNDECIDED\r\n              );\r\n            }}\r\n            disabled={status === 1 || vote === 0 || stake.isZero()}\r\n          />\r\n        </div>\r\n        {/* Vote to approve candidate */}\r\n        <div style={{ width: '3%' }} />\r\n        <div style={{ width: '18%', paddingTop: '2%' }}>\r\n          <Button\r\n            wide\r\n            icon={<IconCircleCheck />}\r\n            label=\"Accept\"\r\n            onClick={() => {\r\n              recordVote(\r\n                EQDS.addr,\r\n                candidate,\r\n                1 // APPROVE\r\n              );\r\n            }}\r\n            disabled={status === 1 || vote === 1 || stake.isZero()}\r\n          />\r\n        </div>\r\n        {/* Vote to reject candidate */}\r\n        <div style={{ width: '3%' }} />\r\n        <div style={{ width: '18%', paddingTop: '2%' }}>\r\n          <div style={{ display: 'flex' }}>\r\n            <Button\r\n              wide\r\n              icon={<IconProhibited />}\r\n              label=\"Reject\"\r\n              onClick={() => {\r\n                recordVote(\r\n                  EQDS.addr,\r\n                  candidate,\r\n                  2 // REJECT\r\n                );\r\n              }}\r\n              disabled={status === 1 || vote === 2 || stake.isZero()}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Vote;\r\n","import React from 'react';\r\n\r\nimport BigNumber from \"bignumber.js\";\r\nimport { BalanceBlock } from \"../common\";\r\n\r\ntype VoteHeaderProps = {\r\n  approveFor: BigNumber,\r\n  rejectFor: BigNumber,\r\n  totalStake: BigNumber,\r\n  showParticipation: boolean,\r\n};\r\n\r\nfunction approval(approve: BigNumber, reject: BigNumber): BigNumber {\r\n  return approve.multipliedBy(10000).dividedToIntegerBy(approve.plus(reject)).dividedBy(100)\r\n}\r\n\r\nfunction participation(approve: BigNumber, reject: BigNumber, totalStake: BigNumber): BigNumber {\r\n  return approve.plus(reject).multipliedBy(10000).dividedToIntegerBy(totalStake).dividedBy(100)\r\n}\r\n\r\nconst VoteHeader = ({\r\n  approveFor, rejectFor, totalStake, showParticipation\r\n}: VoteHeaderProps) => (\r\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\r\n    <div style={{ width: '25%' }}>\r\n      <BalanceBlock asset=\"Approve\" balance={approveFor} suffix={\"EQDS\"} />\r\n    </div>\r\n    <div style={{ width: '25%' }}>\r\n      <BalanceBlock asset=\"Reject\" balance={rejectFor} suffix={\"EQDS\"} />\r\n    </div>\r\n    <div style={{ width: '25%' }}>\r\n      <BalanceBlock asset=\"Approval\" balance={approval(approveFor, rejectFor)} suffix=\"%\" />\r\n    </div>\r\n    {showParticipation ?\r\n      <div style={{ width: '25%' }}>\r\n        <BalanceBlock asset=\"Participation\" balance={participation(approveFor, rejectFor, totalStake)} suffix=\"%\" />\r\n      </div> : ''\r\n    }\r\n  </div>\r\n);\r\n\r\n\r\nexport default VoteHeader;\r\n","import React from 'react';\r\n\r\nimport NumberBlock from \"../common/NumberBlock\";\r\n\r\ntype CommitHeaderProps = {\r\n  epoch: number\r\n  startEpoch: number,\r\n  periodEpoch: number,\r\n};\r\n\r\nconst CommitHeader = ({\r\n   epoch, startEpoch, periodEpoch,\r\n}: CommitHeaderProps) => (\r\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\r\n    <div style={{ width: '25%' }}>\r\n      <NumberBlock title=\"Epoch\" num={epoch} />\r\n    </div>\r\n    <div style={{ width: '25%' }}>\r\n      <NumberBlock title=\"Starts\" num={startEpoch} />\r\n    </div>\r\n    <div style={{ width: '25%' }}>\r\n      <NumberBlock title=\"Period\" num={periodEpoch} />\r\n    </div>\r\n  </div>\r\n);\r\n\r\n\r\nexport default CommitHeader;\r\n","import React from 'react';\r\nimport {\r\n  Box, Button, IconUpload\r\n} from '@aragon/ui';\r\nimport TextBlock from \"../common/TextBlock\";\r\nimport { EQDS } from \"../../constants/tokens\";\r\nimport { commit } from \"../../utils/web3\";\r\n\r\ntype CommitProps = {\r\n  user: string,\r\n  candidate: string,\r\n  epoch: number\r\n  startEpoch: number,\r\n  periodEpoch: number,\r\n  initialized: boolean,\r\n  approved: boolean\r\n};\r\n\r\nfunction Commit({\r\n  user, candidate, epoch, startEpoch, periodEpoch, initialized, approved,\r\n}: CommitProps) {\r\n  function status(epoch, startEpoch, periodEpoch, initialized, approved): string {\r\n    if (startEpoch === 0) {\r\n      return \"N/A\";\r\n    }\r\n    if (epoch < startEpoch) {\r\n      return \"Unknown\";\r\n    }\r\n    if (epoch < (startEpoch + periodEpoch)) {\r\n      return \"Voting\"\r\n    }\r\n    if (initialized) {\r\n      return \"Committed\"\r\n    }\r\n    if (approved) {\r\n      return \"Approved\"\r\n    }\r\n    return \"Rejected\"\r\n  }\r\n  const s = status(epoch, startEpoch, periodEpoch, initialized, approved);\r\n\r\n  return (\r\n    <Box heading=\"Commit\">\r\n      <div style={{ display: 'flex' }}>\r\n        {/* Status */}\r\n        <div style={{ width: '30%' }}>\r\n          <TextBlock label=\"Status\" text={s} />\r\n        </div>\r\n        <div style={{ width: '40%' }} />\r\n        {/* Commit candidate */}\r\n        <div style={{ width: '30%', paddingTop: '2%' }}>\r\n          <div style={{ display: 'flex' }}>\r\n            <Button\r\n              wide\r\n              icon={<IconUpload />}\r\n              label=\"Commit\"\r\n              onClick={() => {\r\n                commit(\r\n                  EQDS.addr,\r\n                  candidate\r\n                );\r\n              }}\r\n              disabled={user === '' || s !== 'Approved'}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Commit;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Header, IdentityBadge } from '@aragon/ui';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport {\r\n  getApproveFor, getEpoch, getIsInitialized, getPeriodFor,\r\n  getRecordedVote,\r\n  getRejectFor, getStartFor, getStatusOf,\r\n  getTokenBalance,\r\n  getTokenTotalSupply, getTotalBondedAt\r\n} from '../../utils/infura';\r\nimport { EQDS } from \"../../constants/tokens\";\r\nimport { toTokenUnitsBN } from \"../../utils/number\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport Vote from \"./Vote\";\r\nimport VoteHeader from \"./VoteHeader\";\r\nimport CommitHeader from \"./CommitHeader\";\r\nimport Commit from \"./Commit\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport { proposalStatus } from \"../../utils/gov\";\r\n\r\nfunction Candidate({ user }: { user: string }) {\r\n  const { candidate } = useParams();\r\n\r\n  const [approveFor, setApproveFor] = useState(new BigNumber(0));\r\n  const [rejectFor, setRejectFor] = useState(new BigNumber(0));\r\n  const [totalStake, setTotalStake] = useState(new BigNumber(0));\r\n  const [vote, setVote] = useState(0);\r\n  const [status, setStatus] = useState(0);\r\n  const [userStake, setUserStake] = useState(new BigNumber(0));\r\n  const [epoch, setEpoch] = useState(0);\r\n  const [startEpoch, setStartEpoch] = useState(0);\r\n  const [periodEpoch, setPeriodEpoch] = useState(0);\r\n  const [initialized, setInitialized] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user === '') {\r\n      setVote(0);\r\n      setStatus(0);\r\n      setUserStake(new BigNumber(0));\r\n      return;\r\n    }\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [\r\n        voteStr, statusStr, userStakeStr,\r\n      ] = await Promise.all([\r\n        getRecordedVote(EQDS.addr, user, candidate),\r\n        getStatusOf(EQDS.addr, user),\r\n        getTokenBalance(EQDS.addr, user),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setVote(parseInt(voteStr, 10));\r\n        setStatus(parseInt(statusStr, 10));\r\n        setUserStake(toTokenUnitsBN(userStakeStr, EQDS.decimals));\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user, candidate]);\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      let [\r\n        approveForStr, rejectForStr, totalStakeStr,\r\n        epochStr, startForStr, periodForStr, isInitialized\r\n      ] = await Promise.all([\r\n        getApproveFor(EQDS.addr, candidate),\r\n        getRejectFor(EQDS.addr, candidate),\r\n        getTokenTotalSupply(EQDS.addr),\r\n        getEpoch(EQDS.addr),\r\n        getStartFor(EQDS.addr, candidate),\r\n        getPeriodFor(EQDS.addr, candidate),\r\n        getIsInitialized(EQDS.addr, candidate),\r\n      ]);\r\n\r\n      const epochN = parseInt(epochStr, 10);\r\n      const startN = parseInt(startForStr, 10);\r\n      const periodN = parseInt(periodForStr, 10);\r\n\r\n      const endsAfter = (startN + periodN - 1);\r\n      if (epochN > endsAfter) {\r\n        totalStakeStr = await getTotalBondedAt(EQDS.addr, endsAfter);\r\n      }\r\n\r\n      if (!isCancelled) {\r\n        setApproveFor(toTokenUnitsBN(approveForStr, EQDS.decimals));\r\n        setRejectFor(toTokenUnitsBN(rejectForStr, EQDS.decimals));\r\n        setTotalStake(toTokenUnitsBN(totalStakeStr, EQDS.decimals));\r\n        setEpoch(epochN);\r\n        setStartEpoch(startN);\r\n        setPeriodEpoch(periodN);\r\n        setInitialized(isInitialized);\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [candidate]);\r\n\r\n  return (\r\n    <>\r\n      <IconHeader icon={<i className=\"fas fa-poll\" />} text=\"Candidate\" />\r\n      <IdentityBadge entity={candidate} shorten={false} />\r\n\r\n      <VoteHeader\r\n        approveFor={approveFor}\r\n        rejectFor={rejectFor}\r\n        totalStake={totalStake}\r\n        showParticipation={startEpoch > 106}\r\n      />\r\n\r\n      <Header primary=\"Vote\" />\r\n      <Vote\r\n        candidate={candidate}\r\n        stake={userStake}\r\n        vote={vote}\r\n        status={status}\r\n      />\r\n\r\n      <Header primary=\"Commit\" />\r\n      <CommitHeader\r\n        epoch={epoch}\r\n        startEpoch={startEpoch}\r\n        periodEpoch={periodEpoch}\r\n      />\r\n\r\n      <Commit\r\n        user={user}\r\n        candidate={candidate}\r\n        epoch={epoch}\r\n        startEpoch={startEpoch}\r\n        periodEpoch={periodEpoch}\r\n        initialized={initialized}\r\n        approved={proposalStatus(epoch, startEpoch, periodEpoch, false, approveFor, rejectFor, totalStake) === \"Approved\"}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Candidate;\r\n","import React from 'react';\r\n\r\nimport BigNumber from \"bignumber.js\";\r\n\r\nimport { Box, Distribution } from '@aragon/ui';\r\nimport { formatMoney, ownership } from \"../../utils/number\";\r\n\r\ntype RegulationHeaderProps = {\r\n  totalSupply: BigNumber,\r\n\r\n  totalBonded: BigNumber,\r\n  totalStaged: BigNumber,\r\n  totalRedeemable: BigNumber,\r\n\r\n  poolLiquidity: BigNumber,\r\n  poolRewarded: BigNumber,\r\n  poolClaimable: BigNumber,\r\n\r\n  legacyPoolRewarded: BigNumber,\r\n  legacyPoolClaimable: BigNumber,\r\n\r\n  totalDebt: BigNumber,\r\n  totalCoupons: BigNumber,\r\n  couponPremium: BigNumber,\r\n};\r\n\r\nconst RegulationHeader = ({\r\n  totalSupply,\r\n  totalBonded, totalStaged, totalRedeemable,\r\n  poolLiquidity, poolRewarded, poolClaimable,\r\n  legacyPoolRewarded, legacyPoolClaimable,\r\n  totalDebt, totalCoupons, couponPremium\r\n}: RegulationHeaderProps) => {\r\n  const daoTotalSupply = totalBonded.plus(totalStaged).plus(totalRedeemable);\r\n  const poolTotalSupply = poolLiquidity.plus(poolRewarded).plus(poolClaimable);\r\n  // const legacyPoolTotalSupply = legacyPoolRewarded.plus(legacyPoolClaimable);\r\n  const circulatingSupply = totalSupply.minus(daoTotalSupply).minus(poolTotalSupply);\r\n\r\n  return (\r\n    <>\r\n\r\n      <div className='row'>\r\n        <div className='col-md-4' style={{ padding: '2%' }}>\r\n          <Box heading=\"Supply Allocation\">\r\n            <Distribution\r\n              heading={`${formatMoney(totalSupply.toNumber())}`}\r\n              items={[\r\n                { item: 'DAO', percentage: +(ownership(daoTotalSupply, totalSupply).toNumber().toFixed(2)) },\r\n                { item: 'Uniswap', percentage: +(ownership(poolTotalSupply, totalSupply).toNumber().toFixed(2)) },\r\n                { item: 'Circulating', percentage: +(ownership(circulatingSupply, totalSupply).toNumber().toFixed(2)) },\r\n              ]}\r\n            />\r\n          </Box>\r\n        </div>\r\n        <div className='col-md-4' style={{ padding: '2%' }}>\r\n          <Box heading=\"DAO Breakdown\">\r\n            <Distribution\r\n              heading={`${formatMoney(daoTotalSupply.toNumber())}`}\r\n              items={[\r\n                { item: 'Bonded', percentage: +(ownership(totalBonded, daoTotalSupply).toNumber().toFixed(2)) },\r\n                { item: 'Staged', percentage: +(ownership(totalStaged, daoTotalSupply).toNumber().toFixed(2)) },\r\n                { item: 'Redeemable', percentage: +(ownership(totalRedeemable, daoTotalSupply).toNumber().toFixed(2)) },\r\n              ]}\r\n            />\r\n          </Box>\r\n        </div>\r\n        <div className='col-md-4' style={{ padding: '2%' }}>\r\n          <Box heading=\"Uniswap Breakdown\">\r\n            <Distribution\r\n              heading={`${formatMoney(poolTotalSupply.toNumber())}`}\r\n              items={[\r\n                { item: 'Liquidity', percentage: +(ownership(poolLiquidity, poolTotalSupply).toNumber().toFixed(2)) },\r\n                { item: 'Rewarded', percentage: +(ownership(poolRewarded, poolTotalSupply).toNumber().toFixed(2)) },\r\n                { item: 'Claimable', percentage: +(ownership(poolClaimable, poolTotalSupply).toNumber().toFixed(2)) },\r\n              ]}\r\n            />\r\n          </Box>\r\n        </div>\r\n      </div>\r\n\r\n    </>\r\n  );\r\n}\r\n\r\n\r\nexport default RegulationHeader;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { DataView } from '@aragon/ui';\r\n\r\nimport { getAllRegulations } from '../../utils/infura';\r\nimport { EQD, EQDS } from \"../../constants/tokens\";\r\nimport { formatBN, toTokenUnitsBN } from \"../../utils/number\";\r\nimport BigNumber from \"bignumber.js\";\r\n\r\ntype RegulationHistoryProps = {\r\n  user: string,\r\n};\r\n\r\ntype Regulation = {\r\n  type: string,\r\n  data: RegulationEntry\r\n}\r\n\r\ntype RegulationEntry = {\r\n  epoch: string;\r\n  price: string;\r\n  deltaRedeemable: string;\r\n  deltaDebt: string;\r\n  deltaBonded: string;\r\n}\r\n\r\nfunction formatPrice(type, data) {\r\n  return type === 'NEUTRAL' ? '1.00' : formatBN(toTokenUnitsBN(new BigNumber(data.price), EQD.decimals), 3);\r\n}\r\n\r\nfunction formatDeltaRedeemable(type, data) {\r\n  return type === 'INCREASE' ?\r\n    '+' + formatBN(toTokenUnitsBN(new BigNumber(data.newRedeemable), EQD.decimals), 2) :\r\n    '+0.00';\r\n}\r\n\r\nfunction formatDeltaDebt(type, data) {\r\n  return type === 'INCREASE' ?\r\n    '-' + formatBN(toTokenUnitsBN(new BigNumber(data.lessDebt), EQD.decimals), 2) :\r\n    type === 'DECREASE' ?\r\n      '+' + formatBN(toTokenUnitsBN(new BigNumber(data.newDebt), EQD.decimals), 2) :\r\n      '+0.00';\r\n}\r\n\r\nfunction formatDeltaBonded(type, data) {\r\n  return type === 'INCREASE' ?\r\n    '+' + formatBN(toTokenUnitsBN(new BigNumber(data.newBonded), EQD.decimals), 2) :\r\n    '+0.00';\r\n}\r\n\r\nfunction renderEntry({ type, data }: Regulation): string[] {\r\n  return [\r\n    data.epoch.toString(),\r\n    formatPrice(type, data),\r\n    formatDeltaRedeemable(type, data),\r\n    formatDeltaDebt(type, data),\r\n    formatDeltaBonded(type, data),\r\n  ]\r\n}\r\n\r\nfunction RegulationHistory({\r\n  user,\r\n}: RegulationHistoryProps) {\r\n  const [regulations, setRegulations] = useState<Regulation[]>([]);\r\n  const [page, setPage] = useState(0)\r\n  const [initialized, setInitialized] = useState(false)\r\n\r\n  //Update User balances\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [allRegulations] = await Promise.all([\r\n        getAllRegulations(EQDS.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setRegulations(allRegulations);\r\n        setInitialized(true);\r\n      }\r\n    }\r\n\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <DataView\r\n      fields={['Epoch', 'Price', 'Δ Redeemable', 'Δ Debt', 'Δ Bonded']}\r\n      status={initialized ? 'default' : 'loading'}\r\n      entries={regulations}\r\n      entriesPerPage={10}\r\n      page={page}\r\n      onPageChange={setPage}\r\n      renderEntry={renderEntry}\r\n    />\r\n  );\r\n}\r\n\r\nexport default RegulationHistory;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Header } from '@aragon/ui';\r\n\r\nimport {\r\n  getCouponPremium,\r\n  getPoolTotalClaimable, getPoolTotalRewarded, getTokenBalance,\r\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\r\n} from '../../utils/infura';\r\nimport { EQD, EQDS, UNI } from \"../../constants/tokens\";\r\nimport { toTokenUnitsBN } from \"../../utils/number\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport RegulationHeader from \"./Header\";\r\nimport RegulationHistory from \"./RegulationHistory\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport { getLegacyPoolAddress, getPoolAddress } from \"../../utils/pool\";\r\n\r\nconst ONE_COUPON = new BigNumber(10).pow(18);\r\n\r\nfunction Regulation({ user }: { user: string }) {\r\n\r\n  const [totalSupply, setTotalSupply] = useState(new BigNumber(0));\r\n  const [totalBonded, setTotalBonded] = useState(new BigNumber(0));\r\n  const [totalStaged, setTotalStaged] = useState(new BigNumber(0));\r\n  const [totalRedeemable, setTotalRedeemable] = useState(new BigNumber(0));\r\n  const [poolLiquidity, setPoolLiquidity] = useState(new BigNumber(0));\r\n  const [poolTotalRewarded, setPoolTotalRewarded] = useState(new BigNumber(0));\r\n  const [poolTotalClaimable, setPoolTotalClaimable] = useState(new BigNumber(0));\r\n  const [legacyPoolTotalRewarded, setLegacyPoolTotalRewarded] = useState(new BigNumber(0));\r\n  const [legacyPoolTotalClaimable, setLegacyPoolTotalClaimable] = useState(new BigNumber(0));\r\n  const [totalDebt, setTotalDebt] = useState(new BigNumber(0));\r\n  const [totalCoupons, setTotalCoupons] = useState(new BigNumber(0));\r\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const poolAddress = await getPoolAddress();\r\n      const legacyPoolAddress = getLegacyPoolAddress(poolAddress);\r\n\r\n      const [\r\n        totalSupplyStr,\r\n        totalBondedStr,\r\n        totalStagedStr,\r\n        totalRedeemableStr,\r\n        poolLiquidityStr,\r\n        poolTotalRewardedStr, poolTotalClaimableStr,\r\n        legacyPoolTotalRewardedStr, legacyPoolTotalClaimableStr,\r\n        totalDebtStr, totalCouponsStr\r\n      ] = await Promise.all([\r\n        getTokenTotalSupply(EQD.addr),\r\n\r\n        getTotalBonded(EQDS.addr),\r\n        getTotalStaged(EQDS.addr),\r\n        getTotalRedeemable(EQDS.addr),\r\n\r\n        getTokenBalance(EQD.addr, UNI.addr),\r\n        getPoolTotalRewarded(poolAddress),\r\n        getPoolTotalClaimable(poolAddress),\r\n\r\n        getPoolTotalRewarded(legacyPoolAddress),\r\n        getPoolTotalClaimable(legacyPoolAddress),\r\n\r\n        getTotalDebt(EQDS.addr),\r\n        getTotalCoupons(EQDS.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setTotalSupply(toTokenUnitsBN(totalSupplyStr, EQD.decimals));\r\n\r\n        setTotalBonded(toTokenUnitsBN(totalBondedStr, EQD.decimals));\r\n        setTotalStaged(toTokenUnitsBN(totalStagedStr, EQD.decimals));\r\n        setTotalRedeemable(toTokenUnitsBN(totalRedeemableStr, EQD.decimals));\r\n\r\n        setPoolLiquidity(toTokenUnitsBN(poolLiquidityStr, EQD.decimals));\r\n        setPoolTotalRewarded(toTokenUnitsBN(poolTotalRewardedStr, EQD.decimals));\r\n        setPoolTotalClaimable(toTokenUnitsBN(poolTotalClaimableStr, EQD.decimals));\r\n\r\n        setLegacyPoolTotalRewarded(toTokenUnitsBN(legacyPoolTotalRewardedStr, EQD.decimals));\r\n        setLegacyPoolTotalClaimable(toTokenUnitsBN(legacyPoolTotalClaimableStr, EQD.decimals));\r\n\r\n        setTotalDebt(toTokenUnitsBN(totalDebtStr, EQD.decimals));\r\n        setTotalCoupons(toTokenUnitsBN(totalCouponsStr, EQD.decimals));\r\n\r\n        if (new BigNumber(totalDebtStr).isGreaterThan(ONE_COUPON)) {\r\n          const couponPremiumStr = await getCouponPremium(EQDS.addr, ONE_COUPON)\r\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, EQD.decimals));\r\n        } else {\r\n          setCouponPremium(new BigNumber(0));\r\n        }\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n\r\n      <div style={{ textAlign: 'center' }}>\r\n        <IconHeader icon={<div className=\"modal\" style={{ display: 'block', position: 'relative' }}><i className=\"fas fa-chart-area\" /></div>} text=\"Supply Regulation\" />\r\n      </div>\r\n\r\n      <RegulationHeader\r\n        totalSupply={totalSupply}\r\n\r\n        totalBonded={totalBonded}\r\n        totalStaged={totalStaged}\r\n        totalRedeemable={totalRedeemable}\r\n\r\n        poolLiquidity={poolLiquidity}\r\n        poolRewarded={poolTotalRewarded}\r\n        poolClaimable={poolTotalClaimable}\r\n\r\n        legacyPoolRewarded={legacyPoolTotalRewarded}\r\n        legacyPoolClaimable={legacyPoolTotalClaimable}\r\n\r\n        totalDebt={totalDebt}\r\n        totalCoupons={totalCoupons}\r\n        couponPremium={couponPremium}\r\n      />\r\n\r\n      <Header primary=\"Regulation History\" />\r\n\r\n      <RegulationHistory\r\n        user={user}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Regulation;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconCirclePlus, IconCircleMinus, IconLock\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport {\r\n  BalanceBlock, MaxButton,\r\n} from '../common/index';\r\nimport { approve, depositPool, withdrawPool } from '../../utils/web3';\r\nimport { isPos, toBaseUnitBN } from '../../utils/number';\r\nimport { UNI } from \"../../constants/tokens\";\r\nimport { MAX_UINT256 } from \"../../constants/values\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\n\r\ntype WithdrawDepositProps = {\r\n  poolAddress: string\r\n  user: string\r\n  balance: BigNumber,\r\n  allowance: BigNumber,\r\n  stagedBalance: BigNumber,\r\n  status: number\r\n};\r\n\r\nfunction WithdrawDeposit({\r\n  poolAddress, user, balance, allowance, stagedBalance, status\r\n}: WithdrawDepositProps) {\r\n  const [depositAmount, setDepositAmount] = useState(new BigNumber(0));\r\n  const [withdrawAmount, setWithdrawAmount] = useState(new BigNumber(0));\r\n\r\n  return (\r\n    <div className=\"modal\" style={{ marginBottom: '2%', display: 'block', position: 'relative' }}>\r\n      <h2 style={{ padding: '2%' }} id=\"nav-breadcrumbs\" className=\"bg-warning\">Stage</h2>\r\n      <div className=\"bs-component\" style={{ padding: '2%', background: '#ffffff', color: '#000000' }}>\r\n        {allowance.comparedTo(MAX_UINT256) === 0 ?\r\n          <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n            {/* total Issued */}\r\n            <div style={{ flexBasis: '32%' }}>\r\n              <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"CAKE-LP\"} />\r\n            </div>\r\n            {/* Deposit CAKE-LP into Pool */}\r\n            <div style={{ flexBasis: '33%', paddingTop: '2%' }}>\r\n              <div style={{ display: 'flex' }}>\r\n                <div style={{ width: '60%', minWidth: '6em' }}>\r\n                  <>\r\n                    <BigNumberInput\r\n                      adornment=\"CAKE-LP\"\r\n                      value={depositAmount}\r\n                      setter={setDepositAmount}\r\n                      disabled={status !== 0}\r\n                    />\r\n                    <MaxButton\r\n                      onClick={() => {\r\n                        setDepositAmount(balance);\r\n                      }}\r\n                    />\r\n                  </>\r\n                </div>\r\n                <div style={{ width: '40%', minWidth: '7em' }}>\r\n                  <Button\r\n                    wide\r\n                    icon={status === 0 ? <IconCirclePlus /> : <IconLock />}\r\n                    label=\"Deposit\"\r\n                    onClick={() => {\r\n                      depositPool(\r\n                        poolAddress,\r\n                        toBaseUnitBN(depositAmount, UNI.decimals),\r\n                        (hash) => setDepositAmount(new BigNumber(0))\r\n                      );\r\n                    }}\r\n                    disabled={poolAddress === '' || status !== 0 || !isPos(depositAmount)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div style={{ flexBasis: '2%' }} />\r\n            {/* Withdraw Døllar from DAO */}\r\n            <div style={{ flexBasis: '33%', paddingTop: '2%' }}>\r\n              <div style={{ display: 'flex' }}>\r\n                <div style={{ width: '60%', minWidth: '6em' }}>\r\n                  <>\r\n                    <BigNumberInput\r\n                      adornment=\"CAKE-LP\"\r\n                      value={withdrawAmount}\r\n                      setter={setWithdrawAmount}\r\n                      disabled={status !== 0}\r\n                    />\r\n                    <MaxButton\r\n                      onClick={() => {\r\n                        setWithdrawAmount(stagedBalance);\r\n                      }}\r\n                    />\r\n                  </>\r\n                </div>\r\n                <div style={{ width: '40%', minWidth: '7em' }}>\r\n                  <Button\r\n                    wide\r\n                    icon={status === 0 ? <IconCircleMinus /> : <IconLock />}\r\n                    label=\"Withdraw\"\r\n                    onClick={() => {\r\n                      withdrawPool(\r\n                        poolAddress,\r\n                        toBaseUnitBN(withdrawAmount, UNI.decimals),\r\n                        (hash) => setWithdrawAmount(new BigNumber(0))\r\n                      );\r\n                    }}\r\n                    disabled={poolAddress === '' || status !== 0 || !isPos(withdrawAmount)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          :\r\n          <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n            {/* total Issued */}\r\n            <div style={{ flexBasis: '32%' }}>\r\n              <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"CAKE-LP\"} />\r\n            </div>\r\n            <div style={{ flexBasis: '35%' }} />\r\n            {/* Approve Pool to spend CAKE-LP */}\r\n            <div style={{ flexBasis: '33%', paddingTop: '2%' }}>\r\n              <Button\r\n                wide\r\n                icon={<IconCirclePlus />}\r\n                label=\"Approve\"\r\n                onClick={() => {\r\n                  approve(UNI.addr, poolAddress);\r\n                }}\r\n                disabled={poolAddress === '' || user === ''}\r\n              />\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default WithdrawDeposit;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconCirclePlus, IconCircleMinus, IconCaution\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport {\r\n  BalanceBlock, MaxButton,\r\n} from '../common/index';\r\nimport { bondPool, unbondPool } from '../../utils/web3';\r\nimport { isPos, toBaseUnitBN } from '../../utils/number';\r\nimport { UNI } from \"../../constants/tokens\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\nimport TextBlock from \"../common/TextBlock\";\r\n\r\ntype BondUnbondProps = {\r\n  poolAddress: string,\r\n  staged: BigNumber,\r\n  bonded: BigNumber,\r\n  status: number,\r\n  lockup: number,\r\n};\r\n\r\nfunction BondUnbond({\r\n  poolAddress, staged, bonded, status, lockup\r\n}: BondUnbondProps) {\r\n  const [bondAmount, setBondAmount] = useState(new BigNumber(0));\r\n  const [unbondAmount, setUnbondAmount] = useState(new BigNumber(0));\r\n\r\n  return (\r\n    <div style={{ marginBottom: '2%', display: 'block', position: 'relative', background: '#ffffff' }}>\r\n      <h2 style={{ padding: '2%' }} className=\"bg-warning\">Bond</h2>\r\n      <div className=\"bs-component\" style={{ padding: '2%', color: '#000000' }}>\r\n        <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n          {/* Total bonded */}\r\n          <div style={{ flexBasis: '16%' }}>\r\n            <BalanceBlock asset=\"Bonded\" balance={bonded} suffix={\"CAKE-LP\"} />\r\n          </div>\r\n          {/* Exit lockup */}\r\n          <div style={{ flexBasis: '16%' }}>\r\n            <TextBlock label=\"Exit Lockup\" text={lockup === 0 ? \"\" : lockup === 1 ? \"1 epoch\" : `${lockup} epochs`} />\r\n          </div>\r\n          {/* Bond CAKE-LP within Pool */}\r\n          <div style={{ flexBasis: '33%', paddingTop: '2%' }}>\r\n            <div style={{ display: 'flex' }}>\r\n              <div style={{ width: '60%', minWidth: '6em' }}>\r\n                <>\r\n                  <BigNumberInput\r\n                    adornment=\"CAKE-LP\"\r\n                    value={bondAmount}\r\n                    setter={setBondAmount}\r\n                  />\r\n                  <MaxButton\r\n                    onClick={() => {\r\n                      setBondAmount(staged);\r\n                    }}\r\n                  />\r\n                </>\r\n              </div>\r\n              <div style={{ width: '40%', minWidth: '7em' }}>\r\n                <Button\r\n                  wide\r\n                  icon={status === 0 ? <IconCirclePlus /> : <IconCaution />}\r\n                  label=\"Bond\"\r\n                  onClick={() => {\r\n                    bondPool(\r\n                      poolAddress,\r\n                      toBaseUnitBN(bondAmount, UNI.decimals),\r\n                      (hash) => setBondAmount(new BigNumber(0))\r\n                    );\r\n                  }}\r\n                  disabled={poolAddress === '' || !isPos(bondAmount)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div style={{ flexBasis: '2%' }} />\r\n          {/* Unbond CAKE-LP within Pool */}\r\n          <div style={{ flexBasis: '33%', paddingTop: '2%' }}>\r\n            <div style={{ display: 'flex' }}>\r\n              <div style={{ width: '60%', minWidth: '6em' }}>\r\n                <>\r\n                  <BigNumberInput\r\n                    adornment=\"CAKE-LP\"\r\n                    value={unbondAmount}\r\n                    setter={setUnbondAmount}\r\n                  />\r\n                  <MaxButton\r\n                    onClick={() => {\r\n                      setUnbondAmount(bonded);\r\n                    }}\r\n                  />\r\n                </>\r\n              </div>\r\n              <div style={{ width: '40%', minWidth: '7em' }}>\r\n                <Button\r\n                  wide\r\n                  icon={status === 0 ? <IconCircleMinus /> : <IconCaution />}\r\n                  label=\"Unbond\"\r\n                  onClick={() => {\r\n                    unbondPool(\r\n                      poolAddress,\r\n                      toBaseUnitBN(unbondAmount, UNI.decimals),\r\n                      (hash) => setUnbondAmount(new BigNumber(0))\r\n                    );\r\n                  }}\r\n                  disabled={poolAddress === '' || !isPos(unbondAmount)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div style={{ width: '100%', paddingTop: '2%', textAlign: 'center' }}>\r\n          <span style={{ opacity: 0.5 }}> Bonding events will restart the lockup timer </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BondUnbond;\r\n","import React, { Fragment } from 'react';\r\nimport BigNumber from 'bignumber.js';\r\nimport { Button } from '@aragon/ui';\r\nimport styled from 'styled-components'\r\n\r\nimport { BalanceBlock } from '../common/index';\r\nimport TextBlock from \"../common/TextBlock\";\r\nimport { ownership } from \"../../utils/number\";\r\nimport { PANCAKE_SUPPLY } from \"../../constants/contracts\";\r\n\r\ntype PoolPageHeaderProps = {\r\n  accountUNIBalance: BigNumber,\r\n  accountBondedBalance: BigNumber,\r\n  accountRewardedEQDBalance: BigNumber,\r\n  accountClaimableEQDBalance: BigNumber,\r\n  poolTotalBonded: BigNumber,\r\n  accountPoolStatus: number,\r\n  unlocked: number,\r\n  fluidEpoch: any,\r\n  user: string\r\n};\r\n\r\nconst STATUS_MAP = [\"Unlocked\", \"Locked\"];\r\n\r\nfunction status(accountStatus) {\r\n  return STATUS_MAP[accountStatus]\r\n}\r\n\r\nconst PoolPageHeader = ({\r\n  accountUNIBalance,\r\n  accountBondedBalance,\r\n  accountRewardedEQDBalance,\r\n  accountClaimableEQDBalance,\r\n  poolTotalBonded,\r\n  accountPoolStatus,\r\n  unlocked,\r\n  fluidEpoch,\r\n  user\r\n}: PoolPageHeaderProps) => (\r\n  <Container>\r\n    <div>\r\n      <BalanceBlock asset=\"Balance\" balance={accountUNIBalance} suffix={\" CAKE-LP\"} />\r\n      <Button\r\n        label=\"Get CAKE-LP Manually\"\r\n        icon={<i className=\"fas fa-exchange-alt\" />}\r\n        onClick={() => window.open(PANCAKE_SUPPLY, \"_blank\")}\r\n      />\r\n    </div>\r\n    <div>\r\n      <BalanceBlock asset=\"Rewarded\" balance={accountRewardedEQDBalance} suffix={\" EQD\"} />\r\n    </div>\r\n    <div>\r\n      <BalanceBlock asset=\"Claimable\" balance={accountClaimableEQDBalance} suffix={\" EQD\"} />\r\n    </div>\r\n    <div>\r\n      <BalanceBlock asset=\"Pool Ownership\" balance={ownership(accountBondedBalance, poolTotalBonded)} suffix={\"%\"} />\r\n    </div>\r\n    <div>\r\n      <TextBlock label=\"Pool Status\" text={status(accountPoolStatus)} />\r\n      {\r\n        user !== '' && (\r\n          <Fragment>\r\n            <p>{\r\n              isNaN(fluidEpoch)\r\n                ? 'You did not bonded or unbonded before.'\r\n                : `You last bonded or unbonded at epoch ${fluidEpoch}.`\r\n            } </p>\r\n            {\r\n              accountPoolStatus !== 0 && (\r\n                <p>Unlocked at epoch {fluidEpoch + 24}.</p>\r\n              )\r\n            }\r\n          </Fragment>\r\n        )\r\n      }\r\n    </div>\r\n  </Container>\r\n);\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  padding: 2%;\r\n  justify-content: space-between;\r\n  @media (max-width: 522px) {\r\n    display: block;\r\n  }\r\n`\r\n\r\nexport default PoolPageHeader;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconArrowDown\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport {\r\n  BalanceBlock, MaxButton,\r\n} from '../common/index';\r\nimport { claimPool } from '../../utils/web3';\r\nimport { isPos, toBaseUnitBN } from '../../utils/number';\r\nimport { EQD } from \"../../constants/tokens\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\n\r\ntype ClaimProps = {\r\n  poolAddress: string\r\n  claimable: BigNumber,\r\n  status: number\r\n};\r\n\r\nfunction Claim({\r\n  poolAddress, claimable, status\r\n}: ClaimProps) {\r\n  const [claimAmount, setClaimAmount] = useState(new BigNumber(0));\r\n\r\n  return (\r\n    <div style={{ marginBottom: '2%', display: 'block', position: 'relative', background: '#ffffff' }}>\r\n      <h2 style={{ padding: '2%' }} className=\"bg-warning\">Claim</h2>\r\n      <div className=\"bs-component\" style={{ padding: '2%', color: '#000000' }}>\r\n        <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n          {/* total Issued */}\r\n          <div style={{ flexBasis: '32%' }}>\r\n            <BalanceBlock asset=\"Claimable\" balance={claimable} suffix={\"EQD\"} />\r\n          </div>\r\n          {/* Deposit UNI-V2 into Pool */}\r\n          <div style={{ flexBasis: '35%' }} />\r\n          <div style={{ flexBasis: '33%', paddingTop: '2%' }}>\r\n            <div style={{ display: 'flex' }}>\r\n              <div style={{ width: '60%', minWidth: '6em' }}>\r\n                <>\r\n                  <BigNumberInput\r\n                    adornment=\"EQD\"\r\n                    value={claimAmount}\r\n                    setter={setClaimAmount}\r\n                    disabled={status !== 0}\r\n                  />\r\n                  <MaxButton\r\n                    onClick={() => {\r\n                      setClaimAmount(claimable);\r\n                    }}\r\n                  />\r\n                </>\r\n              </div>\r\n              <div style={{ width: '40%', minWidth: '6em' }}>\r\n                <Button\r\n                  wide\r\n                  icon={<IconArrowDown />}\r\n                  label=\"Claim\"\r\n                  onClick={() => {\r\n                    claimPool(\r\n                      poolAddress,\r\n                      toBaseUnitBN(claimAmount, EQD.decimals),\r\n                      (hash) => setClaimAmount(new BigNumber(0))\r\n                    );\r\n                  }}\r\n                  disabled={poolAddress === '' || status !== 0 || !isPos(claimAmount)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div style={{ width: '100%', paddingTop: '2%', textAlign: 'center' }}>\r\n          <span style={{ opacity: 0.5 }}> Unbond to make rewards claimable after your status is Unlocked </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Claim;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconArrowUp, IconCirclePlus\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport { BalanceBlock, MaxButton, PriceSection } from '../common/index';\r\nimport { approve, providePool } from '../../utils/web3';\r\nimport { isPos, toBaseUnitBN, toTokenUnitsBN } from '../../utils/number';\r\nimport { EQD, USDC } from \"../../constants/tokens\";\r\nimport { MAX_UINT256 } from \"../../constants/values\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\r\n\r\ntype ProvideProps = {\r\n  poolAddress: string,\r\n  user: string,\r\n  rewarded: BigNumber,\r\n  pairBalanceEQD: BigNumber,\r\n  pairBalanceUSDC: BigNumber,\r\n  userUSDCBalance: BigNumber,\r\n  userUSDCAllowance: BigNumber,\r\n  status: number,\r\n};\r\n\r\nfunction Provide({\r\n  poolAddress,\r\n  user,\r\n  rewarded,\r\n  pairBalanceEQD,\r\n  pairBalanceUSDC,\r\n  userUSDCBalance,\r\n  userUSDCAllowance,\r\n  status\r\n}: ProvideProps) {\r\n  const [provideAmount, setProvideAmount] = useState(new BigNumber(0));\r\n  const [usdcAmount, setUsdcAmount] = useState(new BigNumber(0));\r\n\r\n  const USDCToEQDRatio = pairBalanceUSDC.isZero() ? new BigNumber(1) : pairBalanceUSDC.div(pairBalanceEQD);\r\n\r\n  const onChangeAmountEQD = (amountEQD) => {\r\n    if (!amountEQD) {\r\n      setProvideAmount(new BigNumber(0));\r\n      setUsdcAmount(new BigNumber(0));\r\n      return;\r\n    }\r\n\r\n    const amountEQDBN = new BigNumber(amountEQD)\r\n    setProvideAmount(amountEQDBN);\r\n\r\n    const amountEQDBU = toBaseUnitBN(amountEQDBN, EQD.decimals);\r\n    const newAmountUSDC = toTokenUnitsBN(amountEQDBU.multipliedBy(USDCToEQDRatio).integerValue(BigNumber.ROUND_FLOOR), EQD.decimals);\r\n    setUsdcAmount(newAmountUSDC);\r\n  };\r\n\r\n  const handleMaxUSDC = () => {\r\n    const newAmountEQD = userUSDCBalance.dividedBy(USDCToEQDRatio).toFixed(0, 1);\r\n    onChangeAmountEQD(newAmountEQD)\r\n  }\r\n\r\n  return (\r\n    <div style={{ marginBottom: '2%', display: 'block', position: 'relative', background: '#ffffff' }}>\r\n      <h2 style={{ padding: '2%' }} className=\"bg-warning\">Provide</h2>\r\n      <div className=\"bs-component\" style={{ padding: '2%', color: '#000000' }}>\r\n        {userUSDCAllowance.comparedTo(MAX_UINT256.dividedBy(2)) > 0 ?\r\n          <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n            {/* total rewarded */}\r\n            <div style={{ flexBasis: '32%' }}>\r\n              <BalanceBlock asset=\"Rewarded\" balance={rewarded} suffix={\"EQD\"} />\r\n            </div>\r\n            <div style={{ flexBasis: '33%' }}>\r\n              <BalanceBlock asset=\"BUSD Balance\" balance={userUSDCBalance} suffix={\"BUSD\"} />\r\n            </div>\r\n            <div style={{ flexBasis: '2%' }} />\r\n            {/* Provide liquidity using Pool rewards */}\r\n            <div style={{ flexBasis: '33%', paddingTop: '2%' }}>\r\n              <div style={{ display: 'flex' }}>\r\n                <div style={{ width: '60%', minWidth: '6em' }}>\r\n                  <>\r\n                    <BigNumberInput\r\n                      adornment=\"EQD\"\r\n                      value={provideAmount}\r\n                      setter={onChangeAmountEQD}\r\n                      disabled={status === 1}\r\n                    />\r\n                    <PriceSection label=\"Requires \" amt={usdcAmount} symbol=\" USDC\" />\r\n                    <div className=\"d-flex\">\r\n                      <MaxButton\r\n                        onClick={() => {\r\n                          onChangeAmountEQD(rewarded);\r\n                        }}\r\n                        title=\"Max EQD\"\r\n                      />\r\n                      <div className=\"ml-4\">\r\n                        <MaxButton\r\n                          onClick={handleMaxUSDC}\r\n                          title=\"Max BUSD\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n                </div>\r\n                <div style={{ width: '40%', minWidth: '6em' }}>\r\n                  {\r\n                    (poolAddress === '' || status !== 0 || !isPos(provideAmount) || usdcAmount.isGreaterThan(userUSDCBalance))\r\n                      ? <OverlayTrigger\r\n                        placement=\"bottom\"\r\n                        overlay={\r\n                          <Tooltip id=\"tooltip\">\r\n                            Make sure the value &gt; 0 and your status is Unlocked.\r\n                        </Tooltip>\r\n                        }\r\n                      >\r\n                        <div style={{ display: 'inline-block', cursor: 'not-allowed' }}>\r\n                          <Button\r\n                            style={{ pointerEvents: 'none' }}\r\n                            wide\r\n                            icon={<IconArrowUp />}\r\n                            label=\"Provide\"\r\n                            disabled={poolAddress === '' || status !== 0 || !isPos(provideAmount) || usdcAmount.isGreaterThan(userUSDCBalance)}\r\n                          />\r\n                        </div>\r\n                      </OverlayTrigger>\r\n                      : <Button\r\n                        wide\r\n                        icon={<IconArrowUp />}\r\n                        label=\"Provide\"\r\n                        onClick={() => {\r\n                          providePool(\r\n                            poolAddress,\r\n                            toBaseUnitBN(provideAmount, EQD.decimals),\r\n                            (hash) => setProvideAmount(new BigNumber(0))\r\n                          );\r\n                        }}\r\n                      />\r\n                  }\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          :\r\n          <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n            {/* total rewarded */}\r\n            <div style={{ flexBasis: '32%' }}>\r\n              <BalanceBlock asset=\"Rewarded\" balance={rewarded} suffix={\"EQD\"} />\r\n            </div>\r\n            <div style={{ flexBasis: '33%' }}>\r\n              <BalanceBlock asset=\"USDC Balance\" balance={userUSDCBalance} suffix={\"BUSD\"} />\r\n            </div>\r\n            <div style={{ flexBasis: '2%' }} />\r\n            {/* Approve Pool to spend USDC */}\r\n            <div style={{ flexBasis: '33%', paddingTop: '2%' }}>\r\n              <Button\r\n                wide\r\n                icon={<IconCirclePlus />}\r\n                label=\"Approve\"\r\n                onClick={() => {\r\n                  approve(USDC.addr, poolAddress);\r\n                }}\r\n                disabled={poolAddress === '' || user === ''}\r\n              />\r\n            </div>\r\n          </div>\r\n        }\r\n        <div style={{ width: '100%', paddingTop: '2%', textAlign: 'center' }}>\r\n          <span style={{ opacity: 0.5 }}> Zapping requires your Bonded balance &gt; 0 and your status as Unlocked. </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Provide;\r\n","import React from 'react';\r\nimport BigNumber from \"bignumber.js\";\r\nimport { Box } from '@aragon/ui';\r\nimport styled from 'styled-components'\r\n\r\ntype InvestProps = {\r\n  totalSupply: BigNumber,\r\n  EQDLPBonded: BigNumber,\r\n};\r\n\r\nconst Invest = ({ totalSupply, EQDLPBonded }: InvestProps) => {\r\n  const EQDLpBonded = EQDLPBonded.toNumber() * 2;\r\n  const lpHourly = ((((totalSupply.toNumber() * 4) / 100) * 40) / 100 + EQDLpBonded) / EQDLpBonded;\r\n  const lpDaily = (((((totalSupply.toNumber() * 4) / 100) * 40) / 100) * 24 + EQDLpBonded) / EQDLpBonded;\r\n  const lpWeekly = (((((totalSupply.toNumber() * 4) / 100) * 40) / 100) * 168 + EQDLpBonded) / EQDLpBonded;\r\n\r\n  return (\r\n\r\n    <Container>\r\n      <ContainerItem style={{ flexBasis: '30%', flexGrow: 1, marginRight: '2%' }}>\r\n        <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n          <ul className=\"list-group\" style={{ background: '#000084' }}>\r\n            <li className=\"d-flex justify-content-between align-items-center\" style={{ padding: '5%', height: '230px' }}>\r\n              <div>\r\n                <div style={{ fontSize: 16, padding: 3 }}>APR</div>\r\n                <div style={{ fontSize: 16, padding: 3 }}>LP hourly:\r\n              <div style={{\r\n                    fontSize: 24,\r\n                    padding: 3,\r\n                    fontWeight: 400,\r\n                    lineHeight: 1.5,\r\n                    fontFamily: 'DOS, monospace'\r\n                  }}>\r\n                    {((lpHourly - 1) * 100).toFixed(2)}%\r\n              </div>\r\n                </div>\r\n                <div style={{ fontSize: 16, padding: 3 }}>LP daily:\r\n              <div style={{\r\n                    fontSize: 24,\r\n                    padding: 3,\r\n                    fontWeight: 400,\r\n                    lineHeight: 1.5,\r\n                    fontFamily: 'DOS, monospace'\r\n                  }}>\r\n                    {((lpDaily - 1) * 100).toFixed(2)}%\r\n              </div>\r\n                </div>\r\n                <div style={{ fontSize: 16, padding: 3 }}>LP weekly:\r\n              <div style={{\r\n                    fontSize: 24,\r\n                    padding: 3,\r\n                    fontWeight: 400,\r\n                    lineHeight: 1.5,\r\n                    fontFamily: 'DOS, monospace'\r\n                  }}>\r\n                    {((lpWeekly - 1) * 100).toFixed(2)}%\r\n              </div>\r\n                </div>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </ContainerItem>\r\n      <ContainerItem style={{ flexBasis: '68%' }}>\r\n        <div className=\"bs-component modal\" style={{ display: 'block', position: 'relative' }}>\r\n          <ul className=\"list-group\" style={{ background: '#000084', padding: '4%', height: '250px' }}>\r\n            <label style={{ fontSize: 26 }}><strong>Guide for LP bonding</strong></label>\r\n\r\n            <p className=\"mt-4\">Step 1: You need to have CAKE-LP in your wallet (by adding Liquidity to BUSD-EQD pair).</p>\r\n\r\n            <p className=\"mt-2\">Step 2: Approve your CAKE-LP to unlock Staging (skip it if you've done it)</p>\r\n\r\n            <p className=\"mt-2\">Step 3: Stage your CAKE-LP into LP</p>\r\n\r\n            <p className=\"mt-2\">Step 4: Bond your CAKE-LP into LP</p>\r\n\r\n            <p className=\"mt-2\">Step 5: Unbond and wait 10 hours to claim your rewards</p>\r\n          </ul>\r\n        </div>\r\n      </ContainerItem>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  padding: 1%;\r\n  @media (max-width: 568px) {\r\n    display: block;\r\n  }\r\n`\r\n\r\nconst ContainerItem = styled.div`\r\n  @media (max-width: 568px) {\r\n    margin: 2% !important;\r\n  }\r\n`\r\n\r\nexport default Invest;","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Header } from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\n\r\nimport {\r\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable,\r\n  getPoolBalanceOfRewarded,\r\n  getPoolBalanceOfStaged,\r\n  getPoolStatusOf, getPoolTotalBonded,\r\n  getTokenAllowance,\r\n  getTokenBalance,\r\n  getPoolFluidUntil, getTokenTotalSupply, loadFluidStatusPool\r\n} from '../../utils/infura';\r\nimport { EQD, UNI, USDC, ZAP, ESD, DSD, ZAI } from \"../../constants/tokens\";\r\nimport { POOL_EXIT_LOCKUP_EPOCHS } from \"../../constants/values\";\r\nimport { toTokenUnitsBN } from '../../utils/number';\r\n\r\nimport WithdrawDeposit from \"./WithdrawDeposit\";\r\nimport BondUnbond from \"./BondUnbond\";\r\nimport PoolPageHeader from \"./Header\";\r\nimport Claim from \"./Claim\";\r\nimport Provide from \"./Provide\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport Migrate from \"./Migrate\";\r\nimport AddUni from \"./AddUni\";\r\nimport { getLegacyPoolAddress, getPoolAddress } from \"../../utils/pool\";\r\nimport { DollarPool4 } from \"../../constants/contracts\";\r\nimport Invest from \"./Invest\";\r\n\r\nfunction Pool({ user }: { user: string }) {\r\n  const { override } = useParams();\r\n  if (override) {\r\n    user = override;\r\n  }\r\n\r\n  const [poolAddress, setPoolAddress] = useState(\"\");\r\n  const [poolTotalBonded, setPoolTotalBonded] = useState(new BigNumber(0));\r\n  const [pairBalanceEQD, setPairBalanceEQD] = useState(new BigNumber(0));\r\n  const [pairBalanceUSDC, setPairBalanceUSDC] = useState(new BigNumber(0));\r\n  const [userUNIBalance, setUserUNIBalance] = useState(new BigNumber(0));\r\n  const [userUNIAllowance, setUserUNIAllowance] = useState(new BigNumber(0));\r\n  const [userUSDCBalance, setUserUSDCBalance] = useState(new BigNumber(0));\r\n  const [userUSDCAllowance, setUserUSDCAllowance] = useState(new BigNumber(0));\r\n  const [userStagedBalance, setUserStagedBalance] = useState(new BigNumber(0));\r\n  const [userBondedBalance, setUserBondedBalance] = useState(new BigNumber(0));\r\n  const [userRewardedBalance, setUserRewardedBalance] = useState(new BigNumber(0));\r\n  const [userClaimableBalance, setUserClaimableBalance] = useState(new BigNumber(0));\r\n  const [userStatus, setUserStatus] = useState(0);\r\n  const [userStatusUnlocked, setUserStatusUnlocked] = useState(0);\r\n  const [legacyUserStagedBalance, setLegacyUserStagedBalance] = useState(new BigNumber(0));\r\n  const [legacyUserBondedBalance, setLegacyUserBondedBalance] = useState(new BigNumber(0));\r\n  const [legacyUserRewardedBalance, setLegacyUserRewardedBalance] = useState(new BigNumber(0));\r\n  const [legacyUserClaimableBalance, setLegacyUserClaimableBalance] = useState(new BigNumber(0));\r\n  const [legacyUserStatus, setLegacyUserStatus] = useState(0);\r\n  const [lockup, setLockup] = useState(0);\r\n  const [totalSupply, setTotalSupply] = useState(new BigNumber(0));\r\n  const [fluidStatus, setFluidStatus] = useState({\r\n    lastUnbond: undefined, lastBond: undefined, fluidEpoch: undefined\r\n  });\r\n  const [zapUSDCAllowance, setZapUSDCAllowance] = useState(new BigNumber(0));\r\n  const [zapEQDAllowance, setZapEQDAllowance] = useState(new BigNumber(0));\r\n  const [zapESDAllowance, setZapESDAllowance] = useState(new BigNumber(0));\r\n  const [zapDSDAllowance, setZapDSDAllowance] = useState(new BigNumber(0));\r\n  const [zapZaiAllowance, setZapZaiAllowance] = useState(new BigNumber(0));\r\n  const [userEQDBalance, setUserEQDBalance] = useState(new BigNumber(0));\r\n  const [userESDBalance, setUserESDBalance] = useState(new BigNumber(0));\r\n  const [userDSDBalance, setUserDSDBalance] = useState(new BigNumber(0));\r\n  const [userZaiBalance, setUserZaiBalance] = useState(new BigNumber(0));\r\n\r\n  //Update User balances\r\n  useEffect(() => {\r\n    let isCancelledApr = false;\r\n    async function updateAPR() {\r\n      const [\r\n        totalSupplyStr,\r\n        totalBondedStr,\r\n      ] = await Promise.all([\r\n        getTokenTotalSupply(EQD.addr),\r\n        getTokenBalance(EQD.addr, UNI.addr),\r\n      ]);\r\n\r\n      if (!isCancelledApr) {\r\n        setTotalSupply(toTokenUnitsBN(totalSupplyStr, EQD.decimals));\r\n        setPairBalanceEQD(toTokenUnitsBN(totalBondedStr, EQD.decimals));\r\n      }\r\n    }\r\n\r\n    updateAPR();\r\n\r\n    if (user === '') {\r\n      setPoolAddress(\"\");\r\n      setPoolTotalBonded(new BigNumber(0));\r\n      setPairBalanceEQD(new BigNumber(0));\r\n      setPairBalanceUSDC(new BigNumber(0));\r\n      setUserUNIBalance(new BigNumber(0));\r\n      setUserUNIAllowance(new BigNumber(0));\r\n      setUserUSDCBalance(new BigNumber(0));\r\n      setUserUSDCAllowance(new BigNumber(0));\r\n      setUserStagedBalance(new BigNumber(0));\r\n      setUserBondedBalance(new BigNumber(0));\r\n      setUserRewardedBalance(new BigNumber(0));\r\n      setUserClaimableBalance(new BigNumber(0));\r\n      setUserStatus(0);\r\n      setUserStatusUnlocked(0);\r\n      setLegacyUserStagedBalance(new BigNumber(0));\r\n      setLegacyUserBondedBalance(new BigNumber(0));\r\n      setLegacyUserRewardedBalance(new BigNumber(0));\r\n      setLegacyUserClaimableBalance(new BigNumber(0));\r\n      setLegacyUserStatus(0);\r\n      setZapUSDCAllowance(new BigNumber(0));\r\n      setZapEQDAllowance(new BigNumber(0));\r\n      setZapESDAllowance(new BigNumber(0));\r\n      setZapDSDAllowance(new BigNumber(0));\r\n      setZapZaiAllowance(new BigNumber(0));\r\n      setUserEQDBalance(new BigNumber(0));\r\n      setUserESDBalance(new BigNumber(0));\r\n      setUserDSDBalance(new BigNumber(0));\r\n      setUserZaiBalance(new BigNumber(0));\r\n      return;\r\n    }\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const poolAddressStr = await getPoolAddress();\r\n      const legacyPoolAddress = getLegacyPoolAddress(poolAddressStr);\r\n\r\n      const [\r\n        poolTotalBondedStr,\r\n        pairBalanceEQDStr,\r\n        pairBalanceUSDCStr,\r\n        balance,\r\n        usdcBalance,\r\n        allowance,\r\n        usdcAllowance,\r\n        stagedBalance,\r\n        bondedBalance,\r\n        rewardedBalance,\r\n        claimableBalance,\r\n        status,\r\n        fluidUntilStr,\r\n        legacyStagedBalance,\r\n        legacyBondedBalance,\r\n        legacyRewardedBalance,\r\n        legacyClaimableBalance,\r\n        legacyStatus,\r\n        fluidStatusStr,\r\n        zapUSDCAllowance,\r\n        zapEQDAllowance,\r\n        zapESDAllowance,\r\n        zapDSDAllowance,\r\n        zapZaiAllowance,\r\n        userEQDBalanceStr,\r\n        userESDBalanceStr,\r\n        userDSDBalanceStr,\r\n        userZaiBalanceStr,\r\n      ] = await Promise.all([\r\n        getPoolTotalBonded(poolAddressStr),\r\n        getTokenBalance(EQD.addr, UNI.addr),\r\n        getTokenBalance(USDC.addr, UNI.addr),\r\n        getTokenBalance(UNI.addr, user),\r\n        getTokenBalance(USDC.addr, user),\r\n\r\n        getTokenAllowance(UNI.addr, user, poolAddressStr),\r\n        getTokenAllowance(USDC.addr, user, poolAddressStr),\r\n        getPoolBalanceOfStaged(poolAddressStr, user),\r\n        getPoolBalanceOfBonded(poolAddressStr, user),\r\n\r\n        getPoolBalanceOfRewarded(poolAddressStr, user),\r\n        getPoolBalanceOfClaimable(poolAddressStr, user),\r\n        getPoolStatusOf(poolAddressStr, user),\r\n        getPoolFluidUntil(poolAddressStr, user),\r\n\r\n        getPoolBalanceOfStaged(legacyPoolAddress, user),\r\n        getPoolBalanceOfBonded(legacyPoolAddress, user),\r\n        getPoolBalanceOfRewarded(legacyPoolAddress, user),\r\n        getPoolBalanceOfClaimable(legacyPoolAddress, user),\r\n        getPoolStatusOf(legacyPoolAddress, user),\r\n        loadFluidStatusPool(poolAddressStr, user),\r\n        getTokenAllowance(USDC.addr, user, ZAP.addr),\r\n        getTokenAllowance(EQD.addr, user, ZAP.addr),\r\n        getTokenAllowance(ESD.addr, user, ZAP.addr),\r\n        getTokenAllowance(DSD.addr, user, ZAP.addr),\r\n        getTokenAllowance(ZAI.addr, user, ZAP.addr),\r\n        getTokenBalance(EQD.addr, user),\r\n        getTokenBalance(ESD.addr, user),\r\n        getTokenBalance(DSD.addr, user),\r\n        getTokenBalance(ZAI.addr, user),\r\n      ]);\r\n\r\n      const poolTotalBonded = toTokenUnitsBN(poolTotalBondedStr, EQD.decimals);\r\n      const pairEQDBalance = toTokenUnitsBN(pairBalanceEQDStr, EQD.decimals);\r\n      const pairUSDCBalance = toTokenUnitsBN(pairBalanceUSDCStr, USDC.decimals);\r\n      const userUNIBalance = toTokenUnitsBN(balance, UNI.decimals);\r\n      const userUSDCBalance = toTokenUnitsBN(usdcBalance, USDC.decimals);\r\n      const userStagedBalance = toTokenUnitsBN(stagedBalance, UNI.decimals);\r\n      const userBondedBalance = toTokenUnitsBN(bondedBalance, UNI.decimals);\r\n      const userRewardedBalance = toTokenUnitsBN(rewardedBalance, EQD.decimals);\r\n      const userClaimableBalance = toTokenUnitsBN(claimableBalance, EQD.decimals);\r\n      const userStatus = parseInt(status, 10);\r\n      const fluidUntil = parseInt(fluidUntilStr, 10);\r\n      const legacyUserStagedBalance = toTokenUnitsBN(legacyStagedBalance, UNI.decimals);\r\n      const legacyUserBondedBalance = toTokenUnitsBN(legacyBondedBalance, UNI.decimals);\r\n      const legacyUserRewardedBalance = toTokenUnitsBN(legacyRewardedBalance, UNI.decimals);\r\n      const legacyUserClaimableBalance = toTokenUnitsBN(legacyClaimableBalance, EQD.decimals);\r\n      const legacyUserStatus = parseInt(legacyStatus, 10);\r\n      const userEQDBalance = toTokenUnitsBN(userEQDBalanceStr, EQD.decimals);\r\n      const userESDBalance = toTokenUnitsBN(userESDBalanceStr, ESD.decimals);\r\n      const userDSDBalance = toTokenUnitsBN(userDSDBalanceStr, DSD.decimals);\r\n      const userZAIBalance = toTokenUnitsBN(userZaiBalanceStr, ZAI.decimals);\r\n\r\n      if (!isCancelled) {\r\n        setPoolAddress(poolAddressStr);\r\n        setPoolTotalBonded(new BigNumber(poolTotalBonded));\r\n        setPairBalanceEQD(new BigNumber(pairEQDBalance));\r\n        setPairBalanceUSDC(new BigNumber(pairUSDCBalance));\r\n        setUserUNIBalance(new BigNumber(userUNIBalance));\r\n        setUserUNIAllowance(new BigNumber(allowance));\r\n        setUserUSDCAllowance(new BigNumber(usdcAllowance));\r\n        setUserUSDCBalance(new BigNumber(userUSDCBalance));\r\n        setUserStagedBalance(new BigNumber(userStagedBalance));\r\n        setUserBondedBalance(new BigNumber(userBondedBalance));\r\n        setUserRewardedBalance(new BigNumber(userRewardedBalance));\r\n        setUserClaimableBalance(new BigNumber(userClaimableBalance));\r\n        setUserStatus(userStatus);\r\n        setUserStatusUnlocked(fluidUntil);\r\n        setLegacyUserStagedBalance(new BigNumber(legacyUserStagedBalance));\r\n        setLegacyUserBondedBalance(new BigNumber(legacyUserBondedBalance));\r\n        setLegacyUserRewardedBalance(new BigNumber(legacyUserRewardedBalance));\r\n        setLegacyUserClaimableBalance(new BigNumber(legacyUserClaimableBalance));\r\n        setLegacyUserStatus(legacyUserStatus);\r\n        setLockup(poolAddressStr === DollarPool4 ? POOL_EXIT_LOCKUP_EPOCHS : 1);\r\n        setFluidStatus(fluidStatusStr);\r\n        setZapUSDCAllowance(new BigNumber(zapUSDCAllowance));\r\n        setZapEQDAllowance(new BigNumber(zapEQDAllowance));\r\n        setZapESDAllowance(new BigNumber(zapESDAllowance));\r\n        setZapDSDAllowance(new BigNumber(zapDSDAllowance));\r\n        setZapZaiAllowance(new BigNumber(zapZaiAllowance));\r\n        setUserEQDBalance(new BigNumber(userEQDBalance));\r\n        setUserESDBalance(new BigNumber(userESDBalance));\r\n        setUserDSDBalance(new BigNumber(userDSDBalance));\r\n        setUserZaiBalance(new BigNumber(userZAIBalance));\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n    const apr = setInterval(updateAPR, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n      clearInterval(apr)\r\n    };\r\n  }, [user]);\r\n  // Check for error in .call()\r\n  const isRewardedNegative = legacyUserRewardedBalance.isGreaterThan(new BigNumber(\"1000000000000000000\"));\r\n  const hasLegacyBalance = legacyUserStagedBalance.isGreaterThan(0) || legacyUserClaimableBalance.isGreaterThan(0) || legacyUserBondedBalance.isGreaterThan(0);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ textAlign: 'center' }}>\r\n        <IconHeader icon={<div className=\"modal\" style={{ display: 'block', position: 'relative' }}><i className=\"fas fa-parachute-box\" /></div>} text=\"LP Reward Pool\" />\r\n      </div>\r\n\r\n      <Invest\r\n        totalSupply={totalSupply}\r\n        EQDLPBonded={pairBalanceEQD}\r\n      />\r\n\r\n\r\n      <PoolPageHeader\r\n        user={user}\r\n        accountUNIBalance={userUNIBalance}\r\n        accountBondedBalance={userBondedBalance}\r\n        accountRewardedEQDBalance={userRewardedBalance}\r\n        accountClaimableEQDBalance={userClaimableBalance}\r\n        poolTotalBonded={poolTotalBonded}\r\n        accountPoolStatus={userStatus}\r\n        unlocked={userStatusUnlocked}\r\n        fluidEpoch={fluidStatus?.fluidEpoch}\r\n      />\r\n\r\n      <WithdrawDeposit\r\n        poolAddress={poolAddress}\r\n        user={user}\r\n        balance={userUNIBalance}\r\n        allowance={userUNIAllowance}\r\n        stagedBalance={userStagedBalance}\r\n        status={userStatus}\r\n      />\r\n\r\n      <BondUnbond\r\n        poolAddress={poolAddress}\r\n        staged={userStagedBalance}\r\n        bonded={userBondedBalance}\r\n        status={userStatus}\r\n        lockup={lockup}\r\n      />\r\n\r\n      <Claim\r\n        poolAddress={poolAddress}\r\n        claimable={userClaimableBalance}\r\n        status={userStatus}\r\n      />\r\n\r\n      <Provide\r\n        poolAddress={poolAddress}\r\n        user={user}\r\n        rewarded={isRewardedNegative ? new BigNumber(0) : userRewardedBalance}\r\n        status={userStatus}\r\n        pairBalanceEQD={pairBalanceEQD}\r\n        pairBalanceUSDC={pairBalanceUSDC}\r\n        userUSDCBalance={userUSDCBalance}\r\n        userUSDCAllowance={userUSDCAllowance}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Pool;\r\n","import React from 'react';\r\nimport {\r\n  Box, LinkBase, Tag,\r\n} from '@aragon/ui';\r\n\r\nfunction HomePageNoWeb3() {\r\n\r\n  return (\r\n    <>\r\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\r\n        <MainButton\r\n          title=\"No web3 wallet detected\"\r\n          description=\"Click to get Metamask.\"\r\n          icon={<i className=\"fas fa-times-circle\"/>}\r\n          onClick={() => {\r\n            // @ts-ignore\r\n            window.location = 'https://www.metamask.io/';\r\n          }}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\ntype MainButtonPropx = {\r\n  title: string,\r\n  description: string,\r\n  icon: any,\r\n  onClick: Function,\r\n  tag?:string\r\n}\r\n\r\nfunction MainButton({\r\n  title, description, icon, onClick, tag,\r\n}:MainButtonPropx) {\r\n  return (\r\n    <LinkBase onClick={onClick} style={{ width: '100%' }}>\r\n      <Box>\r\n        <div style={{ padding: 10, fontSize: 18 }}>\r\n          {title}\r\n          {tag ? <Tag>{tag}</Tag> : <></>}\r\n        </div>\r\n        <span style={{ fontSize: 48 }}>\r\n          {icon}\r\n        </span>\r\n        {/*<img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />*/}\r\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\r\n          {' '}\r\n          {description}\r\n          {' '}\r\n        </div>\r\n\r\n      </Box>\r\n    </LinkBase>\r\n  );\r\n}\r\n\r\nexport default HomePageNoWeb3;\r\n","import React from 'react';\r\nimport styled from 'styled-components'\r\n\r\nfunction About() {\r\n  return <Container>\r\n    <div style={{ marginBottom: '2%', display: 'block', position: 'relative', background: '#ffffff' }}>\r\n      <div className=\"bs-component\" style={{ padding: '2%', color: '#000000' }}>\r\n        <Title>Introducing Equilibrium Dollar Protocol</Title>\r\n        <Text>Equilibrium Dollar Protocol is a decentralized, oracle data driven stablecoin which uses a supply elasticity\r\n        method around a Time Weighted Average Price (TWAP) oracle for price stability. It’s an algorithmic stablecoin\r\n      which uses TWAP to stabilize the price. Our goal is to maintain the price $EQD = 1 USD in long term.</Text>\r\n        <Logo\r\n          src=\"./logo/logo_center.png\"\r\n          alt=\"Equilibrium Dollar Protocol\"\r\n        />\r\n        <TextSub>Logo Equilibrium Dollar Protocol</TextSub>\r\n        <div>\r\n          <Text>\r\n            Token: <a\r\n              href=\"https://bscscan.com/token/0x5Aae642C7ceA19A027590ea42f2366f64377c06F\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >https://bscscan.com/token/0x5Aae642C7ceA19A027590ea42f2366f64377c06F</a>\r\n          </Text>\r\n          <Text>\r\n            Website: <a\r\n              rel=\"noopener noreferrer\"\r\n              href=\"https://eqdprotocol.finance\"\r\n              target=\"_blank\"\r\n            >https://eqdprotocol.finance</a>\r\n          </Text>\r\n          <Text>\r\n            Twitter: <a\r\n              href=\"https://twitter.com/EQD_finance\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >https://twitter.com/EQD_finance</a>\r\n          </Text>\r\n          <Text>\r\n            Telegram: <a\r\n              href=\"#\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >https://t.me/EQD_finance</a>\r\n          </Text>\r\n          <Text>\r\n            Github: <a\r\n              href=\"https://github.com/TrueDollar\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >https://github.com/EQDfinance</a>\r\n          </Text>\r\n\r\n        </div>\r\n        <div>\r\n          <TitleSub>Basics</TitleSub>\r\n          <ul style={{ marginLeft: 40 }}>\r\n            <TextBasic>Epoch Length: 3,600 Seconds (1 Hour)</TextBasic>\r\n            <TextBasic>Advance incentive: 2 EQD</TextBasic>\r\n            <TextBasic>DAO Lockup: 24 Epochs</TextBasic>\r\n            <TextBasic>LP Lockup: 10 Epochs</TextBasic>\r\n            <TextBasic>Source: CAKE-LP BUSD/EQD pair</TextBasic>\r\n            <TextBasic>Method: <a\r\n              rel=\"noopener noreferrer\"\r\n              href=\"#\"\r\n              target=\"_blank\"\r\n            >CAKE-LP Time\r\n          Weighted Average Price (TWAP)</a></TextBasic>\r\n            <TextBasic>Oracle Minimum: 10,000 BUSD</TextBasic>\r\n            <TextBasic>Period: 1 Epoch (1 Hour)</TextBasic>\r\n          </ul>\r\n        </div>\r\n        <div>\r\n          <TitleSub>Governance</TitleSub>\r\n          <Text>Equilibrium Dollar Protocol allows the community to submit proposals and vote for any changes, either\r\n          removing existing features, adding new features or adjust peripheral functionality. The voting can be done by\r\n          the EQD token holders. At the protocol launch, there will be no admin keys or any way to influence it without\r\n        changes being actioned by a governance process. This made EQD a fully decentralized protocol from unset.</Text>\r\n        </div>\r\n        <div>\r\n          <TitleSub>Our Plan</TitleSub>\r\n          <Text>We will launch EQD at 11:00 AM UTC / 17 January 2021</Text>\r\n          <Text>Our plan is to pre-mine only a small number of tokens (half amount of ESD and DSD premined) and they will be\r\n          placed in lock for DAO rewards and also will be used for the initial liquidity for the BUSD/EQD paid. These\r\n        tokens are locked up hence there are no hidden supplies!</Text>\r\n        </div>\r\n        <div>\r\n          <TitleSub>Why EQD?</TitleSub>\r\n          <Text>We believe in the future of algorithm stablecoins like $ESD, $DSD. We also see the problem that long epoch\r\n          time can lead to unstable value of the tokens. This is our experiment to explorer whether fast epoch time can\r\n        adjust the price better or not. So please DYOR before investing in our project.</Text>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Container>\r\n}\r\n\r\nconst Container = styled.div`\r\n  padding: 1% 15px;\r\n`\r\n\r\nconst Title = styled.p`\r\n  margin-top: 10px;\r\n  font-size: 52px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n  line-height: 1;\r\n`\r\n\r\nconst TitleSub = styled.h1`\r\n  margin-top: 24px;\r\n  font-size: 21px;\r\n  font-weight: bold;\r\n`\r\n\r\nconst Text = styled.p`\r\n  margin-top: 24px;\r\n  font-size: 21px;\r\n  line-height: 1.3;\r\n`\r\n\r\nconst TextSub = styled.p`\r\n  text-align: center;\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n`\r\n\r\nconst TextBasic = styled.li`\r\n  margin-top: 10px;\r\n  font-size: 21px;\r\n`\r\n\r\nconst Logo = styled.img`\r\n  width: auto;\r\n  height: auto;\r\n  background-color: white;\r\n  margin: 24px auto 0 auto;\r\n  display: block;\r\n  @media (max-width: 991px) {\r\n      max - width: 300px;\r\n  }\r\n`\r\n\r\nexport default About;","import React, {useEffect, useState} from 'react';\r\nimport styled from 'styled-components'\r\n\r\nfunction epochformatted() {\r\n  const epochStart = 1609473600;\r\n  const epochPeriod = 60 * 60;\r\n  const minute = 60;\r\n  const unixTimeSec = Math.floor(Date.now() / 1000);\r\n\r\n  let epochRemainder = unixTimeSec - epochStart\r\n  const epoch = Math.floor(epochRemainder / epochPeriod);\r\n  epochRemainder -= epoch * epochPeriod;\r\n  const epochMinute = Math.floor(epochRemainder / minute);\r\n  epochRemainder -= epochMinute * minute;\r\n\r\n  const minutes = 60 - epochMinute;\r\n  const second = 60 - epochRemainder;\r\n\r\n  return `00:${minutes > 9 ? minutes : \"0\" + minutes.toString()}:${second > 9 ? second : \"0\" + second.toString()}`;\r\n}\r\n\r\nconst NextEpoch = props => {\r\n  const [epochTime, setEpochTime] = useState(\"00:00:00\");\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateTime() {\r\n      if (!isCancelled) {\r\n        setEpochTime(epochformatted())\r\n      }\r\n    }\r\n    updateTime();\r\n    const id = setInterval(updateTime, 1000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Title>Next Epoch</Title>\r\n      <p>{epochTime}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Title = styled.h2`\r\n  font-weight: bold;\r\n`\r\n\r\nexport default NextEpoch;","import React from 'react';\r\nimport styled from 'styled-components'\r\nimport BigNumber from \"bignumber.js\";\r\nimport {ownership} from \"../../utils/number\";\r\n\r\ntype TokenDistributionProps = {\r\n  totalBonded: BigNumber,\r\n  totalStaged: BigNumber,\r\n  totalRedeemable: BigNumber,\r\n  totalSupplyUni: BigNumber,\r\n  poolTotalBonded: BigNumber,\r\n  poolTotalStaged: BigNumber,\r\n};\r\n\r\nconst TokenDistribution = ({totalBonded, totalStaged, totalRedeemable, totalSupplyUni, poolTotalBonded, poolTotalStaged}: TokenDistributionProps) => {\r\n  const daoTotalSupply = totalBonded.plus(totalStaged).plus(totalRedeemable);\r\n\r\n  return (\r\n    <>\r\n      <Title>Token Distribution</Title>\r\n      <Container>\r\n        <div>\r\n          <p>LP Staged:</p>\r\n          <p>LP Bonded:</p>\r\n          <p>DAO Staged:</p>\r\n          <p>DAO Bonded:</p>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <p>{+(ownership(poolTotalStaged, totalSupplyUni).toNumber().toFixed(2))}%</p>\r\n          <p>{+(ownership(poolTotalBonded, totalSupplyUni).toNumber().toFixed(2))}%</p>\r\n          <p>{+(ownership(totalStaged, daoTotalSupply).toNumber().toFixed(2))}%</p>\r\n          <p>{+(ownership(totalBonded, daoTotalSupply).toNumber().toFixed(2))}%</p>\r\n        </div>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`\r\n\r\nconst Title = styled.h2`\r\n  font-weight: bold;\r\n`\r\n\r\nexport default TokenDistribution;","import React from 'react';\r\nimport styled from 'styled-components'\r\nimport BigNumber from \"bignumber.js\";\r\n\r\ntype HistoryReturnProps = {\r\n  totalSupply: BigNumber,\r\n  totalBonded: BigNumber,\r\n  EQDLPBonded: BigNumber,\r\n};\r\n\r\nconst HistoryReturn = ({ totalSupply, totalBonded, EQDLPBonded }: HistoryReturnProps) => {\r\n  const EQDLpBonded = EQDLPBonded.toNumber() * 2;\r\n  const dao = (((((totalSupply.toNumber() * 4) / 100) * 60) / 100 + totalBonded.toNumber()) / totalBonded.toNumber());\r\n  const lpHourly = ((((totalSupply.toNumber() * 4) / 100) * 40) / 100 + EQDLpBonded) / EQDLpBonded;\r\n  const lpDaily = (((((totalSupply.toNumber() * 4) / 100) * 40) / 100) * 24 + EQDLpBonded) / EQDLpBonded;\r\n\r\n  return (\r\n    <div className=\"mt-4\">\r\n      <Title>Yield</Title>\r\n      <Container>\r\n        <div style={{ flexBasis: '48%', maxWidth: 300 }}>\r\n          <ContainerItem>\r\n            <div>\r\n              <p>DAO hourly:</p>\r\n              <p>DAO daily:</p>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <p>{((dao - 1) * 100).toFixed(2)}%</p>\r\n              <p>{((dao - 1) * 24 * 100).toFixed(2)}%</p>\r\n            </div>\r\n          </ContainerItem>\r\n        </div>\r\n        <div style={{ flexBasis: '48%', maxWidth: 300 }}>\r\n          <ContainerItem>\r\n            <div>\r\n              <p>LP hourly:</p>\r\n              <p>LP daily:</p>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <p>{((lpHourly - 1) * 100).toFixed(2)}%</p>\r\n              <p>{((lpDaily - 1) * 100).toFixed(2)}%</p>\r\n            </div>\r\n          </ContainerItem>\r\n        </div>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  @media (max-width: 522px) {\r\n    display: block;\r\n  }\r\n`\r\n\r\nconst ContainerItem = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`\r\n\r\nconst Title = styled.h2`\r\n  font-weight: bold;\r\n`\r\n\r\nexport default HistoryReturn;","import React, { useEffect, useState } from 'react';\r\nimport styled from 'styled-components'\r\n\r\nimport NextEpoch from \"./NextEpoch\";\r\nimport {\r\n  getEpoch,\r\n  getPoolTotalBonded, getPoolTotalStaged, getTokenBalance,\r\n  getTokenTotalSupply,\r\n  getTotalBonded, getTotalCoupons, getTotalDebt,\r\n  getTotalRedeemable,\r\n  getTotalStaged,\r\n  getTotalSupplyUni\r\n} from \"../../utils/infura\";\r\nimport { EQD, EQDS, UNI, USDC } from \"../../constants/tokens\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport { toTokenUnitsBN } from \"../../utils/number\";\r\nimport TokenDistribution from \"./TokenDistribution\";\r\nimport HistoryReturn from \"./HistoryReturn\";\r\nimport { getPoolAddress } from \"../../utils/pool\";\r\n\r\nfunction Tool() {\r\n  const [epoch, setEpoch] = useState(0);\r\n\r\n  const [totalSupply, setTotalSupply] = useState(new BigNumber(0));\r\n  const [totalBonded, setTotalBonded] = useState(new BigNumber(0));\r\n  const [totalStaged, setTotalStaged] = useState(new BigNumber(0));\r\n  const [totalSupplyUni, setTotalSupplyUni] = useState(new BigNumber(0));\r\n  const [poolTotalBonded, setPoolTotalBonded] = useState(new BigNumber(0));\r\n  const [poolTotalStaged, setPoolTotalStaged] = useState(new BigNumber(0));\r\n\r\n  const [totalRedeemable, setTotalRedeemable] = useState(new BigNumber(0));\r\n\r\n  const [totalDebt, setTotalDebt] = useState(new BigNumber(0));\r\n  const [totalCoupons, setTotalCoupons] = useState(new BigNumber(0));\r\n\r\n  const [pairBalanceEQD, setPairBalanceEQD] = useState(new BigNumber(0));\r\n  const [pairBalanceUSDC, setPairBalanceUSDC] = useState(new BigNumber(0));\r\n\r\n  const price = pairBalanceUSDC.dividedBy(pairBalanceEQD);\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function getTool() {\r\n      const poolAddressStr = await getPoolAddress();\r\n\r\n      const [\r\n        epochStr,\r\n\r\n        pairBalanceEQDStr,\r\n        pairBalanceUSDCStr,\r\n\r\n        totalSupplyStr,\r\n        totalBondedStr,\r\n        totalStagedStr,\r\n        totalSupplyUniStr,\r\n        poolTotalBondedStr,\r\n        poolTotalStagedStr,\r\n        totalRedeemableStr,\r\n        totalDebtStr,\r\n        totalCouponsStr\r\n      ] = await Promise.all([\r\n        getEpoch(EQDS.addr),\r\n\r\n        getTokenBalance(EQD.addr, UNI.addr),\r\n        getTokenBalance(USDC.addr, UNI.addr),\r\n\r\n        getTokenTotalSupply(EQD.addr),\r\n        getTotalBonded(EQDS.addr),\r\n        getTotalStaged(EQDS.addr),\r\n        getTotalSupplyUni(),\r\n        getPoolTotalBonded(poolAddressStr),\r\n        getPoolTotalStaged(poolAddressStr),\r\n\r\n        getTotalRedeemable(EQDS.addr),\r\n        getTotalDebt(EQDS.addr),\r\n        getTotalCoupons(EQDS.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setEpoch(parseInt(epochStr, 10));\r\n\r\n        setPairBalanceEQD(toTokenUnitsBN(pairBalanceEQDStr, EQD.decimals));\r\n        setPairBalanceUSDC(toTokenUnitsBN(pairBalanceUSDCStr, USDC.decimals));\r\n\r\n        setTotalSupply(toTokenUnitsBN(totalSupplyStr, EQD.decimals));\r\n        setTotalBonded(toTokenUnitsBN(totalBondedStr, EQD.decimals));\r\n        setTotalStaged(toTokenUnitsBN(totalStagedStr, EQD.decimals));\r\n        setTotalRedeemable(toTokenUnitsBN(totalRedeemableStr, EQD.decimals));\r\n        setTotalSupplyUni(toTokenUnitsBN(totalSupplyUniStr, EQD.decimals));\r\n        setPoolTotalBonded(toTokenUnitsBN(poolTotalBondedStr, EQD.decimals));\r\n        setPoolTotalStaged(toTokenUnitsBN(poolTotalStagedStr, EQD.decimals));\r\n        setTotalDebt(toTokenUnitsBN(totalDebtStr, EQD.decimals));\r\n        setTotalCoupons(toTokenUnitsBN(totalCouponsStr, EQD.decimals));\r\n\r\n      }\r\n    }\r\n\r\n    getTool();\r\n    const id = setInterval(getTool, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, []);\r\n\r\n  const increaseBy = (totalSupply.toNumber() * 4) / 100;\r\n  const daoBonding = (((totalSupply.toNumber() * 4) / 100) * 60) / 100;\r\n  const lpBonding = (((totalSupply.toNumber() * 4) / 100) * 40) / 100;\r\n\r\n  return <Container>\r\n\r\n    <div style={{ marginBottom: '2%', display: 'block', position: 'relative', background: '#ffffff' }}>\r\n      <h2 style={{ padding: '2%' }} className=\"bg-warning\">Tools</h2>\r\n      <div className=\"bs-component\" style={{ padding: '2%', color: '#000000' }}>\r\n        <Header>\r\n          Next Epoch:\r\n      <p>$EQD Supply will increase by {increaseBy.toFixed(2)} EQD </p>\r\n          <p>{daoBonding.toFixed(2)} EQD for DAO Bonding and {lpBonding.toFixed(2)} EQD for LP Bonding</p>\r\n        </Header>\r\n        <ContainerItem>\r\n          <NextEpoch />\r\n          <div>\r\n            <Title>Spot Price</Title>\r\n            <p>${price.toNumber().toFixed(2)} BUSD</p>\r\n          </div>\r\n          <div>\r\n            <Title>TWAP Price</Title>\r\n            <p>$1.22 BUSD - Bootstrap</p>\r\n          </div>\r\n          <div>\r\n            <Title>Epoch</Title>\r\n            <p>{epoch}</p>\r\n          </div>\r\n        </ContainerItem>\r\n        <ContainerItem>\r\n          <div style={{ flexBasis: '48%', maxWidth: 300 }}>\r\n            <Title>Token Supply</Title>\r\n            <ContainerFlex>\r\n              <div>\r\n                <p>Total Token:</p>\r\n                <p>Coupons:</p>\r\n                <p>Total Supply:</p>\r\n                <p>Debt:</p>\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <p>{(totalSupply.toNumber() - totalCoupons.toNumber()).toFixed(2)}</p>\r\n                <p>{totalCoupons.toNumber().toFixed(2)}</p>\r\n                <p>{totalSupply.toNumber().toFixed(2)}</p>\r\n                <p>{totalDebt.toNumber().toFixed(2)}</p>\r\n              </div>\r\n            </ContainerFlex>\r\n          </div>\r\n          <div style={{ flexBasis: '48%', maxWidth: 300 }}>\r\n            <TokenDistribution\r\n              totalRedeemable={totalRedeemable}\r\n              totalStaged={totalStaged}\r\n              totalBonded={totalBonded}\r\n              totalSupplyUni={totalSupplyUni}\r\n              poolTotalStaged={poolTotalStaged}\r\n              poolTotalBonded={poolTotalBonded}\r\n            />\r\n          </div>\r\n        </ContainerItem>\r\n        <HistoryReturn\r\n          totalSupply={totalSupply}\r\n          totalBonded={totalBonded}\r\n          EQDLPBonded={pairBalanceEQD}\r\n        />\r\n\r\n      </div>\r\n    </div>\r\n  </Container>\r\n}\r\n\r\nconst Header = styled.div`\r\n  text-align: center;\r\n`\r\n\r\nconst Container = styled.div`\r\n  padding: 1% 15px 1% 15px;\r\n  max-width: 800px;\r\n  margin: 20px auto 0 auto;\r\n`\r\n\r\nconst ContainerItem = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-wrap: wrap;\r\n  margin-top: 20px;\r\n  @media (max-width: 522px) {\r\n    display: block;\r\n  }\r\n`\r\n\r\nconst ContainerFlex = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-wrap: wrap;\r\n`\r\n\r\nconst Title = styled.h2`\r\n  font-weight: bold;\r\n`\r\n\r\nexport default Tool;","import React, { useEffect, useState } from 'react';\r\n\r\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport { Main, Layout } from '@aragon/ui';\r\nimport { UseWalletProvider } from 'use-wallet';\r\nimport { updateModalMode } from './utils/web3';\r\nimport { storePreference, getPreference } from './utils/storage';\r\nimport NavBar from './components/NavBar';\r\nimport HomePage from './components/HomePage';\r\nimport Trade from './components/Trade/index';\r\nimport Footer from './components/Footer';\r\nimport Wallet from \"./components/Wallet\";\r\nimport EpochDetail from \"./components/EpochDetail\";\r\nimport CouponMarket from \"./components/CouponMarket\";\r\nimport Governance from \"./components/Governance\";\r\nimport Candidate from \"./components/Candidate\";\r\nimport Regulation from \"./components/Regulation\";\r\nimport Pool from \"./components/Pool\";\r\nimport HomePageNoWeb3 from \"./components/HomePageNoWeb3\";\r\nimport About from \"./components/About\";\r\nimport Tool from \"./components/Tool\";\r\n// import GetUni from \"./components/GetUni\";\r\n\r\n// import 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nfunction App() {\r\n  const storedTheme = getPreference('theme', 'light');\r\n\r\n  const [hasWeb3, setHasWeb3] = useState(false);\r\n  const [user, setUser] = useState(''); // the current connected user\r\n  const [theme, setTheme] = useState(storedTheme);\r\n  const updateTheme = (newTheme: string) => {\r\n    setTheme(newTheme);\r\n    updateModalMode(newTheme);\r\n    storePreference('theme', newTheme);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      if (!isCancelled) {\r\n        // @ts-ignore\r\n        setHasWeb3(typeof window.ethereum !== 'undefined');\r\n      }\r\n    }\r\n\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <Router>\r\n      <UseWalletProvider\r\n        chainId={56}\r\n        connectors={{\r\n          walletconnect: { rpcUrl: 'https://mainnet.eth.aragon.network/' },\r\n          walletlink: {\r\n            url: 'https://mainnet.eth.aragon.network/',\r\n            appName: 'Coinbase Wallet',\r\n            appLogoUrl: ''\r\n          }\r\n        }}\r\n      >\r\n        <Main assetsUrl={`${process.env.PUBLIC_URL}/aragon-ui/`} theme={theme} layout={false}>\r\n          <NavBar hasWeb3={hasWeb3} user={user} setUser={setUser} />\r\n          <Layout style={{ minWidth: 'auto' }}>\r\n            {\r\n              hasWeb3 ?\r\n                <Switch>\r\n                  <Route path=\"/dao/:override\"><Wallet user={user} /></Route>\r\n                  <Route path=\"/dao/\"><Wallet user={user} /></Route>\r\n                  {/*<Route path=\"/get-uni/\"><GetUni user={user}/></Route>*/}\r\n                  <Route path=\"/epoch/\"><EpochDetail user={user} /></Route>\r\n                  <Route path=\"/coupons/:override\"><CouponMarket user={user} /></Route>\r\n                  <Route path=\"/coupons/\"><CouponMarket user={user} /></Route>\r\n                  <Route path=\"/governance/candidate/:candidate\"><Candidate user={user} /></Route>\r\n                  <Route path=\"/governance/\"><Governance user={user} /></Route>\r\n                  <Route path=\"/trade/\"><Trade user={user} /></Route>\r\n                  <Route path=\"/regulation/\"><Regulation user={user} /></Route>\r\n                  <Route path=\"/pool/:override\"><Pool user={user} /></Route>\r\n                  <Route path=\"/pool/\"><Pool user={user} /></Route>\r\n                  <Route path=\"/about/\"><About /></Route>\r\n                  <Route path=\"/tools/\"><Tool /></Route>\r\n                  <Route path=\"/\"><HomePage user={user} /></Route>\r\n                </Switch>\r\n                :\r\n                <Switch>\r\n                  <Route path=\"/\"><HomePageNoWeb3 /></Route>\r\n                </Switch>\r\n            }\r\n          </Layout>\r\n          <div style={{ height: '128px', width: '100%' }} />\r\n          <Footer hasWeb3={hasWeb3} theme={theme} updateTheme={updateTheme} />\r\n        </Main>\r\n      </UseWalletProvider>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'react-widgets/dist/css/react-widgets.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport Moment from 'moment'\r\nimport momentLocalizer from 'react-widgets-moment';\r\n\r\nMoment.locale('en')\r\nmomentLocalizer()\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}